import{a0 as Te,a1 as fe,a2 as D,a3 as ve,a4 as n,a5 as _,a6 as G,a7 as l,a8 as Ko,a9 as ao,aa as J,ab as Re,ac as Ie,ad as e,ae as Be,af as de,ag as O,ah as te,ai as le,aj as R,ak as B,al as f,am as he,an as ce,ao as g,ap as I,aq as ke,ar as Ye,as as Ne,at as to,au as mo,av as so,aw as Ke,ax as go,ay as fo,az as bo,aA as ze,aB as Jo,aC as Qo,aD as Yo,aE as et,aF as ot,aG as tt,aH as st,aI as lt,aJ as at,aK as nt,aL as it,aM as rt,aN as dt,aO as ut,aP as ct,aQ as pt,aR as vt,aS as yo,aT as ko,aU as mt,aV as $o,aW as gt,aX as ft,aY as ho,aZ as Co,a_ as bt,a$ as yt,b0 as _o,b1 as wo,b2 as So,b3 as xo,b4 as Eo,b5 as Io,b6 as Uo,b7 as Vo,b8 as Mo,b9 as kt,ba as $t,bb as To,bc as ht,bd as Ct,be as _t,bf as wt,bg as St,bh as xt,bi as Et,bj as Po,bk as It,bl as Bo,bm as xe,bn as ge,bo as Ut,bp as ie,bq as Se,br as $e,bs as zo,bt as We,bu as eo,bv as Vt,bw as no,bx as Go,by as io,bz as lo,bA as je,bB as Mt,bC as Tt,bD as Pt,bE as Bt}from"./vendor-DL2Te-ZB.js";import{S as ro,N as At,T as Lt,C as Dt,H as Rt,a as Ft,U as zt,L as Gt,B as Nt,b as qt,c as Ht}from"./tiptap-BYjRuCKk.js";import{l as Ot,f as jt,a as Wt,b as Zt,c as Xt,d as Kt,e as Jt,g as Qt,h as Yt,j as es,k as os}from"./fontawesome-DsiiSmhg.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))b(i);new MutationObserver(i=>{for(const w of i)if(w.type==="childList")for(const s of w.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&b(s)}).observe(document,{childList:!0,subtree:!0});function c(i){const w={};return i.integrity&&(w.integrity=i.integrity),i.referrerPolicy&&(w.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?w.credentials="include":i.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function b(i){if(i.ep)return;i.ep=!0;const w=c(i);fetch(i.href,w)}})();const ne=Te.create({baseURL:"https://r-integra.com/api",headers:{"Content-Type":"application/json",Accept:"application/json"}});ne.interceptors.request.use(p=>{const u=localStorage.getItem("token");return u&&(p.headers.Authorization=`Bearer ${u}`),p});const we={getAll:()=>ne.get("/pages"),getNavigation:()=>ne.get("/pages/navigation"),getMainPages:()=>ne.get("/pages/main-pages"),getHomepage:()=>ne.get("/pages/homepage"),getById:p=>ne.get(`/pages/id/${p}`),getBySlug:p=>ne.get(`/pages/${p}`),create:p=>ne.post("/pages",p),update:(p,u)=>ne.put(`/pages/${p}`,u),updateOrder:p=>ne.patch("/pages/update-order",p),delete:p=>ne.delete(`/pages/${p}`)},Je={getAll:()=>ne.get("/contents"),getById:p=>ne.get(`/contents/${p}`),create:p=>ne.post("/contents",p),update:(p,u)=>ne.put(`/contents/${p}`,u),delete:p=>ne.delete(`/contents/${p}`),updateOrder:p=>ne.patch("/contents/update-order",p)},Ee={getActive:p=>(console.log(`🌐 API: Solicitando configuración activa para tipo: ${p}`),ne.get(`/configs/${p}`).then(u=>(console.log(`✅ API: Configuración ${p} obtenida:`,u.data),u)).catch(u=>{throw console.error(`❌ API: Error al obtener configuración ${p}:`,u),u})),save:(p,u,c)=>(console.log(`💾 API: Guardando configuración ${p}:`,u),ne.post(`/configs/${p}`,{config_data:u,description:c}).then(b=>(console.log(`✅ API: Configuración ${p} guardada:`,b.data),b)).catch(b=>{throw console.error(`❌ API: Error al guardar configuración ${p}:`,b),b})),getVersions:p=>ne.get(`/configs/${p}/versions`),activateVersion:(p,u)=>ne.put(`/configs/${p}/activate`,{version:u}),getById:p=>ne.get(`/configs/id/${p}`),delete:p=>ne.delete(`/configs/id/${p}`)},Pe={submitForm:(p,u)=>ne.post("/forms/submit",{form_type:p,...u}),getAll:p=>ne.get("/forms",{params:p}),getById:p=>ne.get(`/forms/${p}`),updateStatus:(p,u)=>ne.patch(`/forms/${p}/status`,{status:u}),reply:(p,u)=>ne.post(`/forms/${p}/reply`,u),markAllAsRead:()=>ne.patch("/forms/mark-all-read"),exportCsv:p=>ne.get("/forms/export",{params:p,responseType:"blob"}),delete:p=>ne.delete(`/forms/${p}`)},He={getAll:p=>ne.get("/users",{params:p}),getById:p=>ne.get(`/users/${p}`),create:p=>ne.post("/users",p),update:(p,u)=>ne.put(`/users/${p}`,u),delete:p=>ne.delete(`/users/${p}`),getRoles:()=>ne.get("/roles")},Le={getAll:p=>ne.get("/backups",{params:p}),getById:p=>ne.get(`/backups/${p}`),create:p=>ne.post("/backups",p),update:(p,u)=>ne.put(`/backups/${p}`,u),delete:p=>ne.delete(`/backups/${p}`),download:p=>ne.get(`/backups/${p}/download`,{responseType:"blob"}),restore:(p,u)=>ne.post(`/backups/${p}/restore`,u),cancel:p=>ne.post(`/backups/${p}/cancel`),getStats:()=>ne.get("/backups-stats")},De={getAll:p=>ne.get("/media",{params:p}),getById:p=>ne.get(`/media/${p}`),upload:p=>ne.post("/media",p,{headers:{"Content-Type":"multipart/form-data"}}),bulkUpload:p=>ne.post("/media/bulk-upload",p,{headers:{"Content-Type":"multipart/form-data"}}),update:(p,u)=>ne.put(`/media/${p}`,u),delete:p=>ne.delete(`/media/${p}`),getStats:()=>ne.get("/media-stats")},Me=D({siteName:"R-Integra",tagline:"Solidez contable, proyección empresarial",description:null,contactEmail:null,contactPhone:null,address:null,timezone:"America/Mexico_City",favicon:""});let Ao=!1;const Lo=async()=>{if(Ao)return Me.value;try{const p=await Ee.getActive("site");p.data?.data?.config_data&&(Me.value={...Me.value,...p.data.data.config_data},Me.value.favicon&&No(Me.value.favicon),Me.value.siteName&&(document.title=Me.value.siteName)),Ao=!0}catch(p){console.error("Error loading site configuration:",p)}return Me.value},No=p=>{document.querySelectorAll('link[rel="icon"], link[rel="shortcut icon"]').forEach(b=>b.remove());const c=document.createElement("link");c.rel="icon",c.href=p,c.type="image/png",document.head.appendChild(c)};function qo(){return fe(()=>{Lo()}),{siteConfig:Me,loadSiteConfig:Lo,updateFavicon:No}}const ts={id:"app"},ss=ve({__name:"App",setup(p){const{loadSiteConfig:u}=qo();return u(),(c,b)=>(l(),n("div",ts,[_(G(Ko))]))}}),qe=ao("auth",{state:()=>({user:null,token:localStorage.getItem("token")||null,loading:!1,error:null}),getters:{isAuthenticated:p=>!!p.token,isLoggedIn:p=>!!p.user&&!!p.token},actions:{async login(p){this.loading=!0,this.error=null;try{const u=await ne.post("/login",p);return this.user=u.data.user,this.token=u.data.token,localStorage.setItem("token",this.token),u.data}catch(u){throw this.error=u.response?.data?.message||"Error al iniciar sesión",u}finally{this.loading=!1}},async register(p){this.loading=!0,this.error=null;try{const u=await ne.post("/register",p);return this.user=u.data.user,this.token=u.data.token,localStorage.setItem("token",this.token),u.data}catch(u){throw this.error=u.response?.data?.message||"Error al registrarse",u}finally{this.loading=!1}},async logout(){try{this.token&&await ne.post("/logout")}catch(p){console.error("Error logging out:",p)}finally{this.user=null,this.token=null,this.error=null,localStorage.removeItem("token")}},async fetchUser(){if(this.token)try{const p=await ne.get("/user");this.user=p.data,console.log("User loaded with role:",this.user)}catch(p){console.error("Error fetching user:",p),p.response?.status===401&&this.logout()}},async refreshToken(){if(this.token)try{const p=await ne.post("/refresh");return this.user=p.data.user,this.token=p.data.token,localStorage.setItem("token",this.token),p.data}catch(p){throw console.error("Error refreshing token:",p),this.logout(),p}},initializeAuth(){this.token&&(Te.defaults.headers.common.Authorization=`Bearer ${this.token}`,this.fetchUser())},clearError(){this.error=null}}}),re=(p,u)=>{const c=p.__vccOpts||p;for(const[b,i]of u)c[b]=i;return c},ls={class:"navbar"},as={class:"nav-container"},ns={class:"nav-brand"},is=["src"],rs={key:0,class:"dropdown-arrow"},ds={key:0,class:"dropdown-menu"},us={__name:"Header",setup(p){const u=D(!1),c=D(!1),b=D(""),i=D([]),w=D({logoUrl:"",backgroundNormal:"transparent",backgroundSticky:"#0a5a39",textColor:"#ffffff",textHoverColor:"#ffffff"}),s=()=>{u.value=!u.value},r=()=>{u.value=!1},$=()=>{c.value=window.scrollY>0},m=async()=>{try{console.log("🌐 Header: Cargando configuración desde API...");const o=await Ee.getActive("header");if(o.data&&o.data.data&&o.data.data.config_data){const t=o.data.data.config_data;console.log("✅ Header: Configuración cargada desde API:",t),w.value={...w.value,...t},b.value=t.logoUrl||""}else console.log("⚠️ Header: No hay configuración activa, usando valores por defecto")}catch(o){console.error("❌ Header: Error al cargar desde API, usando localStorage como fallback:",o);const t=localStorage.getItem("headerConfig");if(t)try{const a=JSON.parse(t);w.value={...w.value,...a},b.value=a.logoUrl||"",console.log("💾 Header: Configuración cargada desde localStorage como fallback")}catch(a){console.error("Error parsing localStorage config:",a)}}},M=J(()=>c.value?{backgroundColor:w.value.backgroundSticky,color:w.value.textColor}:{backgroundColor:w.value.backgroundNormal,color:w.value.textColor}),C=o=>{const t={color:w.value.textColor};return o.featured?{...t,background:"linear-gradient(135deg, #c0894f, #ffffaa, #fdfab2, #cb9452)",color:"#0C6444",fontWeight:"bold"}:t},S=J(()=>({color:w.value.textColor})),U=o=>{o.key==="headerConfig"&&m()},T=o=>{const t=o.detail;w.value={...w.value,...t},b.value=t.logoUrl||""},V=async()=>{try{const o=await we.getNavigation();i.value=o.data}catch(o){console.error("Error loading navigation pages:",o)}};return fe(async()=>{window.addEventListener("scroll",$),window.addEventListener("storage",U),window.addEventListener("headerConfigChanged",T),await m(),V()}),Re(()=>{window.removeEventListener("scroll",$),window.removeEventListener("storage",U),window.removeEventListener("headerConfigChanged",T)}),(o,t)=>{const a=Ie("router-link");return l(),n("header",{class:O(["header",{sticky:c.value}]),style:de(M.value)},[e("nav",ls,[e("div",as,[e("div",ns,[_(a,{to:"/",class:"brand-link"},{default:Be(()=>[b.value?(l(),n("img",{key:0,src:b.value,alt:"Logo",class:"logo-image"},null,8,is)):(l(),n("h1",{key:1,class:"logo-text",style:de(S.value)},"RIntegra",4))]),_:1})]),e("div",{class:O(["nav-menu",{active:u.value}])},[(l(!0),n(te,null,le(i.value,L=>(l(),n("div",{key:L.id,class:O(["nav-item-wrapper",{"has-dropdown":L.published_children&&L.published_children.length>0}])},[_(a,{to:`/${L.slug}`,class:O(["nav-link",{"featured-link":L.featured,"has-children":L.published_children&&L.published_children.length>0}]),onClick:r,style:de(C(L))},{default:Be(()=>[B(f(L.title)+" ",1),L.published_children&&L.published_children.length>0?(l(),n("span",rs,"▼")):R("",!0)]),_:2},1032,["to","class","style"]),L.published_children&&L.published_children.length>0?(l(),n("div",ds,[(l(!0),n(te,null,le(L.published_children,E=>(l(),he(a,{key:`child-${E.id}`,to:`/${E.slug}`,class:O(["nav-link dropdown-link",{"featured-link":E.featured}]),onClick:r,style:de(C(E))},{default:Be(()=>[B(f(E.title),1)]),_:2},1032,["to","class","style"]))),128))])):R("",!0)],2))),128)),_(a,{to:"/admin",class:"nav-link admin-link",onClick:r},{default:Be(()=>t[0]||(t[0]=[B("Admin",-1)])),_:1,__:[0]})],2),e("div",{class:"nav-toggle",onClick:s},t[1]||(t[1]=[e("span",null,null,-1),e("span",null,null,-1),e("span",null,null,-1)]))])])],6)}}},cs=re(us,[["__scopeId","data-v-a3a5f4aa"]]),ps={class:"footer-container"},vs={class:"cta-section"},ms={class:"cta-content"},gs={class:"cta-text"},fs=["innerHTML"],bs=["innerHTML"],ys={class:"contact-form-wrapper"},ks={class:"form-group"},$s=["placeholder"],hs={class:"form-group"},Cs=["placeholder"],_s={class:"form-group"},ws=["placeholder"],Ss={class:"form-group"},xs=["placeholder"],Es={class:"form-group checkbox-group"},Is={class:"checkbox-label"},Us={class:"checkbox-text"},Vs=["href"],Ms=["disabled"],Ts={class:"info-section"},Ps={class:"info-content"},Bs={class:"info-column logo-column"},As={class:"footer-logo"},Ls=["src"],Ds={key:1,class:"logo-text"},Rs={class:"info-column contact-column"},Fs={class:"section-title"},zs={class:"contact-info"},Gs=["innerHTML"],Ns={class:"info-column social-column"},qs={class:"section-title"},Hs={class:"social-links"},Os=["href","aria-label"],js={__name:"Footer",setup(p){const u=D(!1),c=D({fullName:"",phone:"",email:"",message:"",acceptPolicy:!1}),b=D({backgroundColor:"#17a2b8",ctaTitle:"¿Hablamos?",ctaDescription:"Si necesitas estructurar tus finanzas o resolver dudas contables y tributarias, agenda una cita o déjanos tu mensaje.",logoUrl:"",locationTitle:"Ubicación",socialTitle:"Síguenos en",privacyPolicyUrl:"/privacy-policy",formLabels:{fullName:"Nombre completo",phone:"Teléfono",email:"Correo electrónico",message:"Mensaje",acceptPolicy:"Acepto las políticas de tratamiento de datos",privacyPolicyLink:"Políticas de Privacidad",submitButton:"Enviar"},contactInfo:[{icon:"map-marker-alt",text:"Cra 14 #18-50, Cali, Valle del Cauca"},{icon:"phone",text:"+57 320 8994424"},{icon:"envelope",text:"contacto@r-integra.com"}],socialLinks:[{name:"Instagram",icon:"instagram",url:"#"},{name:"Facebook",icon:"facebook-f",url:"#"},{name:"LinkedIn",icon:"linkedin-in",url:"#"}]}),i=J(()=>({backgroundColor:b.value.backgroundColor})),w=["envelope","phone","map-marker-alt","globe","clock","facebook-f","instagram","twitter","linkedin-in","whatsapp"],s=S=>w.includes(S),r=S=>[["facebook-f","instagram","twitter","linkedin-in","whatsapp"].includes(S)?"fab":"fas",S],$=async()=>{try{console.log("🌐 Footer: Cargando configuración desde API...");const S=await Ee.getActive("footer");if(S.data&&S.data.data&&S.data.data.config_data){const U=S.data.data.config_data;console.log("✅ Footer: Configuración cargada desde API:",U),b.value={...b.value,...U}}else console.log("⚠️ Footer: No hay configuración activa, usando valores por defecto")}catch(S){console.error("❌ Footer: Error al cargar desde API, usando localStorage como fallback:",S);const U=localStorage.getItem("footerConfig");if(U)try{const T=JSON.parse(U);b.value={...b.value,...T},console.log("💾 Footer: Configuración cargada desde localStorage como fallback")}catch(T){console.error("Error parsing localStorage config:",T)}}},m=async()=>{u.value=!0;try{const S={name:c.value.fullName,phone:c.value.phone,email:c.value.email,message:c.value.message,additional_fields:{source:"Footer Contact Form",accepts_policy:c.value.acceptPolicy}};(await Pe.submitForm("contact",S)).data&&(alert("Mensaje enviado correctamente. Te contactaremos pronto."),c.value={fullName:"",phone:"",email:"",message:"",acceptPolicy:!1})}catch(S){console.error("Error submitting contact form:",S),alert("Error al enviar el mensaje. Inténtalo nuevamente.")}finally{u.value=!1}},M=S=>{S.key==="footerConfig"&&$()},C=S=>{const U=S.detail;b.value={...b.value,...U}};return fe(async()=>{window.addEventListener("storage",M),window.addEventListener("footerConfigChanged",C),await $();const S=()=>{window.removeEventListener("storage",M),window.removeEventListener("footerConfigChanged",C)};window.addEventListener("beforeunload",S)}),(S,U)=>(l(),n("footer",{class:"footer",style:de(i.value)},[e("div",ps,[e("div",vs,[e("div",ms,[e("div",gs,[e("h1",{class:"cta-title",innerHTML:b.value.ctaTitle},null,8,fs),e("p",{class:"cta-description",innerHTML:b.value.ctaDescription},null,8,bs)]),e("div",ys,[e("form",{onSubmit:ce(m,["prevent"]),class:"contact-form"},[e("div",ks,[g(e("input",{type:"text",id:"fullName","onUpdate:modelValue":U[0]||(U[0]=T=>c.value.fullName=T),required:"",class:"form-input",placeholder:b.value.formLabels.fullName},null,8,$s),[[I,c.value.fullName]])]),e("div",hs,[g(e("input",{type:"tel",id:"phone","onUpdate:modelValue":U[1]||(U[1]=T=>c.value.phone=T),required:"",class:"form-input",placeholder:b.value.formLabels.phone},null,8,Cs),[[I,c.value.phone]])]),e("div",_s,[g(e("input",{type:"email",id:"email","onUpdate:modelValue":U[2]||(U[2]=T=>c.value.email=T),required:"",class:"form-input",placeholder:b.value.formLabels.email},null,8,ws),[[I,c.value.email]])]),e("div",Ss,[g(e("textarea",{id:"message","onUpdate:modelValue":U[3]||(U[3]=T=>c.value.message=T),required:"",class:"form-textarea",placeholder:b.value.formLabels.message,rows:"3"},null,8,xs),[[I,c.value.message]])]),e("div",Es,[e("label",Is,[g(e("input",{type:"checkbox","onUpdate:modelValue":U[4]||(U[4]=T=>c.value.acceptPolicy=T),required:"",class:"checkbox-input"},null,512),[[ke,c.value.acceptPolicy]]),e("span",Us,[B(f(b.value.formLabels.acceptPolicy)+" ",1),e("a",{href:b.value.privacyPolicyUrl,target:"_blank",class:"policy-link"},f(b.value.formLabels.privacyPolicyLink),9,Vs)])])]),e("button",{type:"submit",class:"submit-btn",disabled:u.value},f(u.value?"Enviando...":b.value.formLabels.submitButton),9,Ms)],32)])])]),e("div",Ts,[e("div",Ps,[e("div",Bs,[e("div",As,[b.value.logoUrl?(l(),n("img",{key:0,src:b.value.logoUrl,alt:"Logo",class:"logo-image"},null,8,Ls)):(l(),n("h3",Ds,"RIntegra"))])]),e("div",Rs,[e("h2",Fs,f(b.value.locationTitle),1),e("div",zs,[(l(!0),n(te,null,le(b.value.contactInfo,(T,V)=>(l(),n("div",{key:V,class:"contact-item"},[s(T.icon)?(l(),he(G(Ye),{key:0,icon:r(T.icon),class:"contact-icon"},null,8,["icon"])):(l(),n("i",{key:1,class:O([T.icon,"contact-icon"])},null,2)),e("span",{class:"contact-text",innerHTML:T.text},null,8,Gs)]))),128))])]),e("div",Ns,[e("h2",qs,f(b.value.socialTitle),1),e("div",Hs,[(l(!0),n(te,null,le(b.value.socialLinks,(T,V)=>(l(),n("a",{key:V,href:T.url,target:"_blank",class:"social-link","aria-label":T.name},[s(T.icon)?(l(),he(G(Ye),{key:0,icon:r(T.icon)},null,8,["icon"])):(l(),n("i",{key:1,class:O(T.icon)},null,2))],8,Os))),128))])])])])])],4))}},Ws=re(js,[["__scopeId","data-v-bf23d86d"]]),Ge={baseFontFamily:"'Lato', sans-serif",typography:{h1:{fontFamily:"inherit",fontSize:48,fontWeight:"700",letterSpacing:0},h2:{fontFamily:"inherit",fontSize:36,fontWeight:"600",letterSpacing:0},h3:{fontFamily:"inherit",fontSize:28,fontWeight:"600",letterSpacing:0},h4:{fontFamily:"inherit",fontSize:24,fontWeight:"600",letterSpacing:0},h5:{fontFamily:"inherit",fontSize:20,fontWeight:"600",letterSpacing:0},h6:{fontFamily:"inherit",fontSize:18,fontWeight:"600",letterSpacing:0},p:{fontFamily:"inherit",fontSize:16,fontWeight:"400",letterSpacing:0}},colorPalette:["#007bff","#17a2b8","#28a745","#dc3545","#ffc107","#6c757d","#343a40"],buttons:{outline:{borderColor:"#007bff",textColor:"#007bff",borderRadius:8,borderWidth:2},flat:{backgroundColor:"#007bff",textColor:"#ffffff",borderRadius:8},gradient:{color1:"#007bff",color2:"#0056b3",color3:"#004085",textColor:"#ffffff",borderRadius:8}},footer:{contactInfo:[{icon:"phone",text:"+57 320 899 4424",link:"tel:+573208994424"},{icon:"envelope",text:"contacto@r-integra.com",link:"mailto:contacto@r-integra.com"},{icon:"map-marker-alt",text:"Cra 14 #18-50, Cali, Valle del Cauca",link:"https://maps.google.com/?q=Cra+14+%2318-50,+Cali,+Valle+del+Cauca"}],socialNetworks:[{icon:"facebook-f",name:"Facebook",url:"https://facebook.com/rintegra"},{icon:"instagram",name:"Instagram",url:"https://instagram.com/rintegra"},{icon:"linkedin",name:"LinkedIn",url:"https://linkedin.com/company/rintegra"}]}};function Ho(){const p=D(Ge),u=$=>{const m=document.documentElement;m.style.setProperty("--base-font-family",$.baseFontFamily),Object.entries($.typography).forEach(([M,C])=>{const S=C.fontFamily==="inherit"?$.baseFontFamily:C.fontFamily,U=C.fontWeight==="inherit"?"normal":C.fontWeight;m.style.setProperty(`--font-family-${M}`,S),m.style.setProperty(`--font-size-${M}`,`${C.fontSize}px`),m.style.setProperty(`--font-weight-${M}`,U),m.style.setProperty(`--letter-spacing-${M}`,`${C.letterSpacing}px`)}),$.colorPalette.forEach((M,C)=>{m.style.setProperty(`--color-${C+1}`,M)}),m.style.setProperty("--btn-outline-border-color",$.buttons.outline.borderColor),m.style.setProperty("--btn-outline-text-color",$.buttons.outline.textColor),m.style.setProperty("--btn-outline-border-radius",`${$.buttons.outline.borderRadius}px`),m.style.setProperty("--btn-outline-border-width",`${$.buttons.outline.borderWidth}px`),m.style.setProperty("--btn-flat-bg-color",$.buttons.flat.backgroundColor),m.style.setProperty("--btn-flat-text-color",$.buttons.flat.textColor),m.style.setProperty("--btn-flat-border-radius",`${$.buttons.flat.borderRadius}px`),m.style.setProperty("--btn-gradient-color-1",$.buttons.gradient.color1),m.style.setProperty("--btn-gradient-color-2",$.buttons.gradient.color2),m.style.setProperty("--btn-gradient-color-3",$.buttons.gradient.color3),m.style.setProperty("--btn-gradient-text-color",$.buttons.gradient.textColor),m.style.setProperty("--btn-gradient-border-radius",`${$.buttons.gradient.borderRadius}px`)},c=async()=>{try{const $=await Ee.getActive("globals");if($.data.data&&$.data.data.config_data){const m=$.data.data.config_data;p.value={...Ge,...m},u(p.value)}else u(Ge)}catch($){console.error("Error loading globals config from database:",$);const m=localStorage.getItem("globalsConfig");if(m)try{const M=JSON.parse(m);p.value={...Ge,...M},u(p.value)}catch(M){console.error("Error parsing localStorage config:",M),u(Ge)}else u(Ge)}},b=$=>{p.value=$,u($)},i=async($,m)=>{try{return await Ee.save("globals",$,m),p.value=$,u($),localStorage.setItem("globalsConfig",JSON.stringify($)),!0}catch(M){return console.error("Error saving globals config:",M),!1}},w=$=>{const m=$.detail;b(m)};return{globalsConfig:p,loadGlobalsConfig:c,updateGlobalsConfig:b,saveGlobalsConfig:i,applyGlobalsToCSS:u,init:()=>{c(),window.addEventListener("globalsConfigChanged",w)},destroy:()=>{window.removeEventListener("globalsConfigChanged",w)}}}const Zs={class:"app-layout"},Xs={class:"main-content"},Ks={__name:"MainLayout",setup(p){const{init:u,destroy:c}=Ho();return fe(()=>{u()}),Re(()=>{c()}),(b,i)=>{const w=Ie("router-view");return l(),n("div",Zs,[_(cs),e("main",Xs,[_(w)]),_(Ws)])}}},Js=re(Ks,[["__scopeId","data-v-5ff34575"]]),Qs={class:"text-block-container"},Ys={class:"columns-container"},el=["innerHTML"],Do=ve({__name:"TextBlock",props:{block:{},isEditing:{type:Boolean}},setup(p){const u=p,c=J(()=>u.block.id),b=J(()=>{const i=u.block.columns?.length||1;return Math.max(1,Math.min(4,i))});return(i,w)=>(l(),n("div",{class:O(["text-block",[`text-block-${c.value}`,`padding-${i.block.padding}`,`gap-${i.block.gap}`,`columns-${b.value}`]]),style:de({backgroundColor:i.block.backgroundColor||"transparent"})},[e("div",Qs,[e("div",Ys,[(l(!0),n(te,null,le(i.block.columns,s=>(l(),n("div",{key:s.id,class:"text-column",style:de({backgroundColor:s.backgroundColor||"transparent",color:s.textColor||"inherit"})},[(l(!0),n(te,null,le(s.texts,r=>(l(),n("div",{key:r.id,class:"text-item",innerHTML:r.content},null,8,el))),128))],4))),128))])])],6))}}),ol={key:0,class:"spacer-indicator"},tl={class:"spacer-height"},sl=ve({__name:"SpacerBlock",props:{block:{},isEditing:{type:Boolean}},setup(p){const u=p,c=J(()=>({height:`${u.block.height}px`,backgroundColor:u.block.backgroundColor||"transparent"}));return(b,i)=>(l(),n("div",{class:"spacer-block",style:de(c.value)},[b.isEditing?(l(),n("div",ol,[e("span",tl,f(b.block.height)+"px",1)])):R("",!0)],4))}}),ll=re(sl,[["__scopeId","data-v-5e5a5c8c"]]),al={class:"banner-container"},nl={class:"banner-content"},il={class:"content-column"},rl={class:"image-column"},dl={class:"person-image-container"},ul=["src","alt"],cl={key:1,class:"person-placeholder"},pl=ve({__name:"BannerIntegraBlock",props:{block:{},isEditing:{type:Boolean}},setup(p){const u=p,c=J(()=>({background:`radial-gradient(circle at center, ${u.block.backgroundGradient.colorStart}, ${u.block.backgroundGradient.colorEnd})`})),b=J(()=>({backgroundImage:`url(${u.block.backgroundImage})`,opacity:u.block.backgroundImageOpacity/100})),i=()=>{u.block.buttonLink&&!u.isEditing&&(u.block.buttonLink.startsWith("http")?window.open(u.block.buttonLink,"_blank"):window.location.href=u.block.buttonLink)};return(w,s)=>(l(),n("div",{class:"banner-integra-block",style:de(c.value)},[w.block.backgroundImage?(l(),n("div",{key:0,class:"background-image",style:de(b.value)},null,4)):R("",!0),e("div",al,[e("div",nl,[e("div",il,[e("h1",{class:"banner-title",style:de({color:w.block.titleColor})},f(w.block.title),5),e("p",{class:"banner-description",style:de({color:w.block.descriptionColor})},f(w.block.description),5),w.block.buttonText?(l(),n("button",{key:0,class:"banner-button btn-gradient",onClick:i},f(w.block.buttonText),1)):R("",!0)]),e("div",rl,[e("div",dl,[w.block.personImage?(l(),n("img",{key:0,src:w.block.personImage,alt:w.block.title,class:"person-image"},null,8,ul)):(l(),n("div",cl,s[0]||(s[0]=[e("i",{class:"fas fa-user"},null,-1),e("span",null,"Imagen de persona",-1)])))])])])])],4))}}),vl=re(pl,[["__scopeId","data-v-f5905f2c"]]),ml={class:"cualidades-container"},gl={class:"cualidades-header"},fl={class:"cualidad-image"},bl=["src","alt"],yl={key:1,class:"cualidad-placeholder"},kl={key:0,class:"cualidad-item cualidad-placeholder-item"},$l=ve({__name:"CualidadesBlock",props:{block:{},isEditing:{type:Boolean}},setup(p){const u=p,c=J(()=>({background:`radial-gradient(circle at center, ${u.block.backgroundGradient.colorStart}, ${u.block.backgroundGradient.colorEnd})`})),b=J(()=>{const i=u.block.items.length;return i===0&&u.isEditing?{gridTemplateColumns:"1fr"}:{gridTemplateColumns:`repeat(${Math.min(4,i||1)}, 1fr)`}});return(i,w)=>(l(),n("div",{class:"cualidades-block",style:de(c.value)},[e("div",ml,[e("div",gl,[e("h1",{class:"cualidades-title",style:de({color:i.block.titleColor||"#ffffff"})},f(i.block.title),5)]),e("div",{class:"cualidades-grid",style:de(b.value)},[(l(!0),n(te,null,le(i.block.items,(s,r)=>(l(),n("div",{key:r,class:"cualidad-item"},[e("div",fl,[s.image?(l(),n("img",{key:0,src:s.image,alt:s.text,class:"cualidad-img"},null,8,bl)):(l(),n("div",yl,w[0]||(w[0]=[e("i",{class:"fas fa-star"},null,-1)])))]),e("h3",{class:"cualidad-text",style:de({color:s.textColor||i.block.itemsTextColor||"#ffffff"})},f(s.text),5)]))),128)),i.isEditing&&i.block.items.length===0?(l(),n("div",kl,w[1]||(w[1]=[e("div",{class:"cualidad-image"},[e("div",{class:"cualidad-placeholder"},[e("i",{class:"fas fa-plus"})])],-1),e("h3",{class:"cualidad-text"},"Agregar cualidad",-1)]))):R("",!0)],4)])],4))}}),hl=re($l,[["__scopeId","data-v-d0caeb51"]]),Cl={class:"container"},_l={class:"textoy-video-content"},wl={class:"text-column"},Sl=["innerHTML"],xl=["innerHTML"],El={class:"video-column"},Il={class:"video-container"},Ul=["src"],Vl=["src"],Ml={key:2,class:"video-placeholder"},Tl=ve({__name:"TextoyVideoBlock",props:{block:{},isEditing:{type:Boolean,default:!1}},setup(p){const u=p,c=J(()=>({backgroundColor:u.block.backgroundColor})),b=J(()=>({color:u.block.titleColor,fontSize:"var(--font-size-h1, 3rem)",fontWeight:"var(--font-weight-h1, 700)",fontFamily:'var(--font-family-h1, var(--base-font-family, "Lato", sans-serif))',letterSpacing:"var(--letter-spacing-h1, 0px)"})),i=J(()=>({color:u.block.descriptionColor,fontSize:"var(--font-size-p, 1.1rem)",fontFamily:'var(--font-family-p, var(--base-font-family, "Lato", sans-serif))',fontWeight:"var(--font-weight-p, 400)",letterSpacing:"var(--letter-spacing-p, 0px)"})),w=J(()=>({backgroundColor:u.block.buttonColor,color:u.block.buttonTextColor,borderRadius:"var(--btn-flat-border-radius, 8px)",fontSize:"var(--font-size-p, 1rem)",fontFamily:'var(--font-family-p, var(--base-font-family, "Lato", sans-serif))',fontWeight:"var(--font-weight-p, 600)",letterSpacing:"var(--letter-spacing-p, 0px)"})),s=J(()=>{if(u.block.videoType!=="youtube"||!u.block.videoUrl)return null;let $="";const m=u.block.videoUrl;return m.includes("youtube.com/watch?v=")?$=m.split("watch?v=")[1].split("&")[0]:m.includes("youtu.be/")?$=m.split("youtu.be/")[1].split("?")[0]:m.includes("youtube.com/embed/")?$=m.split("embed/")[1].split("?")[0]:$=m,$?`https://www.youtube.com/embed/${$}`:null}),r=()=>{u.isEditing||u.block.buttonLink&&(u.block.buttonLink.startsWith("http")?window.open(u.block.buttonLink,"_blank"):window.location.href=u.block.buttonLink)};return($,m)=>(l(),n("section",{class:"textoy-video-block",style:de(c.value)},[e("div",Cl,[e("div",_l,[e("div",wl,[e("h1",{class:"title",style:de(b.value),innerHTML:$.block.title},null,12,Sl),e("p",{class:"description",style:de(i.value),innerHTML:$.block.description},null,12,xl),e("button",{class:"cta-button",style:de(w.value),onClick:r,type:"button"},f($.block.buttonText),5)]),e("div",El,[e("div",Il,[$.block.videoType==="youtube"&&s.value?(l(),n("iframe",{key:0,src:s.value,class:"video-iframe",frameborder:"0",allowfullscreen:""},null,8,Ul)):$.block.videoType==="media"&&$.block.videoUrl?(l(),n("video",{key:1,src:$.block.videoUrl,class:"video-element",controls:"",preload:"metadata"}," Tu navegador no soporta el elemento de video. ",8,Vl)):(l(),n("div",Ml,m[0]||(m[0]=[e("i",{class:"fas fa-video"},null,-1),e("span",null,"Video no disponible",-1)])))])])])])],4))}}),Pl=re(Tl,[["__scopeId","data-v-5ec4b3e1"]]),Bl={class:"container-content"},Al={key:0,class:"container-children"},Ll={key:1,class:"container-empty"},Dl={class:"empty-state"},Rl={key:0,class:"empty-help"},Fl=ve({__name:"ContainerBlock",props:{block:{},isEditing:{type:Boolean}},emits:["add-block","edit-child","duplicate-child","delete-child"],setup(p,{emit:u}){const c=p,b=u,i=m=>{console.log("ContainerBlock - handleAddNestedBlock:",m),b("add-block",m)},w=m=>{console.log("ContainerBlock - handleEditChild:",m),b("edit-child",m)},s=m=>{console.log("ContainerBlock - handleDuplicateChild:",m),b("duplicate-child",m)},r=m=>{console.log("ContainerBlock - handleDeleteChild:",m),b("delete-child",m)},$=J(()=>{const m={};switch(c.block.backgroundType){case"color":c.block.backgroundColor&&(m.backgroundColor=c.block.backgroundColor);break;case"gradient":if(c.block.backgroundGradient){const{colorStart:M,colorEnd:C,direction:S}=c.block.backgroundGradient;m.background=`linear-gradient(${S}, ${M}, ${C})`}break;case"image":c.block.backgroundImage&&(m.backgroundImage=`url(${c.block.backgroundImage})`,m.backgroundSize="cover",m.backgroundPosition="center",m.backgroundRepeat="no-repeat");break}return m});return(m,M)=>(l(),n("div",{class:O(["container-block",[`padding-${m.block.padding}`,{"is-editing":m.isEditing}]]),style:de($.value)},[m.block.backgroundType==="image"&&m.block.backgroundImage&&m.block.backgroundImageOpacity!==void 0&&m.block.backgroundImageOpacity<100?(l(),n("div",{key:0,class:"background-overlay",style:de({backgroundColor:`rgba(0,0,0,${(100-(m.block.backgroundImageOpacity||0))/100})`})},null,4)):R("",!0),e("div",Bl,[m.block.children&&m.block.children.length>0?(l(),n("div",Al,[(l(!0),n(te,null,le(m.block.children,C=>(l(),he(oo,{key:C.id,block:C,"is-editing":m.isEditing,"is-nested":!0,onAddBlock:i,onEditChild:w,onDuplicateChild:s,onDeleteChild:r},null,8,["block","is-editing"]))),128))])):(l(),n("div",Ll,[e("div",Dl,[M[1]||(M[1]=e("i",{class:"fas fa-cube"},null,-1)),M[2]||(M[2]=e("h4",null,"Contenedor Vacío",-1)),M[3]||(M[3]=e("p",null,"Este contenedor no tiene bloques aún",-1)),m.isEditing?(l(),n("p",Rl,M[0]||(M[0]=[e("i",{class:"fas fa-info-circle"},null,-1),B(' Usa el botón "+" en el header para agregar bloques ',-1)]))):R("",!0)])]))])],6))}}),zl=re(Fl,[["__scopeId","data-v-63e51416"]]);function _e(p){return p?p.startsWith("http://")||p.startsWith("https://")?p:p.includes("/storage/")?`https://r-integra.com/api/storage/app/public/${p.split("/storage/")[1]}`:`https://r-integra.com/api${p.startsWith("/")?p:`/${p}`}`:""}function Gl(p){return p?p.alt_text||p.name||p.file_name||"Archivo sin nombre":""}const Nl={class:"gallery-container"},ql=["src","alt"],Hl={key:0,class:"image-caption"},Ol={key:0,class:"gallery-empty"},jl={class:"empty-state"},Wl={key:0,class:"empty-help"},Zl=ve({__name:"ImageGalleryBlock",props:{block:{},isEditing:{type:Boolean}},setup(p){const u=p,c=()=>{const i={};switch(u.block.maskType){case"circle":i.clipPath="circle(50%)";break;case"rounded":i.borderRadius=`${u.block.borderRadius||12}px`;break;case"custom":u.block.customMask&&(i.clipPath=`path('${u.block.customMask}')`);break}return i},b=i=>{const w=i.target;w.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNiIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9IjAuM2VtIj5JbWFnZW4gbm8gZGlzcG9uaWJsZTwvdGV4dD48L3N2Zz4="};return(i,w)=>(l(),n("div",{class:O(["image-gallery-block",[`columns-${i.block.columnsCount}`,`gap-${i.block.gap}`,`padding-${i.block.padding}`,`align-${i.block.alignment}`,`hover-${i.block.hoverEffect}`]]),style:de({backgroundColor:i.block.backgroundColor||"transparent"})},[e("div",Nl,[e("div",{class:O(["gallery-grid",`columns-${i.block.columnsCount}`])},[(l(!0),n(te,null,le(i.block.items,s=>(l(),n("div",{key:s.id,class:O(["gallery-item",[`aspect-${i.block.aspectRatio}`,`mask-${i.block.maskType}`]]),style:de(c())},[(l(),he(Ne(s.link?"a":"div"),{href:s.link||void 0,target:s.linkTarget||"_self",class:"image-wrapper"},{default:Be(()=>[e("img",{src:G(_e)(s.src),alt:s.alt,class:"gallery-image",loading:"lazy",onError:b},null,40,ql),s.caption?(l(),n("div",Hl,f(s.caption),1)):R("",!0)]),_:2},1032,["href","target"]))],6))),128))],2),i.block.items.length===0?(l(),n("div",Ol,[e("div",jl,[w[1]||(w[1]=e("i",{class:"fas fa-images"},null,-1)),w[2]||(w[2]=e("h4",null,"Galería Vacía",-1)),w[3]||(w[3]=e("p",null,"Esta galería no tiene imágenes aún",-1)),i.isEditing?(l(),n("p",Wl,w[0]||(w[0]=[e("i",{class:"fas fa-info-circle"},null,-1),B(" Usa el editor para agregar imágenes ",-1)]))):R("",!0)])])):R("",!0)])],6))}}),Xl=re(Zl,[["__scopeId","data-v-fa75c818"]]),N=ve({__name:"Icon",props:{name:{}},setup(p){const u=p,c={home:It,menu:Ke,close:Po,"x-mark":Po,"arrow-right":Et,"document-text":so,document:xt,photo:St,video:wt,plus:_t,pencil:ze,edit:ze,trash:to,delete:to,eye:Ct,"eye-slash":ht,check:To,save:To,"chevron-up":$t,"chevron-down":kt,"chevron-left":bo,"chevron-right":go,"arrow-path":Mo,refresh:Mo,"arrow-uturn-left":Vo,undo:Vo,"arrow-right-on-rectangle":Uo,logout:Uo,cube:fo,swatch:Io,palette:Io,cog:Eo,settings:Eo,search:xo,"magnifying-glass":xo,"cloud-arrow-up":So,upload:So,"cloud-arrow-down":wo,download:wo,link:mo,"document-duplicate":_o,copy:_o,server:yt,calendar:bt,"rectangle-stack":Co,header:Co,"bars-3-bottom-left":ho,footer:ho,globe:ft,phone:gt,envelope:$o,email:$o,clock:mt,"map-pin":ko,location:ko,"chat-bubble":yo,comment:yo,heart:vt,star:pt,"thumbs-up":ct,"thumbs-down":ut,user:dt,users:rt,bell:it,lock:nt,unlock:at,camera:lt,"shopping-cart":st,"credit-card":tt,play:ot,pause:et,stop:Yo,"volume-up":Qo,"volume-down":Jo,bold:ze,italic:ze,underline:ze,strikethrough:ze,"align-left":bo,"align-center":fo,"align-right":go,"align-justify":Ke,"list-ul":Ke,"list-ol":Ke,"quote-left":so,code:so,unlink:mo,eraser:to},b=J(()=>{const i=c[u.name];return i||(console.warn(`Icon "${u.name}" not found`),c.cube)});return(i,w)=>(l(),he(Ne(b.value),{class:"icon-global"}))}}),Kl={class:"team-container"},Jl={class:"member-card"},Ql={class:"member-photo-container"},Yl=["src","alt","onLoad"],ea={key:1,class:"member-photo-placeholder"},oa={class:"member-overlay"},ta={class:"member-name"},sa={class:"member-position"},la={key:0,class:"member-socials"},aa=["href","title"],na={key:0,class:"social-symbol"},ia={key:1,class:"social-symbol"},ra={key:2,class:"social-symbol"},da={key:3,class:"social-symbol"},ua={key:4,class:"social-symbol"},ca={key:0,class:"member-description"},pa={class:"description-content"},va={key:0,class:"team-empty"},ma={class:"empty-state"},ga={key:0,class:"empty-help"},fa=ve({__name:"TeamBlock",props:{block:{},isEditing:{type:Boolean}},setup(p){const u=p,c=()=>{const r={};switch(u.block.maskType){case"circle":r.clipPath="circle(50%)";break;case"rounded":r.borderRadius=`${u.block.borderRadius||12}px`;break;case"custom":u.block.customMask&&(r.clipPath=`path('${u.block.customMask}')`);break}return r},b=r=>r.platform==="email"?r.url.startsWith("mailto:")?r.url:`mailto:${r.url}`:r.url,i=r=>({facebook:"Facebook",twitter:"Twitter",instagram:"Instagram",linkedin:"LinkedIn",github:"GitHub",email:"Email",website:"Sitio Web"})[r]||r,w=r=>({facebook:"globe",twitter:"globe",instagram:"globe",linkedin:"globe",github:"globe",email:"envelope",website:"link"})[r]||"link",s=r=>{const $=r.target;console.error("TeamBlock - Image error:",$.src),$.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI0NSUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNiIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9IjAuM2VtIj5Gb3RvIG5vPC90ZXh0Pjx0ZXh0IHg9IjUwJSIgeT0iNTUlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTYiIGZpbGw9IiM5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIwLjNlbSI+ZGlzcG9uaWJsZTwvdGV4dD48L3N2Zz4="};return(r,$)=>(l(),n("div",{class:O(["team-block",[`columns-${r.block.columnsCount}`,`gap-${r.block.gap}`,`padding-${r.block.padding}`,`align-${r.block.alignment}`,`hover-${r.block.hoverEffect}`]]),style:de({backgroundColor:r.block.backgroundColor||"transparent"})},[e("div",Kl,[e("div",{class:O(["team-grid",`columns-${r.block.columnsCount}`])},[(l(!0),n(te,null,le(r.block.members,m=>(l(),n("div",{key:m.id,class:O(["team-member",[`aspect-${r.block.aspectRatio}`,`mask-${r.block.maskType}`]]),style:de(c())},[e("div",Jl,[e("div",Ql,[m.photo?(l(),n("img",{key:0,src:G(_e)(m.photo),alt:m.name,class:"member-photo",loading:"lazy",onError:s,onLoad:()=>console.log("TeamBlock - Image loaded:",m.name,m.photo,G(_e)(m.photo))},null,40,Yl)):(l(),n("div",ea,[_(N,{name:"photo"}),$[1]||($[1]=e("span",null,"Sin foto",-1))])),e("div",oa,[e("h3",ta,f(m.name),1),e("p",sa,f(m.position),1),m.socials.length>0?(l(),n("div",la,[(l(!0),n(te,null,le(m.socials,M=>(l(),n("a",{key:M.platform,href:b(M),title:`${m.name} en ${i(M.platform)}`,class:O(["social-link",`social-${M.platform}`]),target:"_blank",rel:"noopener noreferrer",onClick:$[0]||($[0]=ce(()=>{},["stop"]))},[M.platform==="facebook"?(l(),n("span",na,"f")):M.platform==="twitter"?(l(),n("span",ia,"𝕏")):M.platform==="instagram"?(l(),n("span",ra,"📷")):M.platform==="linkedin"?(l(),n("span",da,"in")):M.platform==="github"?(l(),n("span",ua,"🐙")):(l(),he(N,{key:5,name:w(M.platform)},null,8,["name"]))],10,aa))),128))])):R("",!0)])]),m.description&&m.description.trim()?(l(),n("div",ca,[e("div",pa,[e("p",null,f(m.description),1)])])):R("",!0)])],6))),128))],2),r.block.members.length===0?(l(),n("div",va,[e("div",ma,[$[3]||($[3]=e("i",{class:"fas fa-users"},null,-1)),$[4]||($[4]=e("h4",null,"Equipo Vacío",-1)),$[5]||($[5]=e("p",null,"Este equipo no tiene miembros aún",-1)),r.isEditing?(l(),n("p",ga,$[2]||($[2]=[e("i",{class:"fas fa-info-circle"},null,-1),B(" Usa el editor para agregar miembros del equipo ",-1)]))):R("",!0)])])):R("",!0)])],6))}}),ba=re(fa,[["__scopeId","data-v-8521b1c9"]]),ya=["id"],ka={key:0,class:"services-header"},$a={key:0,class:"services-title"},ha={key:1,class:"services-subtitle"},Ca={key:1,class:"services-container"},_a={key:0,class:"services-tabs"},wa={class:"tabs-nav"},Sa=["onClick"],xa={key:0,class:"tab-icon"},Ea=["src","alt"],Ia={class:"tab-content"},Ua={class:"tab-title"},Va={class:"tab-description"},Ma={class:"tabs-content"},Ta={class:"service-full-content"},Pa={class:"service-header"},Ba={key:0,class:"service-icon"},Aa=["src","alt"],La={class:"service-title"},Da=["innerHTML"],Ra=["onClick"],Fa={class:"accordion-header-content"},za={key:0,class:"accordion-icon"},Ga=["src","alt"],Na={class:"accordion-text"},qa={class:"accordion-title"},Ha={class:"accordion-description"},Oa={class:"accordion-toggle"},ja={class:"service-full-content"},Wa=["innerHTML"],Za={class:"card-header"},Xa={key:0,class:"card-icon"},Ka=["src","alt"],Ja={class:"card-title"},Qa={class:"card-description-short"},Ya=["innerHTML"],en={key:2,class:"services-empty"},on={class:"empty-state"},tn=ve({__name:"ServicesBlock",props:{block:{}},setup(p){const u=p,c=D(0),b=D(new Set),i=D({}),w=D({}),s=async o=>{b.value.has(o)?b.value.delete(o):b.value.add(o),await Bo(),m(o)},r=o=>b.value.has(o),$=(o,t)=>{o&&(w.value[t]=o)},m=o=>{const t=w.value[o];t&&(i.value[o]=t.scrollHeight)},M=J(()=>{const o={};return u.block.backgroundColor&&(o.backgroundColor=u.block.backgroundColor),o}),C=J(()=>{const o={};return u.block.displayMode==="cards"&&(o.gridTemplateColumns=`repeat(${u.block.columnsCount||3}, 1fr)`),o}),S=J(()=>{const o={};if(u.block.displayMode==="accordion"){const t=u.block.columnsCount||1;o["--accordion-columns"]=t.toString(),t===1?o.gridTemplateColumns="1fr":o.gridTemplateColumns=`repeat(${t}, 1fr)`}return o});fe(async()=>{u.block.displayMode==="accordion"&&(await Bo(),u.block.services.forEach((o,t)=>{m(t)})),T()});let U=null;const T=()=>{if(U&&(U.remove(),U=null),u.block.customCSS&&u.block.customCSS.trim()){U=document.createElement("style"),U.type="text/css",U.setAttribute("data-block-id",u.block.id),U.setAttribute("data-custom-css","true");const o=`[data-block-id="${u.block.id}"]`;let t=u.block.customCSS;const a=[],L=/([^{}]+)\s*\{([^{}]*)\}/g;let E;for(;(E=L.exec(t))!==null;){let v=E[1].trim();const z=E[2].trim();v&&z&&(v=v.replace(/\/\*.*?\*\//g,"").trim(),v&&(v.includes(`[data-block-id="${u.block.id}"]`)?a.push(`${v} { ${z} !important }`):(a.push(`${o} ${v} { ${z} !important }`),v.match(/^\.[a-zA-Z][\w-]*$/)&&a.push(`${o}${v} { ${z} !important }`),v.match(/^#[a-zA-Z][\w-]*$/)&&a.push(`${o}${v} { ${z} !important }`),a.push(`.services-block ${o} ${v} { ${z} !important }`),a.push(`body ${o} ${v} { ${z} !important }`))))}const d=a.join(`
`);U.textContent=d,document.head.appendChild(U),console.log("🎨 CSS applied for services block:",u.block.id)}},V=()=>{U&&(U.remove(),U=null)};return Re(()=>{V()}),xe(()=>u.block.customCSS,()=>{T()}),(o,t)=>(l(),n("div",{class:O(["services-block",`display-mode-${o.block.displayMode}`,`icon-size-${o.block.iconSize}`,`align-${o.block.alignment}`,`gap-${o.block.gap}`,`padding-${o.block.padding}`,o.block.customClass]),id:o.block.customId,style:de(M.value)},[o.block.title||o.block.subtitle?(l(),n("div",ka,[o.block.title?(l(),n("h1",$a,f(o.block.title),1)):R("",!0),o.block.subtitle?(l(),n("p",ha,f(o.block.subtitle),1)):R("",!0)])):R("",!0),o.block.services&&o.block.services.length>0?(l(),n("div",Ca,[o.block.displayMode==="tabs"?(l(),n("div",_a,[e("div",wa,[(l(!0),n(te,null,le(o.block.services,(a,L)=>(l(),n("button",{key:a.id,onClick:E=>c.value=L,class:O(["tab-button",{active:c.value===L}])},[a.icon?(l(),n("div",xa,[e("img",{src:G(_e)(a.icon),alt:a.title},null,8,Ea)])):R("",!0),e("div",Ia,[e("span",Ua,f(a.title),1),e("span",Va,f(a.shortDescription),1)])],10,Sa))),128))]),e("div",Ma,[(l(!0),n(te,null,le(o.block.services,(a,L)=>g((l(),n("div",{key:a.id,class:"tab-pane"},[e("div",Ta,[e("div",Pa,[a.icon?(l(),n("div",Ba,[e("img",{src:G(_e)(a.icon),alt:a.title},null,8,Aa)])):R("",!0),e("h3",La,f(a.title),1)]),e("div",{class:"service-description",innerHTML:a.longDescription},null,8,Da)])])),[[ge,c.value===L]])),128))])])):o.block.displayMode==="accordion"?(l(),n("div",{key:1,class:O(["services-accordion",`accordion-cols-${o.block.columnsCount||1}`]),style:de(S.value)},[(l(!0),n(te,null,le(o.block.services,(a,L)=>(l(),n("div",{key:a.id,class:"accordion-item"},[e("button",{onClick:E=>s(L),class:O(["accordion-header",{active:r(L)}])},[e("div",Fa,[a.icon?(l(),n("div",za,[e("img",{src:G(_e)(a.icon),alt:a.title},null,8,Ga)])):R("",!0),e("div",Na,[e("span",qa,f(a.title),1),e("span",Ha,f(a.shortDescription),1)])]),e("div",Oa,[_(N,{name:r(L)?"chevron-up":"chevron-down"},null,8,["name"])])],10,Ra),e("div",{class:O(["accordion-content",{open:r(L)}]),style:de({maxHeight:r(L)?i.value[L]+"px":"0px"})},[e("div",{class:"accordion-body",ref_for:!0,ref:E=>$(E,L)},[e("div",ja,[e("div",{class:"service-description",innerHTML:a.longDescription},null,8,Wa)])],512)],6)]))),128))],6)):o.block.displayMode==="cards"?(l(),n("div",{key:2,class:"services-cards",style:de(C.value)},[(l(!0),n(te,null,le(o.block.services,a=>(l(),n("div",{key:a.id,class:"service-card"},[e("div",Za,[a.icon?(l(),n("div",Xa,[e("img",{src:G(_e)(a.icon),alt:a.title},null,8,Ka)])):R("",!0),e("h3",Ja,f(a.title),1)]),e("div",Qa,f(a.shortDescription),1),e("div",{class:"card-description-long",innerHTML:a.longDescription},null,8,Ya)]))),128))],4)):R("",!0)])):(l(),n("div",en,[e("div",on,[_(N,{name:"briefcase"}),t[0]||(t[0]=e("p",null,"No hay servicios configurados para mostrar",-1))])]))],14,ya))}}),sn=re(tn,[["__scopeId","data-v-9822e397"]]),ln={key:0,class:"map-title"},an=["src"],nn=ve({__name:"MapBlock",props:{block:{},isEditing:{type:Boolean,default:!1}},setup(p){const u=p,c=J(()=>{const b=encodeURIComponent(u.block.address),i=u.block.zoom||12;return`https://www.google.com/maps?q=${b}&t=m&z=${i}&output=embed&iwloc=near`});return(b,i)=>(l(),n("div",{class:O(["map-block",[`padding-${b.block.padding}`,{"has-background":b.block.backgroundColor}]]),style:de({backgroundColor:b.block.backgroundColor||void 0})},[b.block.title?(l(),n("div",ln,[e("h3",null,f(b.block.title),1)])):R("",!0),e("div",{class:"map-container",style:de({height:`${b.block.height}px`})},[e("iframe",{src:c.value,style:de({height:`${b.block.height}px`}),class:"google-map",frameborder:"0",allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade"},null,12,an)],4)],6))}}),Oo=re(nn,[["__scopeId","data-v-9c00c3ad"]]),rn={class:"lead-header"},dn={class:"headline"},un={class:"subheadline"},cn={class:"main-content"},pn={class:"form-section",id:"form-section"},vn={key:0,class:"countdown-header"},mn={class:"countdown-label"},gn={class:"countdown-timer"},fn={class:"time-unit"},bn={class:"time-value"},yn={class:"time-unit"},kn={class:"time-value"},$n={class:"time-unit"},hn={class:"time-value"},Cn={class:"form-group"},_n=["placeholder"],wn={key:0,class:"error-message"},Sn={class:"form-group"},xn={class:"phone-input-group"},En=["placeholder"],In={key:0,class:"error-message"},Un={class:"form-group"},Vn=["placeholder"],Mn={key:0,class:"error-message"},Tn={class:"form-group"},Pn={value:""},Bn=["value"],An={key:0,class:"error-message"},Ln={class:"form-group"},Dn={value:""},Rn=["value"],Fn={key:0,class:"error-message"},zn=["disabled"],Gn={class:"content-section"},Nn={key:0,class:"value-stack"},qn={class:"value-title"},Hn={class:"value-items"},On={class:"item-text"},jn={class:"item-value"},Wn={class:"value-total"},Zn={class:"total-line"},Xn={class:"today-price"},Kn={key:0,class:"urgency-section"},Jn={class:"urgency-container"},Qn={class:"progress-section"},Yn={class:"progress-text"},ei={class:"progress-bar"},oi={class:"progress-numbers"},ti={key:1,class:"trust-section"},si=["innerHTML"],li={class:"trust-text"},ai=ve({__name:"LeadConverterBlock",props:{block:{},isEditing:{type:Boolean,default:!1}},setup(p){Ut(o=>({"23ca4301":S.value.primaryGreen,"5017f16e":S.value.white,"526a89f8":S.value.beige,"115286c5":S.value.terracotta}));const u=p,c=D({name:"",countryCode:"+57",phone:"",email:"",situation:"",urgency:""}),b=D({name:"",phone:"",email:"",situation:"",urgency:""}),i=D(!1),w=D({hours:0,minutes:0,seconds:0});let s=null;const r=J(()=>{const o={};return u.block.backgroundColor&&(o.backgroundColor=u.block.backgroundColor),o}),$=J(()=>(u.block.valueStackItems||[]).filter(o=>o.enabled)),m=J(()=>(u.block.urgencyItems||[]).filter(o=>o.enabled)),M=J(()=>(u.block.trustItems||[]).filter(o=>o.enabled)),C=J(()=>!u.block.progressBarTotal||u.block.progressBarTotal===0||!u.block.progressBarCurrent&&u.block.progressBarCurrent!==0?0:u.block.progressBarCurrent/u.block.progressBarTotal*100),S=J(()=>u.block.useCustomColors?{primaryGreen:u.block.primaryGreen||"#0C6444",primaryGold:u.block.primaryGold||"#D1AE6A",beige:u.block.beige||"#EFE3D5",terracotta:u.block.terracotta||"#B86C55",white:u.block.white||"#FFFEF9"}:{primaryGreen:"#0C6444",primaryGold:"#D1AE6A",beige:"#EFE3D5",terracotta:"#B86C55",white:"#FFFEF9"}),U=()=>{if(!u.block.showCountdown)return;const o=Date.now()+u.block.countdownHours*60*60*1e3,t=()=>{const a=Date.now(),L=Math.max(0,o-a),E=Math.floor(L/(1e3*60*60)),d=Math.floor(L%(1e3*60*60)/(1e3*60)),v=Math.floor(L%(1e3*60)/1e3);w.value={hours:E,minutes:d,seconds:v}};t(),s=setInterval(t,1e3)},T=()=>{const o={name:"",phone:"",email:"",situation:"",urgency:""};return c.value.name.trim()||(o.name="El nombre es requerido"),c.value.phone.trim()?/^[\d\s-()]+$/.test(c.value.phone)||(o.phone="Formato de teléfono inválido"):o.phone="El WhatsApp es requerido",c.value.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.value.email)||(o.email="Email inválido"):o.email="El email es requerido",c.value.situation||(o.situation="Selecciona tu situación actual"),c.value.urgency||(o.urgency="Selecciona la urgencia"),b.value=o,!Object.values(o).some(t=>t!=="")},V=async()=>{if(!(!T()||i.value)){i.value=!0;try{const o={name:c.value.name,phone:c.value.countryCode+c.value.phone,email:c.value.email,situation:c.value.situation,urgency:c.value.urgency,additional_fields:{situation:c.value.situation,urgency:c.value.urgency,country_code:c.value.countryCode,source:"Lead Converter Block"}};(await Pe.submitForm("lead_converter",o)).data&&(c.value={name:"",countryCode:"+57",phone:"",email:"",situation:"",urgency:""},alert("¡Formulario enviado exitosamente! Te contactaremos pronto."))}catch(o){console.error("Error submitting form:",o),alert("Error al enviar el formulario. Intenta nuevamente.")}finally{i.value=!1}}};return fe(()=>{u.isEditing||U()}),Re(()=>{s&&clearInterval(s)}),(o,t)=>(l(),n("div",{class:O(["lead-converter-block",[`padding-${o.block.padding}`]]),style:de(r.value)},[e("div",rn,[e("h1",dn,f(o.block.headline),1),e("p",un,f(o.block.subheadline),1)]),e("div",cn,[e("div",pn,[o.block.showCountdown?(l(),n("div",vn,[e("div",mn,f(o.block.countdownLabel),1),e("div",gn,[e("div",fn,[e("span",bn,f(w.value.hours),1),t[6]||(t[6]=e("span",{class:"time-label"},"H",-1))]),t[9]||(t[9]=e("div",{class:"time-separator"},":",-1)),e("div",yn,[e("span",kn,f(w.value.minutes),1),t[7]||(t[7]=e("span",{class:"time-label"},"M",-1))]),t[10]||(t[10]=e("div",{class:"time-separator"},":",-1)),e("div",$n,[e("span",hn,f(w.value.seconds),1),t[8]||(t[8]=e("span",{class:"time-label"},"S",-1))])])])):R("",!0),e("form",{onSubmit:ce(V,["prevent"]),class:"lead-form"},[e("div",Cn,[g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>c.value.name=a),type:"text",placeholder:o.block.nameLabel,required:"",class:O(["form-input",{error:b.value.name}])},null,10,_n),[[I,c.value.name]]),b.value.name?(l(),n("span",wn,f(b.value.name),1)):R("",!0)]),e("div",Sn,[e("div",xn,[g(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>c.value.countryCode=a),class:O(["country-code-select",{error:b.value.phone}])},t[11]||(t[11]=[Se('<option value="+57" data-v-a0174354>🇨🇴 +57</option><option value="+1" data-v-a0174354>🇺🇸 +1</option><option value="+52" data-v-a0174354>🇲🇽 +52</option><option value="+54" data-v-a0174354>🇦🇷 +54</option><option value="+56" data-v-a0174354>🇨🇱 +56</option><option value="+51" data-v-a0174354>🇵🇪 +51</option><option value="+593" data-v-a0174354>🇪🇨 +593</option><option value="+58" data-v-a0174354>🇻🇪 +58</option><option value="+507" data-v-a0174354>🇵🇦 +507</option><option value="+506" data-v-a0174354>🇨🇷 +506</option><option value="+34" data-v-a0174354>🇪🇸 +34</option>',11)]),2),[[ie,c.value.countryCode]]),g(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>c.value.phone=a),type:"tel",placeholder:o.block.phoneLabel,required:"",class:O(["form-input phone-number-input",{error:b.value.phone}])},null,10,En),[[I,c.value.phone]])]),b.value.phone?(l(),n("span",In,f(b.value.phone),1)):R("",!0)]),e("div",Un,[g(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>c.value.email=a),type:"email",placeholder:o.block.emailLabel,required:"",class:O(["form-input",{error:b.value.email}])},null,10,Vn),[[I,c.value.email]]),b.value.email?(l(),n("span",Mn,f(b.value.email),1)):R("",!0)]),e("div",Tn,[g(e("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>c.value.situation=a),required:"",class:O(["form-select",{error:b.value.situation}])},[e("option",Pn,f(o.block.situationLabel),1),(l(!0),n(te,null,le(o.block.situationOptions||[],a=>(l(),n("option",{key:a,value:a},f(a),9,Bn))),128))],2),[[ie,c.value.situation]]),b.value.situation?(l(),n("span",An,f(b.value.situation),1)):R("",!0)]),e("div",Ln,[g(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>c.value.urgency=a),required:"",class:O(["form-select",{error:b.value.urgency}])},[e("option",Dn,f(o.block.urgencyLabel),1),(l(!0),n(te,null,le(o.block.urgencyOptions||[],a=>(l(),n("option",{key:a,value:a},f(a),9,Rn))),128))],2),[[ie,c.value.urgency]]),b.value.urgency?(l(),n("span",Fn,f(b.value.urgency),1)):R("",!0)]),e("button",{type:"submit",class:"cta-button",disabled:i.value},f(i.value?"ENVIANDO...":o.block.ctaButtonText),9,zn)],32)]),e("div",Gn,[o.block.showValueStack?(l(),n("div",Nn,[e("h3",qn,f(o.block.valueStackTitle),1),e("div",Hn,[(l(!0),n(te,null,le($.value,a=>(l(),n("div",{key:a.id,class:"value-item"},[t[12]||(t[12]=e("span",{class:"checkmark"},"✅",-1)),e("span",On,f(a.text),1),e("span",jn,"(Valor: "+f(a.value)+")",1)]))),128))]),e("div",Wn,[e("div",Zn,"VALOR TOTAL: "+f(o.block.totalValue),1),e("div",Xn,"HOY: "+f(o.block.todayPrice),1)])])):R("",!0)])]),o.block.showUrgencyElements?(l(),n("div",Kn,[e("div",Jn,[(l(!0),n(te,null,le(m.value,a=>(l(),n("div",{key:a.id,class:O(["urgency-item",{animated:a.animated}])},f(a.text),3))),128)),e("div",Qn,[e("div",Yn,f(o.block.progressBarText),1),e("div",ei,[e("div",{class:"progress-fill",style:de({width:C.value+"%"})},null,4)]),e("div",oi,f(o.block.progressBarCurrent)+"/"+f(o.block.progressBarTotal)+" espacios restantes ",1)])])])):R("",!0),o.block.showTrustElements?(l(),n("div",ti,[(l(!0),n(te,null,le(M.value,a=>(l(),n("div",{key:a.id,class:"trust-card"},[e("div",{class:"trust-icon",innerHTML:a.icon},null,8,si),e("div",li,f(a.text),1)]))),128))])):R("",!0)],6))}}),jo=re(ai,[["__scopeId","data-v-a0174354"]]),ni=["id","data-block-id","data-block-type","data-custom-id","data-custom-class"],ii={key:0,class:"nested-block-controls"},ri={class:"block-actions"},di=ve({__name:"BlockRenderer",props:{block:{},isEditing:{type:Boolean},isNested:{type:Boolean,default:!1}},emits:["add-block","edit-child","duplicate-child","delete-child"],setup(p,{emit:u}){const c=p,b=u,i={text:$e(Do),spacer:$e(ll),"banner-integra":$e(vl),cualidades:$e(hl),"textoy-video":$e(Pl),container:$e(zl),"image-gallery":$e(Xl),team:$e(ba),services:$e(sn),map:$e(Oo),"lead-converter":$e(jo)},w=o=>i[o]||$e(Do),s=()=>{console.log("Edit child clicked:",c.block),b("edit-child",c.block)},r=()=>{console.log("Duplicate child clicked:",c.block),b("duplicate-child",c.block)},$=()=>{console.log("Delete child clicked:",c.block),b("delete-child",c.block)},m=()=>{console.log("Add block clicked for container:",c.block.id),b("add-block",c.block.id)},M=o=>{console.log("BlockRenderer - forwarding edit-child:",o),b("edit-child",o)},C=o=>{console.log("BlockRenderer - forwarding duplicate-child:",o),b("duplicate-child",o)},S=o=>{console.log("BlockRenderer - forwarding delete-child:",o),b("delete-child",o)};let U=null;const T=()=>{if(U&&(U.remove(),U=null),c.block.customCSS&&c.block.customCSS.trim()){U=document.createElement("style"),U.type="text/css",U.setAttribute("data-block-id",c.block.id),U.setAttribute("data-custom-css","true");const o=`[data-block-id="${c.block.id}"]`;let t=c.block.customCSS;const a=[],L=/([^{}]+)\s*\{([^{}]*)\}/g;let E;for(;(E=L.exec(t))!==null;){let v=E[1].trim();const z=E[2].trim();v&&z&&(v=v.replace(/\/\*.*?\*\//g,"").trim(),v&&(v.includes(`[data-block-id="${c.block.id}"]`)?a.push(`${v} { ${z} !important }`):(a.push(`${o} ${v} { ${z} !important }`),v.match(/^\.[a-zA-Z][\w-]*$/)&&a.push(`${o}${v} { ${z} !important }`),v.match(/^#[a-zA-Z][\w-]*$/)&&a.push(`${o}${v} { ${z} !important }`),a.push(`.container-block ${o} ${v} { ${z} !important }`),a.push(`body ${o} ${v} { ${z} !important }`),v.match(/^[a-zA-Z][a-zA-Z0-9]*$/)&&(a.push(`body .container-block ${o} ${v} { ${z} !important }`),a.push(`html body ${o} ${v} { ${z} !important }`)))))}const d=a.join(`
`);U.textContent=d,document.head.appendChild(U),console.log("🎨 CSS aplicado para bloque:",c.block.id),console.log("📝 CSS original:",t),console.log("🔧 CSS procesado:",d)}},V=()=>{U&&(U.remove(),U=null)};return fe(()=>{T()}),Re(()=>{V()}),xe(()=>c.block.customCSS,()=>{T()}),(o,t)=>{const a=Ie("Icon");return l(),n("div",{class:O(["block-renderer",[o.block.customClass||"",`block-${o.block.type}`,{"has-custom-css":!!o.block.customCSS,"is-nested":o.isNested,"nested-in-container":o.isNested}]]),id:o.block.customId||void 0,"data-block-id":o.block.id,"data-block-type":o.block.type,"data-custom-id":o.block.customId||null,"data-custom-class":o.block.customClass||null},[o.isEditing&&o.isNested?(l(),n("div",ii,[e("div",ri,[o.block.type==="container"?(l(),n("button",{key:0,onClick:m,class:"btn-add-nested",title:"Agregar bloque al contenedor"},[_(a,{name:"plus"})])):R("",!0),e("button",{onClick:s,class:"btn-edit",title:"Editar bloque"},[_(a,{name:"edit"})]),e("button",{onClick:r,class:"btn-duplicate",title:"Duplicar bloque"},[_(a,{name:"copy"})]),e("button",{onClick:$,class:"btn-delete",title:"Eliminar bloque"},[_(a,{name:"delete"})])])])):R("",!0),(l(),he(Ne(w(o.block.type)),{block:o.block,"is-editing":o.isEditing,key:o.block.id,onAddBlock:t[0]||(t[0]=L=>o.$emit("add-block",L)),onEditChild:M,onDuplicateChild:C,onDeleteChild:S},null,40,["block","is-editing"]))],10,ni)}}}),oo=re(di,[["__scopeId","data-v-0da67f30"]]),ui={key:0,class:"page-blocks-fullwidth"},ci={key:1,class:"page-content"},pi={class:"page-header"},vi={class:"page-title"},mi={key:0,class:"page-description"},gi={class:"content-sections"},fi=["innerHTML"],bi={key:1,class:"hero-section"},yi={class:"hero-content"},ki={key:0},$i={key:1},hi=["innerHTML"],Ci={key:2},_i={key:2,class:"page-content"},wi={__name:"PageContent",props:{page:{type:Object,required:!0}},setup(p){const u=p,c=r=>(r.type==="lead-converter"&&(r.valueStackItems=r.valueStackItems||[],r.urgencyItems=r.urgencyItems||[],r.trustItems=r.trustItems||[],r.situationOptions=r.situationOptions||[],r.urgencyOptions=r.urgencyOptions||[],r.progressBarCurrent=r.progressBarCurrent||0,r.progressBarTotal=r.progressBarTotal||1,r.countdownHours=r.countdownHours||24),r),b=J(()=>!u.page.pagecontent||!Array.isArray(u.page.pagecontent)?[]:[...u.page.pagecontent].map(r=>c(r)).sort((r,$)=>r.order-$.order)),i=J(()=>b.value.length>0),w=J(()=>u.page.contents?[...u.page.contents].sort((r,$)=>r.order-$.order):[]),s=J(()=>w.value.length>0);return(r,$)=>i.value?(l(),n("div",ui,[(l(!0),n(te,null,le(b.value,m=>(l(),he(oo,{key:m.id,block:m,"is-editing":!1},null,8,["block"]))),128))])):s.value?(l(),n("div",ci,[e("div",pi,[e("h1",vi,f(p.page.title),1),p.page.meta_description?(l(),n("p",mi,f(p.page.meta_description),1)):R("",!0)]),e("div",gi,[(l(!0),n(te,null,le(w.value,m=>(l(),n("div",{key:m.id,class:O(["content-section",`content-${m.content_type}`])},[m.content_type==="text"?(l(),n("div",{key:0,innerHTML:m.content_data.html},null,8,fi)):m.content_type==="hero"?(l(),n("div",bi,[e("div",yi,[m.content_data.title?(l(),n("h2",ki,f(m.content_data.title),1)):R("",!0),m.content_data.subtitle?(l(),n("p",$i,f(m.content_data.subtitle),1)):R("",!0),m.content_data.html?(l(),n("div",{key:2,innerHTML:m.content_data.html},null,8,hi)):R("",!0)])])):(l(),n("div",Ci,[e("pre",null,f(m.content_data),1)]))],2))),128))])])):(l(),n("div",_i,$[0]||($[0]=[e("div",{class:"empty-content"},[e("div",{class:"empty-icon"},[e("i",{class:"fas fa-file-alt"})]),e("h3",null,"Página en construcción"),e("p",null,"Esta página aún no tiene contenido. Ve al panel de administración para agregar bloques de contenido.")],-1)])))}},Si=re(wi,[["__scopeId","data-v-ae37e4ed"]]),xi={class:"dynamic-page-view"},Ei={key:0,class:"loading-container"},Ii={key:1,class:"error-container"},Ui={class:"error-content"},Vi=ve({__name:"DynamicPageView",props:{defaultSlug:{default:"inicio"}},setup(p){const u=zo();We();const c=D(null),b=D(!0),i=D(""),w=async r=>{b.value=!0,i.value="";try{let $;r==="inicio"||r===s.defaultSlug?$=await we.getHomepage():$=await we.getBySlug(r),$.data&&$.data.status==="published"?c.value=$.data:$.data&&$.data.status==="draft"?i.value="Esta página está en borrador y no está disponible públicamente.":i.value="La página solicitada no existe."}catch($){console.error("Error loading page:",$),$.response?.status===404?i.value="La página solicitada no existe.":i.value="Error al cargar la página. Por favor, intenta de nuevo."}finally{b.value=!1}},s=p;return fe(()=>{const r=u.params.slug||s.defaultSlug;w(r)}),xe(()=>u.params.slug,r=>{r&&w(r)},{immediate:!1}),xe(()=>c.value,r=>{if(r&&(document.title=`${r.title} | R-Integra`,r.meta_description)){const $=document.querySelector('meta[name="description"]');if($)$.setAttribute("content",r.meta_description);else{const m=document.createElement("meta");m.name="description",m.content=r.meta_description,document.head.appendChild(m)}}},{immediate:!0}),(r,$)=>{const m=Ie("router-link");return l(),n("div",xi,[b.value?(l(),n("div",Ei,$[0]||($[0]=[e("div",{class:"loading-spinner"},[e("i",{class:"fas fa-spinner fa-spin"}),e("p",null,"Cargando página...")],-1)]))):i.value?(l(),n("div",Ii,[e("div",Ui,[$[2]||($[2]=e("i",{class:"fas fa-exclamation-triangle"},null,-1)),$[3]||($[3]=e("h2",null,"Página no encontrada",-1)),e("p",null,f(i.value),1),_(m,{to:"/",class:"btn-primary"},{default:Be(()=>$[1]||($[1]=[e("i",{class:"fas fa-home"},null,-1),B(" Volver al inicio ",-1)])),_:1,__:[1]})])])):c.value?(l(),he(Si,{key:2,page:c.value},null,8,["page"])):R("",!0)])}}}),Ro=re(Vi,[["__scopeId","data-v-7a0b5c30"]]),Mi={class:"auth-container"},Ti={class:"auth-card"},Pi={class:"form-group"},Bi=["disabled"],Ai={class:"form-group"},Li=["disabled"],Di={key:0,class:"error-message"},Ri=["disabled"],Fi={key:0,class:"fas fa-spinner fa-spin"},zi={key:1,class:"fas fa-sign-in-alt"},Gi={class:"auth-footer"},Ni={__name:"LoginView",setup(p){const u=We(),c=qe(),b=D({email:"",password:""}),i=J(()=>c.loading),w=J(()=>c.error),s=async()=>{c.clearError();try{await c.login(b.value),u.push("/admin")}catch(r){console.error("Login failed:",r)}};return(r,$)=>{const m=Ie("router-link");return l(),n("div",Mi,[e("div",Ti,[$[7]||($[7]=e("div",{class:"auth-header"},[e("h1",null,"Iniciar Sesión"),e("p",null,"Accede al panel de administración")],-1)),e("form",{onSubmit:ce(s,["prevent"]),class:"auth-form"},[e("div",Pi,[$[2]||($[2]=e("label",{for:"email"},"Correo Electrónico",-1)),g(e("input",{id:"email","onUpdate:modelValue":$[0]||($[0]=M=>b.value.email=M),type:"email",required:"",disabled:i.value,placeholder:"tu@email.com"},null,8,Bi),[[I,b.value.email]])]),e("div",Ai,[$[3]||($[3]=e("label",{for:"password"},"Contraseña",-1)),g(e("input",{id:"password","onUpdate:modelValue":$[1]||($[1]=M=>b.value.password=M),type:"password",required:"",disabled:i.value,placeholder:"••••••••"},null,8,Li),[[I,b.value.password]])]),w.value?(l(),n("div",Di,[$[4]||($[4]=e("i",{class:"fas fa-exclamation-triangle"},null,-1)),B(" "+f(w.value),1)])):R("",!0),e("button",{type:"submit",class:"btn-primary btn-full",disabled:i.value},[i.value?(l(),n("i",Fi)):(l(),n("i",zi)),B(" "+f(i.value?"Iniciando...":"Iniciar Sesión"),1)],8,Ri)],32),e("div",Gi,[e("p",null,[$[6]||($[6]=B(" ¿No tienes cuenta? ",-1)),_(m,{to:"/register",class:"auth-link"},{default:Be(()=>$[5]||($[5]=[B("Regístrate aquí",-1)])),_:1,__:[5]})])])])])}}},qi=re(Ni,[["__scopeId","data-v-b7a7efcb"]]),Hi={class:"auth-container"},Oi={class:"auth-card"},ji={class:"form-group"},Wi=["disabled"],Zi={class:"form-group"},Xi=["disabled"],Ki={class:"form-group"},Ji=["disabled"],Qi={class:"form-group"},Yi=["disabled"],er={key:0,class:"error-message"},or={key:1,class:"error-message"},tr=["disabled"],sr={key:0,class:"fas fa-spinner fa-spin"},lr={key:1,class:"fas fa-user-plus"},ar={class:"auth-footer"},nr={__name:"RegisterView",setup(p){const u=We(),c=qe(),b=D({name:"",email:"",password:"",password_confirmation:""}),i=J(()=>c.loading),w=J(()=>c.error),s=J(()=>b.value.password&&b.value.password_confirmation&&b.value.password!==b.value.password_confirmation),r=async()=>{if(!s.value){c.clearError();try{await c.register(b.value),u.push("/admin")}catch($){console.error("Registration failed:",$)}}};return($,m)=>{const M=Ie("router-link");return l(),n("div",Hi,[e("div",Oi,[m[12]||(m[12]=e("div",{class:"auth-header"},[e("h1",null,"Crear Cuenta"),e("p",null,"Regístrate para acceder al panel de administración")],-1)),e("form",{onSubmit:ce(r,["prevent"]),class:"auth-form"},[e("div",ji,[m[4]||(m[4]=e("label",{for:"name"},"Nombre Completo",-1)),g(e("input",{id:"name","onUpdate:modelValue":m[0]||(m[0]=C=>b.value.name=C),type:"text",required:"",disabled:i.value,placeholder:"Tu nombre completo"},null,8,Wi),[[I,b.value.name]])]),e("div",Zi,[m[5]||(m[5]=e("label",{for:"email"},"Correo Electrónico",-1)),g(e("input",{id:"email","onUpdate:modelValue":m[1]||(m[1]=C=>b.value.email=C),type:"email",required:"",disabled:i.value,placeholder:"tu@email.com"},null,8,Xi),[[I,b.value.email]])]),e("div",Ki,[m[6]||(m[6]=e("label",{for:"password"},"Contraseña",-1)),g(e("input",{id:"password","onUpdate:modelValue":m[2]||(m[2]=C=>b.value.password=C),type:"password",required:"",disabled:i.value,placeholder:"Mínimo 8 caracteres",minlength:"8"},null,8,Ji),[[I,b.value.password]])]),e("div",Qi,[m[7]||(m[7]=e("label",{for:"password_confirmation"},"Confirmar Contraseña",-1)),g(e("input",{id:"password_confirmation","onUpdate:modelValue":m[3]||(m[3]=C=>b.value.password_confirmation=C),type:"password",required:"",disabled:i.value,placeholder:"Confirma tu contraseña"},null,8,Yi),[[I,b.value.password_confirmation]])]),s.value?(l(),n("div",er,m[8]||(m[8]=[e("i",{class:"fas fa-exclamation-triangle"},null,-1),B(" Las contraseñas no coinciden ",-1)]))):R("",!0),w.value?(l(),n("div",or,[m[9]||(m[9]=e("i",{class:"fas fa-exclamation-triangle"},null,-1)),B(" "+f(w.value),1)])):R("",!0),e("button",{type:"submit",class:"btn-primary btn-full",disabled:i.value||s.value},[i.value?(l(),n("i",sr)):(l(),n("i",lr)),B(" "+f(i.value?"Creando cuenta...":"Crear Cuenta"),1)],8,tr)],32),e("div",ar,[e("p",null,[m[11]||(m[11]=B(" ¿Ya tienes cuenta? ",-1)),_(M,{to:"/login",class:"auth-link"},{default:Be(()=>m[10]||(m[10]=[B("Inicia sesión aquí",-1)])),_:1,__:[10]})])])])])}}},ir=re(nr,[["__scopeId","data-v-bebcabf6"]]),rr=ao("content",{state:()=>({pages:[],currentPage:null,loading:!1,error:null}),actions:{async fetchPages(){this.loading=!0;try{const p=await we.getAll();this.pages=p.data}catch(p){this.error=p.message}finally{this.loading=!1}},async fetchPageBySlug(p){this.loading=!0;try{const u=await we.getBySlug(p);this.currentPage=u.data}catch(u){this.error=u.message}finally{this.loading=!1}},async createPage(p){try{const u=await we.create(p);return this.pages.push(u.data),u.data}catch(u){throw this.error=u.message,u}},async updatePage(p,u){try{const c=await we.update(p,u),b=this.pages.findIndex(i=>i.id===p);return b!==-1&&(this.pages[b]=c.data),this.currentPage&&this.currentPage.id===p&&(this.currentPage=c.data),c.data}catch(c){throw this.error=c.message,c}},async deletePage(p){try{await we.delete(p),this.pages=this.pages.filter(u=>u.id!==p),this.currentPage&&this.currentPage.id===p&&(this.currentPage=null)}catch(u){throw this.error=u.message,u}},async createContent(p){try{const u=await Je.create(p);return this.currentPage&&this.currentPage.id===p.page_id&&this.currentPage.contents.push(u.data),u.data}catch(u){throw this.error=u.message,u}},async updateContent(p,u){try{const c=await Je.update(p,u);if(this.currentPage){const b=this.currentPage.contents.findIndex(i=>i.id===p);b!==-1&&(this.currentPage.contents[b]=c.data)}return c.data}catch(c){throw this.error=c.message,c}},async deleteContent(p){try{await Je.delete(p),this.currentPage&&(this.currentPage.contents=this.currentPage.contents.filter(u=>u.id!==p))}catch(u){throw this.error=u.message,u}},async updateContentOrder(p){try{await Je.updateOrder({contents:p}),this.currentPage&&this.currentPage.contents.sort((u,c)=>u.order-c.order)}catch(u){throw this.error=u.message,u}}}});function dr(){const p=qe(),u=t=>{if(!p.user||!p.user.role)return console.log("No user or role found, denying permission:",t),!1;if(p.user.role.name==="admin")return console.log("Admin user, granting permission:",t),!0;const a=p.user.role.permissions?.includes(t)||!1;return console.log("Permission check:",t,"Result:",a,"User role:",p.user.role.name,"Permissions:",p.user.role.permissions),a},c=t=>t.some(a=>u(a)),b=t=>p.user?.role?.name===t,i=J(()=>b("admin")),w=J(()=>b("editor")),s=J(()=>{const t=u("users.view");return console.log("canViewUsers computed:",t),t}),r=J(()=>{const t=u("crm.view");return console.log("canViewCrm computed:",t),t}),$=J(()=>{const t=u("analytics.view");return console.log("canViewAnalytics computed:",t),t}),m=J(()=>{const t=u("notes.view");return console.log("canViewNotes computed:",t),t}),M=J(()=>{const t=u("backups.view");return console.log("canViewBackups computed:",t),t}),C=J(()=>{const t=u("seo.view");return console.log("canViewSeo computed:",t),t}),S=J(()=>{const t=u("pages.view");return console.log("canViewPages computed:",t),t}),U=J(()=>{const t=u("config.view");return console.log("canViewConfig computed:",t),t}),T=J(()=>{const t=u("media.view");return console.log("canViewMedia computed:",t),t}),V=J(()=>({pages:S.value,config:U.value,media:T.value})),o=J(()=>({users:s.value,crm:r.value,analytics:$.value,notes:m.value,backups:M.value,seo:C.value}));return{hasPermission:u,hasAnyPermission:c,hasRole:b,isAdmin:i,isEditor:w,canViewUsers:s,canViewCrm:r,canViewAnalytics:$,canViewNotes:m,canViewBackups:M,canViewSeo:C,canViewPages:S,canViewConfig:U,canViewMedia:T,editorAllowedFunctions:V,adminOnlyFunctions:o}}const ur={class:"modal-overlay"},cr={class:"modal-header"},pr={class:"modal-body"},vr={class:"form-group"},mr={class:"form-group"},gr={class:"form-group"},fr={class:"form-group"},br={class:"form-group"},yr={class:"toggle-group"},kr={class:"toggle-switch"},$r={class:"form-group"},hr={class:"form-group"},Cr={class:"toggle-group"},_r={class:"toggle-switch"},wr={class:"form-group"},Sr=["value","disabled"],xr={class:"form-actions"},Er=["disabled"],Ir={key:0,class:"fas fa-spinner fa-spin"},Ur={__name:"PageModal",props:{page:{type:Object,default:null},isEditing:{type:Boolean,default:!1}},emits:["save","close"],setup(p,{emit:u}){const c=p,b=u,i=D(!1),w=D([]),s=eo({title:"",slug:"",meta_description:"",status:"draft",featured:!1,is_main_page:!0,sort_order:0,parent_id:null});c.isEditing&&c.page&&Object.assign(s,{title:c.page.title,slug:c.page.slug,meta_description:c.page.meta_description||"",status:c.page.status,featured:c.page.featured||!1,is_main_page:c.page.is_main_page!==void 0?c.page.is_main_page:!0,sort_order:c.page.sort_order||0,parent_id:c.page.parent_id||null});const r=()=>{c.isEditing||(s.slug=s.title.toLowerCase().replace(/[áäàâã]/g,"a").replace(/[éëèê]/g,"e").replace(/[íïìî]/g,"i").replace(/[óöòôõ]/g,"o").replace(/[úüùû]/g,"u").replace(/[ñ]/g,"n").replace(/[çć]/g,"c").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""))},$=()=>{s.slug=s.slug.toLowerCase().replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"")},m=async()=>{try{const C=await we.getMainPages();w.value=C.data}catch(C){console.error("Error loading main pages:",C)}},M=async()=>{i.value=!0;try{const C={...s};C.parent_id===""&&(C.parent_id=null),await b("save",C)}finally{i.value=!1}};return fe(()=>{m()}),(C,S)=>(l(),n("div",ur,[e("div",{class:"modal",onClick:S[10]||(S[10]=ce(()=>{},["stop"]))},[e("div",cr,[e("h3",null,f(p.isEditing?"Editar":"Nueva")+" Página",1),e("button",{onClick:S[0]||(S[0]=U=>C.$emit("close")),class:"close-btn"},"×")]),e("div",pr,[e("form",{onSubmit:ce(M,["prevent"])},[e("div",vr,[S[11]||(S[11]=e("label",{for:"title"},"Título *",-1)),g(e("input",{id:"title","onUpdate:modelValue":S[1]||(S[1]=U=>s.title=U),type:"text",required:"",onInput:r},null,544),[[I,s.title]])]),e("div",mr,[S[12]||(S[12]=e("label",{for:"slug"},"Slug (URL) *",-1)),g(e("input",{id:"slug","onUpdate:modelValue":S[2]||(S[2]=U=>s.slug=U),type:"text",required:"",onInput:$},null,544),[[I,s.slug]]),S[13]||(S[13]=e("small",{class:"help-text"},"URL amigable para la página (solo letras, números y guiones)",-1))]),e("div",gr,[S[14]||(S[14]=e("label",{for:"meta_description"},"Meta Descripción",-1)),g(e("textarea",{id:"meta_description","onUpdate:modelValue":S[3]||(S[3]=U=>s.meta_description=U),rows:"3",placeholder:"Descripción SEO de la página"},null,512),[[I,s.meta_description]]),S[15]||(S[15]=e("small",{class:"help-text"},"Recomendado: 150-160 caracteres para SEO",-1))]),e("div",fr,[S[17]||(S[17]=e("label",{for:"status"},"Estado",-1)),g(e("select",{id:"status","onUpdate:modelValue":S[4]||(S[4]=U=>s.status=U)},S[16]||(S[16]=[e("option",{value:"draft"},"Borrador",-1),e("option",{value:"published"},"Publicado",-1)]),512),[[ie,s.status]])]),e("div",br,[e("div",yr,[S[19]||(S[19]=e("label",{class:"toggle-label"}," Resaltar página (aparece con fondo degradado dorado en el menú) ",-1)),e("div",kr,[g(e("input",{type:"checkbox",id:"featured","onUpdate:modelValue":S[5]||(S[5]=U=>s.featured=U),class:"toggle-input"},null,512),[[ke,s.featured]]),S[18]||(S[18]=e("label",{for:"featured",class:"toggle-slider"},null,-1))])])]),e("div",$r,[S[20]||(S[20]=e("label",{for:"sort_order"},"Orden en el menú",-1)),g(e("input",{id:"sort_order","onUpdate:modelValue":S[6]||(S[6]=U=>s.sort_order=U),type:"number",min:"0",placeholder:"0"},null,512),[[I,s.sort_order,void 0,{number:!0}]]),S[21]||(S[21]=e("small",{class:"help-text"},"Orden numérico para aparecer en el menú (menor número = más arriba)",-1))]),e("div",hr,[e("div",Cr,[S[23]||(S[23]=e("label",{class:"toggle-label"}," Página Principal (aparece en el menú principal) ",-1)),e("div",_r,[g(e("input",{type:"checkbox",id:"is_main_page","onUpdate:modelValue":S[7]||(S[7]=U=>s.is_main_page=U),class:"toggle-input"},null,512),[[ke,s.is_main_page]]),S[22]||(S[22]=e("label",{for:"is_main_page",class:"toggle-slider"},null,-1))])])]),e("div",wr,[S[25]||(S[25]=e("label",{for:"parent_id"},"Página padre (opcional)",-1)),g(e("select",{id:"parent_id","onUpdate:modelValue":S[8]||(S[8]=U=>s.parent_id=U)},[S[24]||(S[24]=e("option",{value:""},"-- Sin página padre --",-1)),(l(!0),n(te,null,le(w.value,U=>(l(),n("option",{key:U.id,value:U.id,disabled:p.isEditing&&U.id===c.page?.id},f(U.title),9,Sr))),128))],512),[[ie,s.parent_id]]),S[26]||(S[26]=e("small",{class:"help-text"},"Selecciona una página padre para crear una subpágina",-1))]),e("div",xr,[e("button",{type:"button",onClick:S[9]||(S[9]=U=>C.$emit("close")),class:"btn-secondary"}," Cancelar "),e("button",{type:"submit",class:"btn-primary",disabled:i.value},[i.value?(l(),n("i",Ir)):R("",!0),B(" "+f(p.isEditing?"Actualizar":"Crear"),1)],8,Er)])],32)])])]))}},Vr=re(Ur,[["__scopeId","data-v-676fb2e7"]]),Ze=ao("media",{state:()=>({mediaList:[],pagination:null,stats:null,currentMedia:null,loading:!1,error:null}),actions:{async fetchMedia(p={}){this.loading=!0,this.error=null;try{const u=await De.getAll(p);return this.pagination=u.data,this.mediaList=u.data.data,u.data}catch(u){throw this.error=u.response?.data?.message||u.message||"Error al cargar medios",u}finally{this.loading=!1}},async fetchStats(){try{const p=await De.getStats();return this.stats=p.data,p.data}catch(p){throw this.error=p.response?.data?.message||p.message||"Error al cargar estadísticas",p}},async uploadMedia(p,u){const c=new FormData;c.append("file",p),u?.alt_text&&c.append("alt_text",u.alt_text),u?.description&&c.append("description",u.description);try{const b=await De.upload(c);return this.mediaList.unshift(b.data),b.data}catch(b){throw this.error=b.response?.data?.message||b.message||"Error al subir archivo",b}},async bulkUploadMedia(p){const u=new FormData;p.forEach((c,b)=>{u.append(`files[${b}]`,c)});try{const c=await De.bulkUpload(u);return c.data.uploaded&&c.data.uploaded.length>0&&this.mediaList.unshift(...c.data.uploaded),c.data}catch(c){throw this.error=c.response?.data?.message||c.message||"Error al subir archivos",c}},async getMedia(p){try{const u=await De.getById(p);return this.currentMedia=u.data,u.data}catch(u){throw this.error=u.response?.data?.message||u.message||"Error al obtener medio",u}},async updateMedia(p,u){try{const c=await De.update(p,u),b=this.mediaList.findIndex(i=>i.id===p);return b!==-1&&(this.mediaList[b]=c.data),this.currentMedia&&this.currentMedia.id===p&&(this.currentMedia=c.data),c.data}catch(c){throw this.error=c.response?.data?.message||c.message||"Error al actualizar medio",c}},async deleteMedia(p){try{return await De.delete(p),this.mediaList=this.mediaList.filter(u=>u.id!==p),this.currentMedia&&this.currentMedia.id===p&&(this.currentMedia=null),!0}catch(u){throw this.error=u.response?.data?.message||u.message||"Error al eliminar medio",u}},getMediaById(p){return this.mediaList.find(u=>u.id===p)},getMediaByType(p){return this.mediaList.filter(u=>u.type===p)},clearError(){this.error=null},clearCurrentMedia(){this.currentMedia=null}},getters:{imageMedia:p=>p.mediaList.filter(u=>u.type==="image"),videoMedia:p=>p.mediaList.filter(u=>u.type==="video"),documentMedia:p=>p.mediaList.filter(u=>u.type==="document"),otherMedia:p=>p.mediaList.filter(u=>u.type==="other"),formattedTotalSize:p=>{if(!p.stats)return"0 B";const u=p.stats.total_size,c=1024,b=["B","KB","MB","GB","TB"],i=Math.floor(Math.log(u)/Math.log(c));return parseFloat((u/Math.pow(c,i)).toFixed(2))+" "+b[i]},hasMedia:p=>p.mediaList.length>0,isLoading:p=>p.loading}}),Mr={class:"modal-body"},Tr={key:0,class:"upload-prompt"},Pr={key:1,class:"files-preview"},Br={class:"files-list"},Ar={class:"file-info"},Lr={class:"file-details"},Dr={class:"file-name"},Rr={class:"file-size"},Fr=["onClick"],zr={key:0,class:"metadata-section"},Gr={class:"form-group"},Nr={class:"form-group"},qr={key:1,class:"upload-progress"},Hr={class:"progress-info"},Or={class:"progress-bar"},jr={key:2,class:"upload-results"},Wr={key:0,class:"success-results"},Zr={key:1,class:"error-results"},Xr={class:"modal-footer"},Kr=["disabled"],Jr=["disabled"],Qr={__name:"MediaUploadModal",emits:["close","uploaded"],setup(p,{emit:u}){const c=u,b=Ze(),i=D([]),w=D(!1),s=D(!1),r=D(0),$=D(null),m=D(null),M=eo({alt_text:"",description:""}),C=()=>{s.value||c("close")},S=()=>{s.value||m.value?.click()},U=z=>{const k=Array.from(z.target.files);t(k)},T=z=>{z.preventDefault(),w.value=!1;const k=Array.from(z.dataTransfer.files);t(k)},V=z=>{z.preventDefault(),w.value=!0},o=()=>{w.value=!1},t=z=>{const k=z.filter(X=>X.size>10485760?(alert(`El archivo "${X.name}" es muy grande. Máximo 10MB.`),!1):!i.value.some(K=>K.name===X.name&&K.size===X.size)),x=10-i.value.length,oe=k.slice(0,x);oe.length<k.length&&alert(`Solo se pueden subir máximo 10 archivos. Se seleccionaron ${oe.length} de ${k.length} archivos.`),i.value=[...i.value,...oe]},a=z=>{i.value.splice(z,1)},L=async()=>{if(i.value.length!==0){s.value=!0,r.value=0,$.value=null;try{let z;i.value.length===1?(z=await b.uploadMedia(i.value[0],{alt_text:M.alt_text||void 0,description:M.description||void 0}),z={uploaded:[z],errors:[],total_uploaded:1,total_errors:0}):z=await b.bulkUploadMedia(i.value),r.value=100,$.value=z,setTimeout(()=>{z.total_uploaded>0&&c("uploaded")},1e3)}catch(z){$.value={uploaded:[],errors:[z.message||"Error al subir archivos"],total_uploaded:0,total_errors:1}}finally{s.value=!1}}},E=z=>z.startsWith("image/")?"fas fa-image":z.startsWith("video/")?"fas fa-video":z.includes("pdf")?"fas fa-file-pdf":z.includes("word")||z.includes("document")?"fas fa-file-word":z.includes("excel")||z.includes("sheet")?"fas fa-file-excel":z.includes("powerpoint")||z.includes("presentation")?"fas fa-file-powerpoint":z.includes("text")?"fas fa-file-alt":"fas fa-file",d=z=>{if(!z)return"0 B";const k=1024,x=["B","KB","MB","GB"],oe=Math.floor(Math.log(z)/Math.log(k));return parseFloat((z/Math.pow(k,oe)).toFixed(2))+" "+x[oe]},v=(z,k=30)=>{if(z.length<=k)return z;const x=z.split(".").pop();return`${z.substring(0,z.lastIndexOf(".")).substring(0,k-x.length-4)}...${x}`};return(z,k)=>(l(),n("div",{class:"modal-overlay",onClick:C},[e("div",{class:"modal-content",onClick:k[2]||(k[2]=ce(()=>{},["stop"]))},[e("div",{class:"modal-header"},[k[4]||(k[4]=e("h3",null,"Subir Archivos",-1)),e("button",{onClick:C,class:"btn-close"},k[3]||(k[3]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Mr,[e("div",{class:O(["upload-zone",{"drag-over":w.value,"has-files":i.value.length>0}]),onDrop:T,onDragover:ce(V,["prevent"]),onDragleave:o,onClick:S},[e("input",{ref_key:"fileInput",ref:m,type:"file",multiple:"",onChange:U,accept:"image/*,video/*,.pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.csv,.rtf",style:{display:"none"}},null,544),i.value.length===0?(l(),n("div",Tr,k[5]||(k[5]=[e("i",{class:"fas fa-cloud-upload-alt upload-icon"},null,-1),e("h4",null,"Arrastra archivos aquí o haz clic para seleccionar",-1),e("p",null,"Máximo 10 archivos, 10MB por archivo",-1),e("p",{class:"file-types"}," Soporta: Imágenes, Videos, PDF, Word, Excel, PowerPoint, TXT, CSV ",-1)]))):(l(),n("div",Pr,[e("h4",null,f(i.value.length)+" archivo(s) seleccionado(s)",1),e("div",Br,[(l(!0),n(te,null,le(i.value,(x,oe)=>(l(),n("div",{key:oe,class:"file-item"},[e("div",Ar,[e("i",{class:O([E(x.type),"file-icon"])},null,2),e("div",Lr,[e("span",Dr,f(v(x.name)),1),e("span",Rr,f(d(x.size)),1)])]),e("button",{onClick:X=>a(oe),class:"btn-remove",type:"button"},k[6]||(k[6]=[e("i",{class:"fas fa-times"},null,-1)]),8,Fr)]))),128))])]))],34),i.value.length>0?(l(),n("div",zr,[k[9]||(k[9]=e("h4",null,"Metadatos (opcional)",-1)),e("div",Gr,[k[7]||(k[7]=e("label",{for:"alt-text"},"Texto alternativo (para imágenes):",-1)),g(e("input",{id:"alt-text","onUpdate:modelValue":k[0]||(k[0]=x=>M.alt_text=x),type:"text",placeholder:"Descripción de la imagen para accesibilidad",maxlength:"255"},null,512),[[I,M.alt_text]])]),e("div",Nr,[k[8]||(k[8]=e("label",{for:"description"},"Descripción:",-1)),g(e("textarea",{id:"description","onUpdate:modelValue":k[1]||(k[1]=x=>M.description=x),placeholder:"Descripción del archivo",rows:"3",maxlength:"1000"},null,512),[[I,M.description]])])])):R("",!0),s.value?(l(),n("div",qr,[e("div",Hr,[k[10]||(k[10]=e("span",null,"Subiendo archivos...",-1)),e("span",null,f(r.value)+"%",1)]),e("div",Or,[e("div",{class:"progress-fill",style:de({width:r.value+"%"})},null,4)])])):R("",!0),$.value?(l(),n("div",jr,[$.value.uploaded&&$.value.uploaded.length>0?(l(),n("div",Wr,[e("h4",null,[k[11]||(k[11]=e("i",{class:"fas fa-check-circle"},null,-1)),B(" Archivos subidos exitosamente ("+f($.value.uploaded.length)+")",1)]),e("ul",null,[(l(!0),n(te,null,le($.value.uploaded,x=>(l(),n("li",{key:x.id},f(x.name),1))),128))])])):R("",!0),$.value.errors&&$.value.errors.length>0?(l(),n("div",Zr,[e("h4",null,[k[12]||(k[12]=e("i",{class:"fas fa-exclamation-triangle"},null,-1)),B(" Errores ("+f($.value.errors.length)+")",1)]),e("ul",null,[(l(!0),n(te,null,le($.value.errors,(x,oe)=>(l(),n("li",{key:oe},f(x),1))),128))])])):R("",!0)])):R("",!0)]),e("div",Xr,[e("button",{onClick:C,class:"btn-secondary",disabled:s.value}," Cancelar ",8,Kr),e("button",{onClick:L,class:"btn-primary",disabled:i.value.length===0||s.value},[k[13]||(k[13]=e("i",{class:"fas fa-upload"},null,-1)),B(" "+f(s.value?"Subiendo...":`Subir ${i.value.length} archivo(s)`),1)],8,Jr)])])]))}},Yr=re(Qr,[["__scopeId","data-v-a4a5ba23"]]),ed={class:"modal-body"},od={class:"media-preview"},td={key:0,class:"preview-container"},sd=["src","alt"],ld={key:1,class:"preview-placeholder"},ad={class:"file-info"},nd={class:"file-name"},id={class:"file-details"},rd={class:"file-type"},dd={class:"file-metadata"},ud={class:"metadata-grid"},cd={class:"metadata-item"},pd={class:"metadata-item"},vd={class:"metadata-item"},md={class:"metadata-item"},gd={key:0,class:"metadata-item"},fd={key:1,class:"metadata-item"},bd={class:"form-section"},yd={class:"form-group"},kd={key:0,class:"help-text"},$d={class:"form-group"},hd={class:"help-text"},Cd={class:"url-section"},_d={class:"url-container"},wd=["value"],Sd={class:"modal-footer"},xd=["disabled"],Ed=["disabled"],Id={__name:"MediaEditModal",props:{media:{type:Object,required:!0}},emits:["close","updated"],setup(p,{emit:u}){const c=p,b=u,i=Ze(),w=D(!1),s=D(null),r=D(null),$=eo({alt_text:"",description:""}),m=eo({}),M=J(()=>$.alt_text!==m.alt_text||$.description!==m.description);fe(()=>{C()});const C=()=>{$.alt_text=c.media.alt_text||"",$.description=c.media.description||"",m.alt_text=$.alt_text,m.description=$.description},S=()=>{w.value||b("close")},U=async()=>{if(!(!M.value||w.value)){w.value=!0,s.value=null;try{await i.updateMedia(c.media.id,{alt_text:$.alt_text||null,description:$.description||null}),m.alt_text=$.alt_text,m.description=$.description,s.value={type:"success",text:"Cambios guardados correctamente"},b("updated"),setTimeout(()=>{S()},1500)}catch(d){s.value={type:"error",text:d.message||"Error al guardar los cambios"}}finally{w.value=!1}}},T=async()=>{try{const d=V(c.media.url);await navigator.clipboard.writeText(d),s.value={type:"success",text:"URL copiada al portapapeles"},setTimeout(()=>{s.value=null},3e3)}catch{s.value={type:"error",text:"Error al copiar la URL"}}},V=d=>d?d.startsWith("http://")||d.startsWith("https://")?d:d.includes("/storage/")?(d.split("/storage/")[1],_e(d)):(d.startsWith("/")||`${d}`,_e(d)):"",o=d=>d.startsWith("image/")?"fas fa-image":d.startsWith("video/")?"fas fa-video":d.includes("pdf")?"fas fa-file-pdf":d.includes("word")||d.includes("document")?"fas fa-file-word":d.includes("excel")||d.includes("sheet")?"fas fa-file-excel":d.includes("powerpoint")||d.includes("presentation")?"fas fa-file-powerpoint":d.includes("text")?"fas fa-file-alt":"fas fa-file",t=d=>{switch(d){case"image":return"Imagen";case"video":return"Video";case"document":return"Documento";default:return"Otro"}},a=d=>{if(!d)return"0 B";const v=1024,z=["B","KB","MB","GB"],k=Math.floor(Math.log(d)/Math.log(v));return parseFloat((d/Math.pow(v,k)).toFixed(2))+" "+z[k]},L=d=>new Date(d).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),E=d=>{d.target.style.display="none",d.target.parentElement.classList.add("error")};return(d,v)=>(l(),n("div",{class:"modal-overlay",onClick:S},[e("div",{class:"modal-content",onClick:v[2]||(v[2]=ce(()=>{},["stop"]))},[e("div",{class:"modal-header"},[v[4]||(v[4]=e("h3",null,"Editar Medio",-1)),e("button",{onClick:S,class:"btn-close"},v[3]||(v[3]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",ed,[e("div",od,[p.media.type==="image"?(l(),n("div",td,[e("img",{src:V(p.media.url),alt:p.media.alt_text||p.media.name,class:"preview-image",onError:E},null,40,sd)])):(l(),n("div",ld,[e("i",{class:O([o(p.media.mime_type),"preview-icon"])},null,2),e("div",ad,[e("span",nd,f(p.media.name),1),e("span",id,f(a(p.media.size))+" • "+f(p.media.extension.toUpperCase()),1),e("span",rd,f(t(p.media.type)),1)])]))]),e("div",dd,[e("div",ud,[e("div",cd,[v[5]||(v[5]=e("label",null,"Nombre del archivo:",-1)),e("span",null,f(p.media.name),1)]),e("div",pd,[v[6]||(v[6]=e("label",null,"Tamaño:",-1)),e("span",null,f(a(p.media.size)),1)]),e("div",vd,[v[7]||(v[7]=e("label",null,"Tipo:",-1)),e("span",null,f(p.media.mime_type),1)]),e("div",md,[v[8]||(v[8]=e("label",null,"Subido:",-1)),e("span",null,f(L(p.media.created_at)),1)]),p.media.uploader?(l(),n("div",gd,[v[9]||(v[9]=e("label",null,"Por:",-1)),e("span",null,f(p.media.uploader.name),1)])):R("",!0),p.media.type==="image"&&p.media.metadata?(l(),n("div",fd,[v[10]||(v[10]=e("label",null,"Dimensiones:",-1)),e("span",null,f(p.media.metadata.width)+" × "+f(p.media.metadata.height)+"px",1)])):R("",!0)])]),e("form",{onSubmit:ce(U,["prevent"])},[e("div",bd,[v[13]||(v[13]=e("h4",null,"Información Editable",-1)),e("div",yd,[v[11]||(v[11]=e("label",{for:"alt-text"},"Texto Alternativo:",-1)),g(e("input",{id:"alt-text","onUpdate:modelValue":v[0]||(v[0]=z=>$.alt_text=z),type:"text",placeholder:"Descripción para accesibilidad (especialmente importante para imágenes)",maxlength:"255",class:O({"required-field":p.media.type==="image"&&!$.alt_text})},null,2),[[I,$.alt_text]]),p.media.type==="image"?(l(),n("small",kd," Recomendado para imágenes - ayuda con la accesibilidad ")):R("",!0)]),e("div",$d,[v[12]||(v[12]=e("label",{for:"description"},"Descripción:",-1)),g(e("textarea",{id:"description","onUpdate:modelValue":v[1]||(v[1]=z=>$.description=z),placeholder:"Descripción detallada del contenido",rows:"4",maxlength:"1000"},null,512),[[I,$.description]]),e("small",hd,f($.description?.length||0)+"/1000 caracteres ",1)])])],32),e("div",Cd,[v[15]||(v[15]=e("h4",null,"URL del Archivo",-1)),e("div",_d,[e("input",{value:V(p.media.url),readonly:"",class:"url-input",ref_key:"urlInput",ref:r},null,8,wd),e("button",{onClick:T,class:"btn-copy",type:"button"},v[14]||(v[14]=[e("i",{class:"fas fa-copy"},null,-1),B(" Copiar ",-1)]))])]),s.value?(l(),n("div",{key:0,class:O(["save-message",s.value.type])},[e("i",{class:O(s.value.type==="success"?"fas fa-check-circle":"fas fa-exclamation-triangle")},null,2),B(" "+f(s.value.text),1)],2)):R("",!0)]),e("div",Sd,[e("button",{onClick:S,class:"btn-secondary",disabled:w.value}," Cancelar ",8,xd),e("button",{onClick:U,class:"btn-primary",disabled:w.value||!M.value},[v[16]||(v[16]=e("i",{class:"fas fa-save"},null,-1)),B(" "+f(w.value?"Guardando...":"Guardar Cambios"),1)],8,Ed)])])]))}},Ud=re(Id,[["__scopeId","data-v-f489808c"]]),Vd={key:0,class:"modal-header"},Md={key:1,class:"fullscreen-overlay"},Td={key:0,class:"image-container"},Pd=["src","alt"],Bd={key:0,class:"image-loading"},Ad={key:1,class:"video-container"},Ld=["src"],Dd={key:2,class:"document-container"},Rd={class:"document-preview"},Fd={class:"document-info"},zd={class:"document-details"},Gd={class:"document-actions"},Nd=["href"],qd=["href","download"],Hd={key:0,class:"media-info"},Od={class:"info-section"},jd={class:"info-grid"},Wd={class:"info-item"},Zd={class:"info-value"},Xd={class:"info-item"},Kd={class:"info-value"},Jd={class:"info-item"},Qd={class:"info-value"},Yd={class:"info-item"},eu={class:"info-value"},ou={key:0,class:"info-section"},tu={class:"info-grid"},su={class:"info-item"},lu={class:"info-value"},au={key:0,class:"info-item"},nu={class:"info-value"},iu={key:1,class:"info-item"},ru={class:"info-value"},du={class:"info-section"},uu={class:"info-grid"},cu={key:0,class:"info-item full-width"},pu={class:"info-value"},vu={key:1,class:"info-item full-width"},mu={class:"info-value"},gu={class:"info-item"},fu={class:"info-value"},bu={key:2,class:"info-item"},yu={class:"info-value"},ku={class:"info-section"},$u={class:"url-container"},hu=["value"],Cu={key:2,class:"modal-footer"},_u={class:"footer-info"},wu={class:"file-path"},Su={class:"footer-actions"},xu=["href","download"],Eu={__name:"MediaViewModal",props:{media:{type:Object,required:!0}},emits:["close","edit"],setup(p,{emit:u}){const c=p,b=u,i=D(!1),w=D(!0),s=D(null),r=D(null);fe(()=>{document.addEventListener("keydown",M)}),Re(()=>{document.removeEventListener("keydown",M)});const $=()=>{b("close")},m=()=>{i.value=!i.value},M=d=>{d.key==="Escape"?i.value?i.value=!1:$():(d.key==="f"||d.key==="F")&&(c.media.type==="image"||c.media.type==="video")&&m()},C=()=>{w.value=!1},S=()=>{w.value=!1,s.value={type:"error",text:"Error al cargar la imagen"}},U=()=>{console.log("Video cargando...")},T=()=>{s.value={type:"error",text:"Error al cargar el video"}},V=async()=>{try{const d=o(c.media.url);await navigator.clipboard.writeText(d),s.value={type:"success",text:"URL copiada al portapapeles"},setTimeout(()=>{s.value=null},3e3)}catch{s.value={type:"error",text:"Error al copiar la URL"}}},o=_e,t=d=>d.startsWith("image/")?"fas fa-image":d.startsWith("video/")?"fas fa-video":d.includes("pdf")?"fas fa-file-pdf":d.includes("word")||d.includes("document")?"fas fa-file-word":d.includes("excel")||d.includes("sheet")?"fas fa-file-excel":d.includes("powerpoint")||d.includes("presentation")?"fas fa-file-powerpoint":d.includes("text")?"fas fa-file-alt":"fas fa-file",a=d=>{switch(d){case"image":return"Imagen";case"video":return"Video";case"document":return"Documento";default:return"Otro"}},L=d=>{if(!d)return"0 B";const v=1024,z=["B","KB","MB","GB"],k=Math.floor(Math.log(d)/Math.log(v));return parseFloat((d/Math.pow(v,k)).toFixed(2))+" "+z[k]},E=d=>new Date(d).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(d,v)=>(l(),n("div",{class:"modal-overlay",onClick:$},[e("div",{class:O(["modal-content",{fullscreen:i.value}]),onClick:v[1]||(v[1]=ce(()=>{},["stop"]))},[i.value?R("",!0):(l(),n("div",Vd,[e("h3",null,f(p.media.name),1),e("div",{class:"header-actions"},[e("button",{onClick:m,class:"btn-action",title:"Pantalla completa"},v[2]||(v[2]=[e("i",{class:"fas fa-expand"},null,-1)])),e("button",{onClick:$,class:"btn-close"},v[3]||(v[3]=[e("i",{class:"fas fa-times"},null,-1)]))])])),i.value?(l(),n("div",Md,[e("button",{onClick:m,class:"btn-fullscreen-close"},v[4]||(v[4]=[e("i",{class:"fas fa-compress"},null,-1)]))])):R("",!0),e("div",{class:O(["modal-body",{"fullscreen-body":i.value}])},[e("div",{class:O(["media-display",{"fullscreen-display":i.value}])},[p.media.type==="image"?(l(),n("div",Td,[e("img",{src:G(o)(p.media.url),alt:p.media.alt_text||p.media.name,class:"main-image",onLoad:C,onError:S},null,40,Pd),w.value?(l(),n("div",Bd,v[5]||(v[5]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),B(" Cargando imagen... ",-1)]))):R("",!0)])):p.media.type==="video"?(l(),n("div",Ad,[e("video",{src:G(o)(p.media.url),controls:"",class:"main-video",preload:"metadata",onLoadstart:U,onError:T}," Tu navegador no soporta la reproducción de video. ",40,Ld)])):(l(),n("div",Dd,[e("div",Rd,[e("i",{class:O([t(p.media.mime_type),"document-icon"])},null,2),e("div",Fd,[e("h4",null,f(p.media.name),1),e("p",zd,f(a(p.media.type))+" • "+f(L(p.media.size))+" • "+f(p.media.extension.toUpperCase()),1),e("div",Gd,[e("a",{href:G(o)(p.media.url),target:"_blank",rel:"noopener noreferrer",class:"btn-primary"},v[6]||(v[6]=[e("i",{class:"fas fa-external-link-alt"},null,-1),B(" Abrir en nueva pestaña ",-1)]),8,Nd),e("a",{href:G(o)(p.media.url),download:p.media.name,class:"btn-secondary"},v[7]||(v[7]=[e("i",{class:"fas fa-download"},null,-1),B(" Descargar ",-1)]),8,qd)])])])]))],2),i.value?R("",!0):(l(),n("div",Hd,[e("div",Od,[v[12]||(v[12]=e("h4",null,"Información del Archivo",-1)),e("div",jd,[e("div",Wd,[v[8]||(v[8]=e("span",{class:"info-label"},"Nombre:",-1)),e("span",Zd,f(p.media.name),1)]),e("div",Xd,[v[9]||(v[9]=e("span",{class:"info-label"},"Tipo:",-1)),e("span",Kd,f(a(p.media.type)),1)]),e("div",Jd,[v[10]||(v[10]=e("span",{class:"info-label"},"Tamaño:",-1)),e("span",Qd,f(L(p.media.size)),1)]),e("div",Yd,[v[11]||(v[11]=e("span",{class:"info-label"},"Formato:",-1)),e("span",eu,f(p.media.mime_type),1)])])]),p.media.type==="image"&&p.media.metadata?(l(),n("div",ou,[v[16]||(v[16]=e("h4",null,"Propiedades de Imagen",-1)),e("div",tu,[e("div",su,[v[13]||(v[13]=e("span",{class:"info-label"},"Dimensiones:",-1)),e("span",lu,f(p.media.metadata.width)+" × "+f(p.media.metadata.height)+" píxeles",1)]),p.media.metadata.channels?(l(),n("div",au,[v[14]||(v[14]=e("span",{class:"info-label"},"Canales:",-1)),e("span",nu,f(p.media.metadata.channels),1)])):R("",!0),p.media.metadata.bits?(l(),n("div",iu,[v[15]||(v[15]=e("span",{class:"info-label"},"Profundidad:",-1)),e("span",ru,f(p.media.metadata.bits)+" bits",1)])):R("",!0)])])):R("",!0),e("div",du,[v[21]||(v[21]=e("h4",null,"Detalles Adicionales",-1)),e("div",uu,[p.media.alt_text?(l(),n("div",cu,[v[17]||(v[17]=e("span",{class:"info-label"},"Texto Alternativo:",-1)),e("span",pu,f(p.media.alt_text),1)])):R("",!0),p.media.description?(l(),n("div",vu,[v[18]||(v[18]=e("span",{class:"info-label"},"Descripción:",-1)),e("span",mu,f(p.media.description),1)])):R("",!0),e("div",gu,[v[19]||(v[19]=e("span",{class:"info-label"},"Subido:",-1)),e("span",fu,f(E(p.media.created_at)),1)]),p.media.uploader?(l(),n("div",bu,[v[20]||(v[20]=e("span",{class:"info-label"},"Por:",-1)),e("span",yu,f(p.media.uploader.name),1)])):R("",!0)])]),e("div",ku,[v[23]||(v[23]=e("h4",null,"URL del Archivo",-1)),e("div",$u,[e("input",{value:G(o)(p.media.url),readonly:"",class:"url-input",ref_key:"urlInput",ref:r},null,8,hu),e("button",{onClick:V,class:"btn-copy"},v[22]||(v[22]=[e("i",{class:"fas fa-copy"},null,-1)]))])])]))],2),i.value?R("",!0):(l(),n("div",Cu,[e("div",_u,[e("span",wu,f(p.media.path),1)]),e("div",Su,[e("a",{href:G(o)(p.media.url),download:p.media.name,class:"btn-secondary"},v[24]||(v[24]=[e("i",{class:"fas fa-download"},null,-1),B(" Descargar ",-1)]),8,xu),e("button",{onClick:v[0]||(v[0]=z=>d.$emit("edit",p.media)),class:"btn-primary"},v[25]||(v[25]=[e("i",{class:"fas fa-edit"},null,-1),B(" Editar ",-1)]))])])),s.value?(l(),n("div",{key:3,class:O(["status-message",s.value.type])},f(s.value.text),3)):R("",!0)],2)]))}},Iu=re(Eu,[["__scopeId","data-v-99456688"]]),Uu={class:"media-manager"},Vu={class:"section-header"},Mu={key:0,class:"mock-data-badge"},Tu={class:"header-actions"},Pu={class:"search-box"},Bu={key:0,class:"media-stats"},Au={class:"stat-card"},Lu={class:"stat-icon"},Du={class:"stat-content"},Ru={class:"stat-card"},Fu={class:"stat-icon"},zu={class:"stat-content"},Gu={class:"stat-card"},Nu={class:"stat-icon"},qu={class:"stat-content"},Hu={class:"stat-card"},Ou={class:"stat-icon"},ju={class:"stat-content"},Wu={key:1,class:"loading"},Zu={key:2,class:"media-grid"},Xu={class:"media-preview"},Ku=["src","alt"],Ju={key:1,class:"preview-video"},Qu={class:"file-extension"},Yu={key:2,class:"preview-document"},ec={class:"file-extension"},oc={key:3,class:"preview-other"},tc={class:"file-extension"},sc={class:"media-info"},lc=["title"],ac={class:"media-details"},nc={class:"file-size"},ic={class:"file-type"},rc={class:"media-date"},dc={key:0,class:"image-metadata"},uc={class:"media-actions"},cc=["onClick"],pc=["onClick"],vc=["onClick"],mc=["onClick"],gc={key:3,class:"pagination"},fc=["disabled"],bc={class:"page-info"},yc=["disabled"],kc={__name:"MediaManager",setup(p){const u=Ze(),c=D(!1),b=D(""),i=D(""),w=D(!1),s=D(!1),r=D(!1),$=D(null),m=D(!1),M=J(()=>u.mediaList),C=J(()=>u.pagination),S=J(()=>u.stats);fe(()=>{U(),T()});const U=async(W=1)=>{c.value=!0;try{await u.fetchMedia({type:b.value,search:i.value,page:W})}catch(ee){console.error("Error loading media:",ee)}finally{c.value=!1}},T=async()=>{try{await u.fetchStats()}catch(W){console.error("Error loading media stats:",W)}},V=()=>{clearTimeout(window.mediaSearchTimeout),window.mediaSearchTimeout=setTimeout(()=>{U()},300)},o=W=>{W>=1&&W<=C.value.last_page&&U(W)},t=W=>{$.value=W,r.value=!0},a=W=>{$.value=W,s.value=!0},L=async W=>{try{await navigator.clipboard.writeText(x(W.url)),E("URL copiada al portapapeles")}catch{d("Error al copiar URL")}},E=W=>{alert("✅ "+W)},d=W=>{alert("❌ "+W)},v=async W=>{if(confirm(`¿Estás seguro de eliminar "${W.name}"? Esta acción no se puede deshacer.`))try{m.value?(u.mediaList=u.mediaList.filter(ee=>ee.id!==W.id),u.stats&&(u.stats.total-=1,u.stats.by_type[W.type]>0&&(u.stats.by_type[W.type]-=1),u.stats.total_size=Math.max(0,u.stats.total_size-W.size)),console.log(`🗑️ MediaManager: Archivo mock "${W.name}" eliminado`),E(`Archivo "${W.name}" eliminado correctamente`)):(await u.deleteMedia(W.id),await U(),await T(),E(`Archivo "${W.name}" eliminado correctamente`))}catch(ee){console.error("Error al eliminar archivo:",ee),d("Error al eliminar el archivo: "+(ee?.message||"Error desconocido"))}},z=()=>{U(),T()},k=()=>{U()},x=W=>{console.log("🖼️ MediaManager - URL original:",W);const ee=_e(W);return console.log("URL completa construida:",ee),ee},oe=(W,ee=20)=>W.length<=ee?W:W.substring(0,ee)+"...",X=W=>{if(!W)return"0 B";const ee=1024,pe=["B","KB","MB","GB"],j=Math.floor(Math.log(W)/Math.log(ee));return parseFloat((W/Math.pow(ee,j)).toFixed(2))+" "+pe[j]},K=W=>new Date(W).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),Q=W=>{W.target.style.display="none",W.target.nextElementSibling?.classList.add("error")};return(W,ee)=>{const pe=Ie("Icon");return l(),n("div",Uu,[e("div",Vu,[e("h2",null,[ee[9]||(ee[9]=B(" Gestionar Medios ",-1)),m.value?(l(),n("span",Mu,[_(pe,{name:"flask"}),ee[8]||(ee[8]=B(" Datos de prueba ",-1))])):R("",!0)]),e("div",Tu,[g(e("select",{"onUpdate:modelValue":ee[0]||(ee[0]=j=>b.value=j),class:"type-filter",onChange:U},ee[10]||(ee[10]=[Se('<option value="" data-v-52a3ce5f>Todos los tipos</option><option value="image" data-v-52a3ce5f>Imágenes</option><option value="video" data-v-52a3ce5f>Videos</option><option value="document" data-v-52a3ce5f>Documentos</option><option value="other" data-v-52a3ce5f>Otros</option>',5)]),544),[[ie,b.value]]),e("div",Pu,[g(e("input",{"onUpdate:modelValue":ee[1]||(ee[1]=j=>i.value=j),onInput:V,placeholder:"Buscar medios...",class:"search-input"},null,544),[[I,i.value]]),_(pe,{name:"search",class:"search-icon"})]),e("button",{onClick:ee[2]||(ee[2]=j=>w.value=!0),class:"btn-primary"},[_(pe,{name:"upload"}),ee[11]||(ee[11]=B(" Subir Archivos ",-1))])])]),S.value?(l(),n("div",Bu,[e("div",Au,[e("div",Lu,[_(pe,{name:"document"})]),e("div",Du,[e("h3",null,f(S.value.total),1),ee[12]||(ee[12]=e("p",null,"Total de Archivos",-1))])]),e("div",Ru,[e("div",Fu,[_(pe,{name:"photo"})]),e("div",zu,[e("h3",null,f(S.value.by_type.image),1),ee[13]||(ee[13]=e("p",null,"Imágenes",-1))])]),e("div",Gu,[e("div",Nu,[_(pe,{name:"video"})]),e("div",qu,[e("h3",null,f(S.value.by_type.video),1),ee[14]||(ee[14]=e("p",null,"Videos",-1))])]),e("div",Hu,[e("div",Ou,[_(pe,{name:"document-text"})]),e("div",ju,[e("h3",null,f(S.value.by_type.document),1),ee[15]||(ee[15]=e("p",null,"Documentos",-1))])])])):R("",!0),c.value?(l(),n("div",Wu,[_(pe,{name:"refresh",class:"animate-spin"}),ee[16]||(ee[16]=B(" Cargando medios... ",-1))])):(l(),n("div",Zu,[(l(!0),n(te,null,le(M.value,j=>(l(),n("div",{key:j.id,class:"media-card"},[e("div",Xu,[j.type==="image"?(l(),n("img",{key:0,src:x(j.url),alt:j.alt_text||j.name,class:"preview-image",onError:Q},null,40,Ku)):j.type==="video"?(l(),n("div",Ju,[_(pe,{name:"video",class:"preview-icon"}),e("span",Qu,"."+f(j.extension),1)])):j.type==="document"?(l(),n("div",Yu,[_(pe,{name:"document-text",class:"preview-icon"}),e("span",ec,"."+f(j.extension),1)])):(l(),n("div",oc,[_(pe,{name:"document",class:"preview-icon"}),e("span",tc,"."+f(j.extension),1)]))]),e("div",sc,[e("h4",{class:"media-name",title:j.name},f(oe(j.name)),9,lc),e("p",ac,[e("span",nc,f(X(j.size)),1),e("span",ic,f(j.type),1)]),e("p",rc,f(K(j.created_at)),1),j.type==="image"&&j.metadata?(l(),n("div",dc,f(j.metadata.width)+" x "+f(j.metadata.height)+"px ",1)):R("",!0)]),e("div",uc,[e("button",{onClick:q=>t(j),class:"btn-action",title:"Ver"},[_(pe,{name:"eye"})],8,cc),e("button",{onClick:q=>L(j),class:"btn-action",title:"Copiar URL"},[_(pe,{name:"link"})],8,pc),e("button",{onClick:q=>a(j),class:"btn-action",title:"Editar"},[_(pe,{name:"edit"})],8,vc),e("button",{onClick:q=>v(j),class:"btn-action btn-danger",title:"Eliminar"},[_(pe,{name:"delete"})],8,mc)])]))),128))])),C.value&&C.value.last_page>1?(l(),n("div",gc,[e("button",{onClick:ee[3]||(ee[3]=j=>o(C.value.current_page-1)),disabled:C.value.current_page<=1,class:"btn-secondary btn-sm"},[_(pe,{name:"chevron-left"}),ee[17]||(ee[17]=B(" Anterior ",-1))],8,fc),e("span",bc," Página "+f(C.value.current_page)+" de "+f(C.value.last_page),1),e("button",{onClick:ee[4]||(ee[4]=j=>o(C.value.current_page+1)),disabled:C.value.current_page>=C.value.last_page,class:"btn-secondary btn-sm"},ee[18]||(ee[18]=[B(" Siguiente ",-1),e("i",{class:"fas fa-chevron-right"},null,-1)]),8,yc)])):R("",!0),w.value?(l(),he(Yr,{key:4,onClose:ee[5]||(ee[5]=j=>w.value=!1),onUploaded:z})):R("",!0),s.value&&$.value?(l(),he(Ud,{key:5,media:$.value,onClose:ee[6]||(ee[6]=j=>s.value=!1),onUpdated:k},null,8,["media"])):R("",!0),r.value&&$.value?(l(),he(Iu,{key:6,media:$.value,onClose:ee[7]||(ee[7]=j=>r.value=!1)},null,8,["media"])):R("",!0)])}}},$c=re(kc,[["__scopeId","data-v-52a3ce5f"]]),hc={class:"media-picker-header"},Cc={class:"header-info"},_c={key:0,class:"mock-data-badge"},wc={class:"media-picker-controls"},Sc={class:"search-controls"},xc={class:"search-input-group"},Ec={class:"upload-controls"},Ic=["accept"],Uc={key:0,class:"drag-overlay"},Vc={key:1,class:"loading-state"},Mc={key:2,class:"upload-progress"},Tc={class:"progress-header"},Pc={class:"progress-bar"},Bc={key:3,class:"empty-state"},Ac={key:0},Lc={key:1},Dc={key:2},Rc={key:4,class:"media-grid"},Fc=["onClick"],zc={class:"media-thumbnail"},Gc=["src","alt"],Nc={key:1,class:"file-placeholder"},qc={class:"media-info"},Hc=["title"],Oc={class:"media-size"},jc={key:0,class:"selection-indicator"},Wc={class:"modal-footer"},Zc={class:"selection-info"},Xc={key:0},Kc={class:"action-buttons"},Jc=["disabled"],Qc=ve({__name:"MediaPicker",props:{show:{type:Boolean},selectedMedia:{},typeFilter:{default:""},multiple:{type:Boolean,default:!1}},emits:["close","select","selectMedia"],setup(p,{emit:u}){const c=p,b=u,i=Ze(),w=D(""),s=D(c.typeFilter),r=D(!1),$=D(!1),m=D(!1),M=D(!1),C=D(0),S=D([]),U=D(null),T=D([]),V=J(()=>{let K=i.mediaList||[];if(s.value&&(K=K.filter(Q=>Q.type===s.value)),w.value){const Q=w.value.toLowerCase();K=K.filter(W=>W.name.toLowerCase().includes(Q)||W.alt_text&&W.alt_text.toLowerCase().includes(Q))}return K}),o=K=>T.value.some(Q=>Q.id===K.id),t=K=>{if(c.multiple)T.value.findIndex(W=>W.id===K.id)>=0?T.value=T.value.filter(W=>W.id!==K.id):T.value=[...T.value,K];else{T.value=[K],b("select",K);return}},a=()=>{if(T.value.length>0){const K=c.multiple?T.value:T.value[0];b("select",K)}},L=K=>{if(!K||!K.url)return"";if(console.group("🖼️ MediaPicker - URL Conversion Debug"),console.log("Media URL original:",K.url),K.url.startsWith("http://")||K.url.startsWith("https://"))return console.log("URL completa detectada:",K.url),console.groupEnd(),K.url;if(K.url.includes("/storage/")){K.url.split("/storage/")[1];const W=_e(K.url);return console.log("URL completa construida:",W),console.groupEnd(),W}K.url.startsWith("/")?K.url:`${K.url}`;const Q=_e(K.url);return console.log("URL completa final:",Q),console.groupEnd(),Q},E=K=>K.startsWith("image/")?"fas fa-image":K.startsWith("video/")?"fas fa-video":K.includes("pdf")?"fas fa-file-pdf":K.includes("word")?"fas fa-file-word":K.includes("excel")||K.includes("spreadsheet")?"fas fa-file-excel":"fas fa-file",d=K=>{if(K===0)return"0 Bytes";const Q=1024,W=["Bytes","KB","MB","GB"],ee=Math.floor(Math.log(K)/Math.log(Q));return parseFloat((K/Math.pow(Q,ee)).toFixed(2))+" "+W[ee]},v=()=>{switch(s.value){case"image":return"image/*";case"video":return"video/*,.mp4,.webm,.ogg,.avi,.mov,.wmv,.flv,.mkv";case"document":return".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt";default:return"*"}},z=async()=>{if(i.mediaList.length===0){r.value=!0;try{await i.fetchMedia()}catch(K){console.error("Error loading media:",K)}finally{r.value=!1}}},k=()=>{U.value?.click()},x=K=>{const Q=K.target;if(Q.files){const W=Array.from(Q.files);X(W),Q.value=""}},oe=K=>{if(m.value=!1,K.dataTransfer?.files){const Q=Array.from(K.dataTransfer.files);X(Q)}},X=async K=>{if(K.length===0)return;let Q=K;if(s.value==="image"&&(Q=K.filter(W=>W.type.startsWith("image/"))),Q.length===0){alert("Los archivos seleccionados no coinciden con el filtro activo");return}S.value=Q,M.value=!0,C.value=0;try{let W=0;for(const ee of Q)try{await i.uploadMedia(ee),W++,C.value=Math.round(W/Q.length*100)}catch(pe){console.error("Error uploading file:",ee.name,pe)}console.log(`✅ Subida completada: ${W}/${Q.length} archivos`),await i.fetchMedia()}catch(W){console.error("Error during upload:",W)}finally{M.value=!1,C.value=0,S.value=[]}};return xe(()=>c.show,K=>{K?(z(),T.value=[...c.selectedMedia]):T.value=[]}),fe(()=>{c.show&&z()}),(K,Q)=>K.show?(l(),n("div",{key:0,class:"modal-overlay",onClick:Q[7]||(Q[7]=W=>K.$emit("close"))},[e("div",{class:"modal-content",onClick:Q[6]||(Q[6]=ce(()=>{},["stop"]))},[e("div",hc,[e("h3",null,[Q[8]||(Q[8]=e("i",{class:"fas fa-images"},null,-1)),B(" Seleccionar "+f(s.value==="image"?"Imagen":"Archivo"),1)]),e("div",Cc,[$.value?(l(),n("span",_c,Q[9]||(Q[9]=[e("i",{class:"fas fa-flask"},null,-1),B(" Datos de prueba ",-1)]))):R("",!0),e("button",{onClick:Q[0]||(Q[0]=W=>K.$emit("close")),class:"btn-close"},Q[10]||(Q[10]=[e("i",{class:"fas fa-times"},null,-1)]))])]),e("div",wc,[e("div",Sc,[e("div",xc,[Q[11]||(Q[11]=e("i",{class:"fas fa-search"},null,-1)),g(e("input",{"onUpdate:modelValue":Q[1]||(Q[1]=W=>w.value=W),type:"text",placeholder:"Buscar archivos...",class:"search-input"},null,512),[[I,w.value]])]),g(e("select",{"onUpdate:modelValue":Q[2]||(Q[2]=W=>s.value=W),class:"filter-select"},Q[12]||(Q[12]=[e("option",{value:""},"Todos los archivos",-1),e("option",{value:"image"},"Solo imágenes",-1),e("option",{value:"video"},"Solo videos",-1),e("option",{value:"document"},"Documentos",-1)]),512),[[ie,s.value]])]),e("div",Ec,[e("input",{ref_key:"fileInput",ref:U,type:"file",accept:v(),multiple:"",style:{display:"none"},onChange:x},null,40,Ic),e("button",{onClick:k,class:"btn-upload"},Q[13]||(Q[13]=[e("i",{class:"fas fa-cloud-upload-alt"},null,-1),B(" Subir Archivos ",-1)]))])]),e("div",{class:O(["media-grid-container",{"drag-over":m.value}]),onDragover:Q[3]||(Q[3]=ce(W=>m.value=!0,["prevent"])),onDragleave:Q[4]||(Q[4]=ce(W=>m.value=!1,["prevent"])),onDrop:ce(oe,["prevent"])},[m.value?(l(),n("div",Uc,Q[14]||(Q[14]=[e("div",{class:"drag-content"},[e("i",{class:"fas fa-cloud-upload-alt"}),e("h4",null,"Suelta los archivos aquí"),e("p",null,"Se subirán automáticamente")],-1)]))):R("",!0),r.value?(l(),n("div",Vc,Q[15]||(Q[15]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("span",null,"Cargando archivos...",-1)]))):R("",!0),M.value?(l(),n("div",Mc,[e("div",Tc,[e("span",null,"Subiendo "+f(S.value.length)+" archivo(s)...",1),e("span",null,f(C.value)+"%",1)]),e("div",Pc,[e("div",{class:"progress-fill",style:de({width:C.value+"%"})},null,4)])])):V.value.length===0?(l(),n("div",Bc,[Q[16]||(Q[16]=e("i",{class:"fas fa-folder-open"},null,-1)),G(i).error?(l(),n("span",Ac," Error al cargar archivos: "+f(G(i).error),1)):w.value||s.value?(l(),n("span",Lc," No se encontraron archivos con los filtros aplicados ")):(l(),n("span",Dc," No hay archivos disponibles. Sube archivos desde el gestor de medios. "))])):(l(),n("div",Rc,[(l(!0),n(te,null,le(V.value,W=>(l(),n("div",{key:W.id,class:O(["media-item",{selected:o(W),"is-image":W.type==="image"}]),onClick:ee=>t(W)},[e("div",zc,[W.type==="image"?(l(),n("img",{key:0,src:L(W),alt:W.alt_text||W.name,loading:"lazy"},null,8,Gc)):(l(),n("div",Nc,[e("i",{class:O(E(W.mime_type))},null,2)]))]),e("div",qc,[e("span",{class:"media-name",title:W.name},f(W.name),9,Hc),e("span",Oc,f(d(W.size)),1)]),o(W)?(l(),n("div",jc,Q[17]||(Q[17]=[e("i",{class:"fas fa-check-circle"},null,-1)]))):R("",!0)],10,Fc))),128))]))],34),e("div",Wc,[e("div",Zc,[T.value.length>0?(l(),n("span",Xc,f(T.value.length)+" archivo"+f(T.value.length>1?"s":"")+" seleccionado"+f(T.value.length>1?"s":""),1)):R("",!0)]),e("div",Kc,[e("button",{onClick:Q[5]||(Q[5]=W=>K.$emit("close")),class:"btn-secondary"}," Cancelar "),e("button",{onClick:a,disabled:T.value.length===0,class:"btn-primary"},Q[18]||(Q[18]=[e("i",{class:"fas fa-check"},null,-1),B(" Seleccionar ",-1)]),8,Jc)])])])])):R("",!0)}}),Ue=re(Qc,[["__scopeId","data-v-d2e512fc"]]);function Ae(){const p=Ze(),u=D(!1),c=D([]),b=D(null),i=M=>{b.value=M,c.value=[],u.value=!0},w=M=>{if(Array.isArray(M)){c.value=M;return}if(b.value?.multiple){const C=c.value.findIndex(S=>S.id===M.id);C>-1?c.value.splice(C,1):c.value.push(M)}else c.value=[M]},s=()=>{if(b.value?.onSelect&&c.value.length>0){const M=b.value.multiple?c.value:c.value[0];b.value.onSelect(M)}r()},r=()=>{u.value=!1,c.value=[],b.value=null};return{showMediaPicker:u,selectedMedia:c,currentOptions:b,openMediaPicker:i,selectMedia:w,confirmSelection:s,closeMediaPicker:r,getFullMediaUrl:M=>{if(!M||!M.url)return"";const C=_e(M.url);return console.group("🔗 useMediaPicker - URL Generation"),console.log("Original URL:",M.url),console.log("Final URL:",C),console.groupEnd(),C},getMediaDisplayName:M=>Gl(M),mediaStore:p}}const Yc={class:"header-config"},ep={class:"config-form"},op={class:"form-row"},tp={class:"form-group"},sp={class:"logo-upload-area"},lp={key:0,class:"logo-preview"},ap=["src"],np={key:1,class:"upload-placeholder"},ip={class:"upload-buttons"},rp={class:"form-row"},dp={class:"form-group"},up={class:"color-input-group"},cp={class:"form-group"},pp={class:"color-input-group"},vp={class:"form-row"},mp={class:"form-group"},gp={class:"color-input-group"},fp={class:"form-group"},bp={class:"color-input-group"},yp={class:"preview-section"},kp={class:"header-preview"},$p={class:"preview-nav"},hp={class:"preview-logo"},Cp=["src"],_p={key:1},wp={class:"preview-nav"},Sp={class:"preview-logo"},xp=["src"],Ep={key:1},Ip={class:"form-actions"},Up=["disabled"],Vp={__name:"HeaderConfig",setup(p){const u=D(!1),c=D(null),b=D(""),i=D(null),{showMediaPicker:w,selectedMedia:s,openMediaPicker:r,closeMediaPicker:$,getFullMediaUrl:m}=Ae(),M=D({logoUrl:"",backgroundNormal:"transparent",backgroundSticky:"#0a5a39",textColor:"#ffffff",textHoverColor:"#ffffff"}),C=J(()=>({backgroundColor:M.value.backgroundNormal,color:M.value.textColor})),S=J(()=>({backgroundColor:M.value.backgroundSticky,color:M.value.textColor})),U=()=>{r({typeFilter:"image",multiple:!1,onSelect:T})},T=d=>{i.value=d,b.value=m(d),M.value.logoUrl=m(d),$()},V=d=>{const v=d.target.files[0];if(v){c.value=v;const z=new FileReader;z.onload=k=>{b.value=k.target.result},z.readAsDataURL(v)}},o=()=>{c.value=null,b.value="",M.value.logoUrl="",document.getElementById("logo-upload").value=""},t=()=>{const d={...M.value,logoUrl:b.value};window.dispatchEvent(new CustomEvent("headerConfigChanged",{detail:d}))},a=async()=>{u.value=!0;try{const d={...M.value,logoUrl:b.value};await Ee.save("header",d,"Configuración del header actualizada"),window.dispatchEvent(new CustomEvent("headerConfigChanged",{detail:d})),alert("Configuración guardada exitosamente")}catch(d){console.error("Error al guardar la configuración:",d),alert("Error al guardar la configuración")}finally{u.value=!1}},L=()=>{M.value={logoUrl:"",backgroundNormal:"transparent",backgroundSticky:"#0a5a39",textColor:"#ffffff",textHoverColor:"#ffffff"},o()},E=async()=>{try{console.log("🔍 HeaderConfig: Cargando configuración desde API...");const d=await Ee.getActive("header");if(console.log("📰 HeaderConfig: Respuesta de API:",d.data),d.data&&d.data.data&&d.data.data.config_data){const v=d.data.data.config_data;console.log("⚙️ HeaderConfig: Configuración recibida:",v),console.log("🎨 HeaderConfig: Colores anteriores:",{backgroundNormal:M.value.backgroundNormal,backgroundSticky:M.value.backgroundSticky}),M.value={...M.value,...v},console.log("🎨 HeaderConfig: Colores después:",{backgroundNormal:M.value.backgroundNormal,backgroundSticky:M.value.backgroundSticky}),v.logoUrl&&(b.value=v.logoUrl),console.log("✅ HeaderConfig: Configuración cargada exitosamente")}else console.log("⚠️ HeaderConfig: No hay configuración activa en la respuesta")}catch(d){console.error("❌ HeaderConfig: Error al cargar configuración:",d)}};return fe(async()=>{await E()}),(d,v)=>{const z=Ie("Icon");return l(),n("div",Yc,[v[22]||(v[22]=e("div",{class:"config-section"},[e("h3",null,"Configuración del Header"),e("p",{class:"section-desc"},"Personaliza la apariencia y contenido del header de tu sitio web")],-1)),e("div",ep,[e("div",op,[e("div",tp,[v[10]||(v[10]=e("label",{for:"logo-upload"},"Logo del sitio",-1)),e("div",sp,[b.value?(l(),n("div",lp,[e("img",{src:b.value,alt:"Logo preview"},null,8,ap),e("button",{onClick:o,class:"btn-remove",type:"button"},[_(z,{name:"close"})])])):(l(),n("div",np,[_(z,{name:"photo"}),v[8]||(v[8]=e("p",null,"Sube tu logo",-1))])),e("input",{type:"file",id:"logo-upload",onChange:V,accept:"image/*",class:"file-input"},null,32),e("div",ip,[e("button",{onClick:U,class:"btn-upload",type:"button"},[_(z,{name:"photo"}),v[9]||(v[9]=B(" Seleccionar desde Medios ",-1))])])])])]),e("div",rp,[e("div",dp,[v[11]||(v[11]=e("label",{for:"bg-normal"},"Color de fondo normal",-1)),e("div",up,[g(e("input",{type:"color",id:"bg-normal","onUpdate:modelValue":v[0]||(v[0]=k=>M.value.backgroundNormal=k),class:"color-picker"},null,512),[[I,M.value.backgroundNormal]]),g(e("input",{type:"text","onUpdate:modelValue":v[1]||(v[1]=k=>M.value.backgroundNormal=k),class:"color-text",placeholder:"#ffffff"},null,512),[[I,M.value.backgroundNormal]])])]),e("div",cp,[v[12]||(v[12]=e("label",{for:"bg-sticky"},"Color de fondo sticky",-1)),e("div",pp,[g(e("input",{type:"color",id:"bg-sticky","onUpdate:modelValue":v[2]||(v[2]=k=>M.value.backgroundSticky=k),class:"color-picker"},null,512),[[I,M.value.backgroundSticky]]),g(e("input",{type:"text","onUpdate:modelValue":v[3]||(v[3]=k=>M.value.backgroundSticky=k),class:"color-text",placeholder:"#0a5a39"},null,512),[[I,M.value.backgroundSticky]])])])]),e("div",vp,[e("div",mp,[v[13]||(v[13]=e("label",{for:"text-color"},"Color del texto de navegación",-1)),e("div",gp,[g(e("input",{type:"color",id:"text-color","onUpdate:modelValue":v[4]||(v[4]=k=>M.value.textColor=k),class:"color-picker"},null,512),[[I,M.value.textColor]]),g(e("input",{type:"text","onUpdate:modelValue":v[5]||(v[5]=k=>M.value.textColor=k),class:"color-text",placeholder:"#ffffff"},null,512),[[I,M.value.textColor]])])]),e("div",fp,[v[14]||(v[14]=e("label",{for:"text-hover-color"},"Color del texto al hacer hover",-1)),e("div",bp,[g(e("input",{type:"color",id:"text-hover-color","onUpdate:modelValue":v[6]||(v[6]=k=>M.value.textHoverColor=k),class:"color-picker"},null,512),[[I,M.value.textHoverColor]]),g(e("input",{type:"text","onUpdate:modelValue":v[7]||(v[7]=k=>M.value.textHoverColor=k),class:"color-text",placeholder:"#ffffff"},null,512),[[I,M.value.textHoverColor]])])])]),e("div",yp,[v[19]||(v[19]=e("h4",null,"Vista previa",-1)),e("div",kp,[e("div",{class:"preview-header normal",style:de(C.value)},[e("div",$p,[e("div",hp,[b.value?(l(),n("img",{key:0,src:b.value,alt:"Logo"},null,8,Cp)):(l(),n("span",_p,"Logo"))]),v[15]||(v[15]=e("div",{class:"preview-menu"},[e("span",null,"Inicio"),e("span",null,"Nosotros"),e("span",null,"Servicios"),e("span",null,"Contacto")],-1))])],4),v[17]||(v[17]=e("div",{class:"preview-label"},"Estado normal",-1)),e("div",{class:"preview-header sticky",style:de(S.value)},[e("div",wp,[e("div",Sp,[b.value?(l(),n("img",{key:0,src:b.value,alt:"Logo"},null,8,xp)):(l(),n("span",Ep,"Logo"))]),v[16]||(v[16]=e("div",{class:"preview-menu"},[e("span",null,"Inicio"),e("span",null,"Nosotros"),e("span",null,"Servicios"),e("span",null,"Contacto")],-1))])],4),v[18]||(v[18]=e("div",{class:"preview-label"},"Estado sticky",-1))])]),e("div",Ip,[e("button",{onClick:t,class:"btn-info",type:"button"},[_(z,{name:"eye"}),v[20]||(v[20]=B(" Vista Previa Inmediata ",-1))]),e("button",{onClick:a,class:"btn-primary",disabled:u.value},[_(z,{name:"save"}),B(" "+f(u.value?"Guardando...":"Guardar Cambios"),1)],8,Up),e("button",{onClick:L,class:"btn-secondary",type:"button"},[_(z,{name:"undo"}),v[21]||(v[21]=B(" Restaurar Defaults ",-1))])])]),_(Ue,{show:G(w),"selected-media":G(s),"type-filter":"image",multiple:!1,onClose:G($),onSelect:T},null,8,["show","selected-media","onClose"])])}}},Mp=re(Vp,[["__scopeId","data-v-b6e7d3fb"]]),Tp={class:"icon-picker"},Pp={key:1,class:"placeholder"},Bp={key:0,class:"icon-dropdown"},Ap={class:"search-box"},Lp={class:"icons-grid"},Dp=["onClick"],Rp={class:"icon-name"},Fp={__name:"IconPicker",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"Seleccionar icono"}},emits:["update:modelValue"],setup(p,{emit:u}){const c=p,b=u,i=D(!1),w=D(""),s=D(c.modelValue),r=[{name:"envelope",label:"Email",type:"fontawesome",prefix:"fas",category:"contact"},{name:"phone",label:"Teléfono",type:"fontawesome",prefix:"fas",category:"contact"},{name:"map-marker-alt",label:"Ubicación",type:"fontawesome",prefix:"fas",category:"contact"},{name:"globe",label:"Sitio Web",type:"fontawesome",prefix:"fas",category:"contact"},{name:"clock",label:"Horario",type:"fontawesome",prefix:"fas",category:"contact"},{name:"facebook-f",label:"Facebook",type:"fontawesome",prefix:"fab",category:"social"},{name:"instagram",label:"Instagram",type:"fontawesome",prefix:"fab",category:"social"},{name:"twitter",label:"Twitter",type:"fontawesome",prefix:"fab",category:"social"},{name:"linkedin-in",label:"LinkedIn",type:"fontawesome",prefix:"fab",category:"social"},{name:"whatsapp",label:"WhatsApp",type:"fontawesome",prefix:"fab",category:"social"}],$=J(()=>w.value?r.filter(V=>V.name.toLowerCase().includes(w.value.toLowerCase())||V.label.toLowerCase().includes(w.value.toLowerCase())):r),m=()=>{i.value=!i.value},M=V=>{s.value=V,b("update:modelValue",V),i.value=!1,w.value=""},C=V=>{V.target.closest(".icon-picker")||(i.value=!1)};fe(()=>{document.addEventListener("click",C)}),Re(()=>{document.removeEventListener("click",C)});const S=()=>{s.value=c.modelValue},U=()=>s.value?r.find(o=>o.name===s.value)?.type==="fontawesome"?"FontAwesomeIcon":"Icon":null,T=()=>{if(!s.value)return{};const V=r.find(o=>o.name===s.value);return V?.type==="fontawesome"?{icon:[V.prefix,V.name]}:{name:s.value}};return fe(()=>{S()}),(V,o)=>(l(),n("div",Tp,[e("div",{class:"selected-icon",onClick:m},[s.value?(l(),he(Ne(U()),Vt({key:0},T(),{class:"selected-icon-display"}),null,16)):R("",!0),s.value?R("",!0):(l(),n("span",Pp,"Seleccionar icono")),_(N,{name:"chevron-down",class:O(["dropdown-arrow",{rotated:i.value}])},null,8,["class"])]),i.value?(l(),n("div",Bp,[e("div",Ap,[g(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=t=>w.value=t),placeholder:"Buscar icono...",class:"search-input"},null,512),[[I,w.value]])]),e("div",Lp,[(l(!0),n(te,null,le($.value,t=>(l(),n("div",{key:t.name,class:O(["icon-option",{selected:t.name===s.value}]),onClick:a=>M(t.name)},[t.type==="fontawesome"?(l(),he(G(Ye),{key:0,icon:[t.prefix,t.name],class:"icon-display"},null,8,["icon"])):(l(),he(N,{key:1,name:t.name,class:"icon-display"},null,8,["name"])),e("span",Rp,f(t.label),1)],10,Dp))),128))])])):R("",!0)]))}},Fo=re(Fp,[["__scopeId","data-v-ace35bc9"]]),zp={class:"footer-config"},Gp={class:"config-form"},Np={class:"form-section"},qp={class:"form-row"},Hp={class:"form-group"},Op={class:"color-input-group"},jp={class:"form-section"},Wp={class:"form-row"},Zp={class:"form-group"},Xp={class:"form-group"},Kp={class:"editor-container"},Jp={class:"form-section"},Qp={class:"form-row"},Yp={class:"form-group"},ev={class:"form-group"},ov={class:"form-row"},tv={class:"form-group"},sv={class:"form-group"},lv={class:"form-row"},av={class:"form-group"},nv={class:"form-group"},iv={class:"form-row"},rv={class:"form-group"},dv={class:"form-group"},uv={class:"form-section"},cv={class:"form-group"},pv={class:"logo-upload-area"},vv={key:0,class:"logo-preview"},mv=["src"],gv={key:1,class:"upload-placeholder"},fv={class:"upload-buttons"},bv={class:"form-section"},yv={class:"form-group"},kv={class:"contact-items"},$v={class:"contact-item-header"},hv=["onClick"],Cv={class:"form-row"},_v={class:"form-group"},wv={class:"form-group"},Sv=["onUpdate:modelValue"],xv={class:"form-section"},Ev={class:"form-group"},Iv={class:"social-items"},Uv={class:"social-item-header"},Vv=["onClick"],Mv={class:"form-row"},Tv={class:"form-group"},Pv={class:"form-group"},Bv=["onUpdate:modelValue"],Av={class:"form-actions"},Lv=["disabled"],Dv={__name:"FooterConfig",setup(p){const u=D(!1),c=D(""),b=D(null),{showMediaPicker:i,selectedMedia:w,openMediaPicker:s,closeMediaPicker:r,getFullMediaUrl:$}=Ae(),m=D({backgroundColor:"#17a2b8",ctaTitle:"¿Hablamos?",ctaDescription:"Si necesitas estructurar tus finanzas o resolver dudas contables y tributarias, agenda una cita o déjanos tu mensaje.",logoUrl:"",locationTitle:"Ubicación",socialTitle:"Síguenos en",privacyPolicyUrl:"/privacy-policy",formLabels:{fullName:"Nombre completo",phone:"Teléfono",email:"Correo electrónico",message:"Mensaje",acceptPolicy:"Acepto las políticas de tratamiento de datos",privacyPolicyLink:"Políticas de Privacidad",submitButton:"Enviar"},contactInfo:[{icon:"map-marker-alt",text:"Cra 14 #18-50, Cali, Valle del Cauca"},{icon:"phone",text:"+57 320 8994424"},{icon:"envelope",text:"contacto@r-integra.com"}],socialLinks:[{name:"Instagram",icon:"instagram",url:"#"},{name:"Facebook",icon:"facebook-f",url:"#"},{name:"LinkedIn",icon:"linkedin-in",url:"#"}]}),M=no({content:m.value.ctaDescription,extensions:[ro],editorProps:{attributes:{class:"prose prose-sm focus:outline-none min-h-[100px] p-3"}}}),C=()=>{s({typeFilter:"image",multiple:!1,onSelect:S})},S=k=>{b.value=k,c.value=$(k),m.value.logoUrl=$(k),r()},U=k=>{const x=k.target.files[0];if(x){const oe=new FileReader;oe.onload=X=>{c.value=X.target.result,m.value.logoUrl=X.target.result},oe.readAsDataURL(x)}},T=()=>{c.value="",m.value.logoUrl="",b.value=null,document.getElementById("logo-upload").value=""},V=()=>{m.value.contactInfo.push({icon:"phone",text:"Nuevo contacto"})},o=k=>{m.value.contactInfo.splice(k,1)},t=()=>{m.value.socialLinks.push({name:"Nueva red",icon:"instagram",url:"#"})},a=k=>{m.value.socialLinks.splice(k,1)},L=k=>{const x={instagram:"Instagram","facebook-f":"Facebook","linkedin-in":"LinkedIn",twitter:"Twitter",whatsapp:"WhatsApp",globe:"Sitio Web",envelope:"Email",phone:"Teléfono","map-marker-alt":"Ubicación",clock:"Horario"},oe=m.value.socialLinks[k].icon;m.value.socialLinks[k].name=x[oe]||"Red Social"},E=()=>{const k={...m.value,ctaDescription:M.value?.getHTML()||m.value.ctaDescription};window.dispatchEvent(new CustomEvent("footerConfigChanged",{detail:k}))},d=async()=>{u.value=!0;try{const k={...m.value,ctaDescription:M.value?.getHTML()||m.value.ctaDescription};await Ee.save("footer",k,"Configuración del footer actualizada"),window.dispatchEvent(new CustomEvent("footerConfigChanged",{detail:k})),alert("Configuración del footer guardada exitosamente")}catch(k){console.error("Error al guardar la configuración del footer:",k),alert("Error al guardar la configuración del footer")}finally{u.value=!1}},v=()=>{m.value={backgroundColor:"#17a2b8",ctaTitle:"¿Hablamos?",ctaDescription:"Si necesitas estructurar tus finanzas o resolver dudas contables y tributarias, agenda una cita o déjanos tu mensaje.",logoUrl:"",locationTitle:"Ubicación",socialTitle:"Síguenos en",privacyPolicyUrl:"/privacy-policy",formLabels:{fullName:"Nombre completo",phone:"Teléfono",email:"Correo electrónico",message:"Mensaje",acceptPolicy:"Acepto las políticas de tratamiento de datos",privacyPolicyLink:"Políticas de Privacidad",submitButton:"Enviar"},contactInfo:[{icon:"map-marker-alt",text:"Cra 14 #18-50, Cali, Valle del Cauca"},{icon:"phone",text:"+57 320 8994424"},{icon:"envelope",text:"contacto@r-integra.com"}],socialLinks:[{name:"Instagram",icon:"instagram",url:"#"},{name:"Facebook",icon:"facebook-f",url:"#"},{name:"LinkedIn",icon:"linkedin-in",url:"#"}]},M.value?.commands.setContent(m.value.ctaDescription),T()},z=async()=>{try{console.log("🔍 FooterConfig: Cargando configuración desde API...");const k=await Ee.getActive("footer");if(console.log("📰 FooterConfig: Respuesta de API:",k.data),k.data&&k.data.data&&k.data.data.config_data){const x=k.data.data.config_data;console.log("⚙️ FooterConfig: Configuración recibida:",x),console.log("🎨 FooterConfig: Color de fondo anterior:",m.value.backgroundColor),m.value={...m.value,...x},console.log("🎨 FooterConfig: Color de fondo después:",m.value.backgroundColor),x.logoUrl&&(c.value=x.logoUrl),x.ctaDescription&&M.value?.commands.setContent(x.ctaDescription),console.log("✅ FooterConfig: Configuración cargada exitosamente")}else console.log("⚠️ FooterConfig: No hay configuración activa en la respuesta")}catch(k){console.error("❌ FooterConfig: Error al cargar configuración:",k)}};return fe(async()=>{await z()}),Go(()=>{M.value&&M.value.destroy()}),(k,x)=>{const oe=Ie("Icon");return l(),n("div",zp,[x[43]||(x[43]=e("div",{class:"config-section"},[e("h3",null,"Configuración del Footer"),e("p",{class:"section-desc"},"Personaliza el contenido y apariencia del footer de tu sitio web")],-1)),e("div",Gp,[e("div",Np,[x[14]||(x[14]=e("h4",null,"Apariencia General",-1)),e("div",qp,[e("div",Hp,[x[13]||(x[13]=e("label",{for:"bg-color"},"Color de fondo",-1)),e("div",Op,[g(e("input",{type:"color",id:"bg-color","onUpdate:modelValue":x[0]||(x[0]=X=>m.value.backgroundColor=X),class:"color-picker"},null,512),[[I,m.value.backgroundColor]]),g(e("input",{type:"text","onUpdate:modelValue":x[1]||(x[1]=X=>m.value.backgroundColor=X),class:"color-text",placeholder:"#17a2b8"},null,512),[[I,m.value.backgroundColor]])])])])]),e("div",jp,[x[17]||(x[17]=e("h4",null,"Sección ¿Hablamos?",-1)),e("div",Wp,[e("div",Zp,[x[15]||(x[15]=e("label",{for:"cta-title"},"Título principal",-1)),g(e("input",{type:"text",id:"cta-title","onUpdate:modelValue":x[2]||(x[2]=X=>m.value.ctaTitle=X),class:"form-input",placeholder:"¿Hablamos?"},null,512),[[I,m.value.ctaTitle]])])]),e("div",Xp,[x[16]||(x[16]=e("label",null,"Descripción CTA",-1)),e("div",Kp,[_(G(io),{editor:G(M)},null,8,["editor"])])])]),e("div",Jp,[x[26]||(x[26]=e("h4",null,"Formulario de Contacto",-1)),e("div",Qp,[e("div",Yp,[x[18]||(x[18]=e("label",{for:"label-name"},"Label Nombre",-1)),g(e("input",{type:"text",id:"label-name","onUpdate:modelValue":x[3]||(x[3]=X=>m.value.formLabels.fullName=X),class:"form-input"},null,512),[[I,m.value.formLabels.fullName]])]),e("div",ev,[x[19]||(x[19]=e("label",{for:"label-phone"},"Label Teléfono",-1)),g(e("input",{type:"text",id:"label-phone","onUpdate:modelValue":x[4]||(x[4]=X=>m.value.formLabels.phone=X),class:"form-input"},null,512),[[I,m.value.formLabels.phone]])])]),e("div",ov,[e("div",tv,[x[20]||(x[20]=e("label",{for:"label-email"},"Label Email",-1)),g(e("input",{type:"text",id:"label-email","onUpdate:modelValue":x[5]||(x[5]=X=>m.value.formLabels.email=X),class:"form-input"},null,512),[[I,m.value.formLabels.email]])]),e("div",sv,[x[21]||(x[21]=e("label",{for:"label-message"},"Label Mensaje",-1)),g(e("input",{type:"text",id:"label-message","onUpdate:modelValue":x[6]||(x[6]=X=>m.value.formLabels.message=X),class:"form-input"},null,512),[[I,m.value.formLabels.message]])])]),e("div",lv,[e("div",av,[x[22]||(x[22]=e("label",{for:"accept-policy"},"Texto políticas",-1)),g(e("input",{type:"text",id:"accept-policy","onUpdate:modelValue":x[7]||(x[7]=X=>m.value.formLabels.acceptPolicy=X),class:"form-input"},null,512),[[I,m.value.formLabels.acceptPolicy]])]),e("div",nv,[x[23]||(x[23]=e("label",{for:"privacy-link"},"Texto enlace privacidad",-1)),g(e("input",{type:"text",id:"privacy-link","onUpdate:modelValue":x[8]||(x[8]=X=>m.value.formLabels.privacyPolicyLink=X),class:"form-input"},null,512),[[I,m.value.formLabels.privacyPolicyLink]])])]),e("div",iv,[e("div",rv,[x[24]||(x[24]=e("label",{for:"privacy-url"},"URL políticas de privacidad",-1)),g(e("input",{type:"url",id:"privacy-url","onUpdate:modelValue":x[9]||(x[9]=X=>m.value.privacyPolicyUrl=X),class:"form-input"},null,512),[[I,m.value.privacyPolicyUrl]])]),e("div",dv,[x[25]||(x[25]=e("label",{for:"submit-btn"},"Texto botón enviar",-1)),g(e("input",{type:"text",id:"submit-btn","onUpdate:modelValue":x[10]||(x[10]=X=>m.value.formLabels.submitButton=X),class:"form-input"},null,512),[[I,m.value.formLabels.submitButton]])])])]),e("div",uv,[x[30]||(x[30]=e("h4",null,"Logo",-1)),e("div",cv,[x[29]||(x[29]=e("label",{for:"logo-upload"},"Logo del footer",-1)),e("div",pv,[c.value?(l(),n("div",vv,[e("img",{src:c.value,alt:"Logo preview"},null,8,mv),e("button",{onClick:T,class:"btn-remove",type:"button"},[_(oe,{name:"close"})])])):(l(),n("div",gv,[_(oe,{name:"photo"}),x[27]||(x[27]=e("p",null,"Sube tu logo",-1))])),e("input",{type:"file",id:"logo-upload",onChange:U,accept:"image/*",class:"file-input"},null,32),e("div",fv,[e("button",{onClick:C,class:"btn-upload",type:"button"},[_(oe,{name:"photo"}),x[28]||(x[28]=B(" Seleccionar desde Medios ",-1))])])])])]),e("div",bv,[x[35]||(x[35]=e("h4",null,"Información de Contacto",-1)),e("div",yv,[x[31]||(x[31]=e("label",{for:"location-title"},"Título sección",-1)),g(e("input",{type:"text",id:"location-title","onUpdate:modelValue":x[11]||(x[11]=X=>m.value.locationTitle=X),class:"form-input"},null,512),[[I,m.value.locationTitle]])]),e("div",kv,[(l(!0),n(te,null,le(m.value.contactInfo,(X,K)=>(l(),n("div",{key:K,class:"contact-item-config"},[e("div",$v,[e("h5",null,"Contacto "+f(K+1),1),e("button",{onClick:Q=>o(K),class:"btn-remove-small",type:"button"},[_(oe,{name:"delete"})],8,hv)]),e("div",Cv,[e("div",_v,[x[32]||(x[32]=e("label",null,"Icono",-1)),_(Fo,{modelValue:X.icon,"onUpdate:modelValue":Q=>X.icon=Q},null,8,["modelValue","onUpdate:modelValue"])]),e("div",wv,[x[33]||(x[33]=e("label",null,"Texto",-1)),g(e("input",{type:"text","onUpdate:modelValue":Q=>X.text=Q,class:"form-input"},null,8,Sv),[[I,X.text]])])])]))),128)),e("button",{onClick:V,class:"btn-add",type:"button"},[_(oe,{name:"plus"}),x[34]||(x[34]=B(" Agregar información de contacto ",-1))])])]),e("div",xv,[x[40]||(x[40]=e("h4",null,"Redes Sociales",-1)),e("div",Ev,[x[36]||(x[36]=e("label",{for:"social-title"},"Título sección",-1)),g(e("input",{type:"text",id:"social-title","onUpdate:modelValue":x[12]||(x[12]=X=>m.value.socialTitle=X),class:"form-input"},null,512),[[I,m.value.socialTitle]])]),e("div",Iv,[(l(!0),n(te,null,le(m.value.socialLinks,(X,K)=>(l(),n("div",{key:K,class:"social-item-config"},[e("div",Uv,[e("h5",null,f(X.name),1),e("button",{onClick:Q=>a(K),class:"btn-remove-small",type:"button"},[_(oe,{name:"delete"})],8,Vv)]),e("div",Mv,[e("div",Tv,[x[37]||(x[37]=e("label",null,"Icono de Red Social",-1)),_(Fo,{modelValue:X.icon,"onUpdate:modelValue":[Q=>X.icon=Q,Q=>L(K)]},null,8,["modelValue","onUpdate:modelValue"])]),e("div",Pv,[x[38]||(x[38]=e("label",null,"URL",-1)),g(e("input",{type:"url","onUpdate:modelValue":Q=>X.url=Q,class:"form-input",placeholder:"https://..."},null,8,Bv),[[I,X.url]])])])]))),128)),e("button",{onClick:t,class:"btn-add",type:"button"},[_(oe,{name:"plus"}),x[39]||(x[39]=B(" Agregar red social ",-1))])])]),e("div",Av,[e("button",{onClick:E,class:"btn-info",type:"button"},[_(oe,{name:"eye"}),x[41]||(x[41]=B(" Vista Previa ",-1))]),e("button",{onClick:d,class:"btn-primary",disabled:u.value},[_(oe,{name:"save"}),B(" "+f(u.value?"Guardando...":"Guardar Cambios"),1)],8,Lv),e("button",{onClick:v,class:"btn-secondary",type:"button"},[_(oe,{name:"undo"}),x[42]||(x[42]=B(" Restaurar Default ",-1))])])]),_(Ue,{show:G(i),"selected-media":G(w),"type-filter":"image",multiple:!1,onClose:G(r),onSelect:S},null,8,["show","selected-media","onClose"])])}}},Rv=re(Dv,[["__scopeId","data-v-1204dfe3"]]),Fv={class:"site-settings"},zv={class:"config-form"},Gv={class:"form-row"},Nv={class:"form-group"},qv={class:"form-group"},Hv={class:"form-row"},Ov={class:"form-group"},jv={class:"form-row"},Wv={class:"form-group"},Zv={class:"form-group"},Xv={class:"form-row"},Kv={class:"form-group"},Jv={class:"form-group"},Qv={class:"form-section"},Yv={class:"form-group"},em={class:"media-selector"},om={key:0,class:"selected-media"},tm=["src"],sm={key:1,class:"media-placeholder"},lm={class:"form-actions"},am=["disabled"],nm=ve({__name:"SiteSettings",setup(p){const u=D(!1),{showMediaPicker:c,selectedMedia:b,openMediaPicker:i,closeMediaPicker:w,getFullMediaUrl:s}=Ae(),{updateFavicon:r}=qo(),$=D({siteName:"R-Integra",tagline:"Solidez contable, proyección empresarial",description:"",contactEmail:"",contactPhone:"",address:"",timezone:"America/Mexico_City",favicon:""}),m=async()=>{u.value=!0;try{await Ee.save("site",$.value,"Configuración del sitio actualizada"),$.value.favicon&&r($.value.favicon),$.value.siteName&&(document.title=$.value.siteName),alert("Configuración guardada exitosamente")}catch(o){console.error("Error al guardar la configuración:",o),alert("Error al guardar la configuración")}finally{u.value=!1}},M=J(()=>$.value.favicon),C=()=>{i({typeFilter:"image",multiple:!1,onSelect:S})},S=o=>{$.value.favicon=s(o),w()},U=()=>{$.value.favicon=""},T=()=>{$.value={siteName:"R-Integra",tagline:"Solidez contable, proyección empresarial",description:"",contactEmail:"",contactPhone:"",address:"",timezone:"America/Mexico_City",favicon:""}},V=async()=>{try{const o=await Ee.getActive("site");o.data?.data?.config_data&&($.value={...$.value,...o.data.data.config_data})}catch(o){console.error("Error al cargar configuración:",o)}};return fe(()=>{V()}),(o,t)=>(l(),n("div",Fv,[t[23]||(t[23]=e("div",{class:"config-section"},[e("h3",null,"Configuración General del Sitio"),e("p",{class:"section-desc"},"Configura la información básica y general del sitio web")],-1)),e("div",zv,[e("div",Gv,[e("div",Nv,[t[7]||(t[7]=e("label",{for:"site-name"},"Nombre del sitio",-1)),g(e("input",{type:"text",id:"site-name","onUpdate:modelValue":t[0]||(t[0]=a=>$.value.siteName=a),class:"form-input",placeholder:"R-Integra"},null,512),[[I,$.value.siteName]])]),e("div",qv,[t[8]||(t[8]=e("label",{for:"site-tagline"},"Eslogan del sitio",-1)),g(e("input",{type:"text",id:"site-tagline","onUpdate:modelValue":t[1]||(t[1]=a=>$.value.tagline=a),class:"form-input",placeholder:"Solidez contable, proyección empresarial"},null,512),[[I,$.value.tagline]])])]),e("div",Hv,[e("div",Ov,[t[9]||(t[9]=e("label",{for:"site-description"},"Descripción del sitio",-1)),g(e("textarea",{id:"site-description","onUpdate:modelValue":t[2]||(t[2]=a=>$.value.description=a),class:"form-textarea",placeholder:"Descripción general del sitio web",rows:"4"},null,512),[[I,$.value.description]])])]),e("div",jv,[e("div",Wv,[t[10]||(t[10]=e("label",{for:"contact-email"},"Email de contacto",-1)),g(e("input",{type:"email",id:"contact-email","onUpdate:modelValue":t[3]||(t[3]=a=>$.value.contactEmail=a),class:"form-input",placeholder:"contacto@r-integra.com"},null,512),[[I,$.value.contactEmail]])]),e("div",Zv,[t[11]||(t[11]=e("label",{for:"contact-phone"},"Teléfono de contacto",-1)),g(e("input",{type:"tel",id:"contact-phone","onUpdate:modelValue":t[4]||(t[4]=a=>$.value.contactPhone=a),class:"form-input",placeholder:"+1 234 567 8900"},null,512),[[I,$.value.contactPhone]])])]),e("div",Xv,[e("div",Kv,[t[12]||(t[12]=e("label",{for:"address"},"Dirección",-1)),g(e("input",{type:"text",id:"address","onUpdate:modelValue":t[5]||(t[5]=a=>$.value.address=a),class:"form-input",placeholder:"Dirección de la empresa"},null,512),[[I,$.value.address]])]),e("div",Jv,[t[14]||(t[14]=e("label",{for:"timezone"},"Zona horaria",-1)),g(e("select",{id:"timezone","onUpdate:modelValue":t[6]||(t[6]=a=>$.value.timezone=a),class:"form-select"},t[13]||(t[13]=[Se('<option value="America/New_York" data-v-d046a3bd>Eastern Time (ET)</option><option value="America/Chicago" data-v-d046a3bd>Central Time (CT)</option><option value="America/Denver" data-v-d046a3bd>Mountain Time (MT)</option><option value="America/Los_Angeles" data-v-d046a3bd>Pacific Time (PT)</option><option value="America/Mexico_City" data-v-d046a3bd>Mexico City</option><option value="America/Bogota" data-v-d046a3bd>Bogotá</option><option value="America/Lima" data-v-d046a3bd>Lima</option><option value="Europe/Madrid" data-v-d046a3bd>Madrid</option>',8)]),512),[[ie,$.value.timezone]])])]),e("div",Qv,[t[20]||(t[20]=e("h4",null,"Identidad Visual",-1)),e("div",Yv,[t[18]||(t[18]=e("label",null,"Favicon del sitio",-1)),e("div",em,[M.value?(l(),n("div",om,[e("img",{src:M.value,class:"media-preview favicon-preview",alt:"Favicon"},null,8,tm),e("button",{onClick:U,class:"btn-remove",type:"button"},t[15]||(t[15]=[e("i",{class:"fas fa-times"},null,-1)]))])):(l(),n("div",sm,t[16]||(t[16]=[e("i",{class:"fas fa-image"},null,-1),e("p",null,"No hay favicon seleccionado",-1)]))),e("button",{onClick:C,class:"btn-media",type:"button"},t[17]||(t[17]=[e("i",{class:"fas fa-image"},null,-1),B(" Seleccionar favicon ",-1)]))]),t[19]||(t[19]=e("small",{class:"form-help"}," Recomendado: imagen cuadrada 32x32px o 64x64px en formato PNG o ICO ",-1))])]),e("div",lm,[e("button",{onClick:m,class:"btn-primary",disabled:u.value},[t[21]||(t[21]=e("i",{class:"fas fa-save"},null,-1)),B(" "+f(u.value?"Guardando...":"Guardar Configuración"),1)],8,am),e("button",{onClick:T,class:"btn-secondary",type:"button"},t[22]||(t[22]=[e("i",{class:"fas fa-undo"},null,-1),B(" Restaurar Defaults ",-1)]))])]),_(Ue,{show:G(c),"selected-media":G(b),"type-filter":"image",multiple:!1,onClose:G(w),onSelect:S},null,8,["show","selected-media","onClose"])]))}}),im=re(nm,[["__scopeId","data-v-d046a3bd"]]),rm={class:"seo-settings"},dm={class:"config-form"},um={class:"form-section"},cm={class:"form-group"},pm={class:"form-help"},vm={class:"form-group"},mm={class:"form-help"},gm={class:"form-group"},fm={class:"form-section"},bm={class:"form-row"},ym={class:"form-group"},km={class:"form-group"},$m={class:"form-group"},hm={class:"form-group"},Cm={class:"media-selector"},_m={key:0,class:"selected-media"},wm=["src"],Sm={key:1,class:"media-placeholder"},xm={class:"form-section"},Em={class:"form-row"},Im={class:"form-group"},Um={class:"form-group"},Vm={class:"form-section"},Mm={class:"form-row"},Tm={class:"form-group"},Pm={class:"form-group"},Bm={class:"form-actions"},Am=["disabled"],Lm=ve({__name:"SeoSettings",setup(p){const u=D(!1),{showMediaPicker:c,selectedMedia:b,openMediaPicker:i,closeMediaPicker:w,getFullMediaUrl:s}=Ae(),r=D({defaultTitle:"R-Integra - Solidez contable, proyección empresarial",defaultDescription:"",keywords:"",robots:"index, follow",canonicalUrl:"",openGraph:{title:"",description:"",type:"website",image:""},schema:{businessName:"R-Integra",businessType:"AccountingService"}}),$=J(()=>r.value.openGraph.image),m=()=>{i({typeFilter:"image",multiple:!1,onSelect:M})},M=V=>{r.value.openGraph.image=s(V),w()},C=()=>{r.value.openGraph.image=""},S=async()=>{u.value=!0;try{await Ee.save("seo",r.value,"Configuración SEO actualizada"),alert("Configuración SEO guardada exitosamente")}catch(V){console.error("Error al guardar la configuración SEO:",V),alert("Error al guardar la configuración SEO")}finally{u.value=!1}},U=()=>{r.value={defaultTitle:"R-Integra - Solidez contable, proyección empresarial",defaultDescription:"",keywords:"",robots:"index, follow",canonicalUrl:"",openGraph:{title:"",description:"",type:"website",image:""},schema:{businessName:"R-Integra",businessType:"AccountingService"}}},T=async()=>{try{const V=await Ee.getActive("seo");V.data?.data?.config_data&&(r.value={...r.value,...V.data.data.config_data})}catch(V){console.error("Error al cargar configuración SEO:",V)}};return fe(()=>{T()}),(V,o)=>(l(),n("div",rm,[o[35]||(o[35]=e("div",{class:"config-section"},[e("h3",null,"Configuración SEO"),e("p",{class:"section-desc"},"Optimiza tu sitio web para motores de búsqueda")],-1)),e("div",dm,[e("div",um,[o[14]||(o[14]=e("h4",null,"Meta Tags Globales",-1)),e("div",cm,[o[10]||(o[10]=e("label",{for:"meta-title"},"Título por defecto (Meta Title)",-1)),g(e("input",{type:"text",id:"meta-title","onUpdate:modelValue":o[0]||(o[0]=t=>r.value.defaultTitle=t),class:"form-input",placeholder:"R-Integra - Solidez contable, proyección empresarial",maxlength:"60"},null,512),[[I,r.value.defaultTitle]]),e("small",pm," Recomendado: 50-60 caracteres. Actual: "+f(r.value.defaultTitle.length),1)]),e("div",vm,[o[11]||(o[11]=e("label",{for:"meta-description"},"Descripción por defecto (Meta Description)",-1)),g(e("textarea",{id:"meta-description","onUpdate:modelValue":o[1]||(o[1]=t=>r.value.defaultDescription=t),class:"form-textarea",placeholder:"Servicios contables y de asesoría empresarial profesional...",maxlength:"160",rows:"3"},null,512),[[I,r.value.defaultDescription]]),e("small",mm," Recomendado: 150-160 caracteres. Actual: "+f(r.value.defaultDescription.length),1)]),e("div",gm,[o[12]||(o[12]=e("label",{for:"meta-keywords"},"Palabras clave (Keywords)",-1)),g(e("input",{type:"text",id:"meta-keywords","onUpdate:modelValue":o[2]||(o[2]=t=>r.value.keywords=t),class:"form-input",placeholder:"contabilidad, asesoría empresarial, consultoría financiera"},null,512),[[I,r.value.keywords]]),o[13]||(o[13]=e("small",{class:"form-help"}," Separa las palabras clave con comas ",-1))])]),e("div",fm,[o[24]||(o[24]=e("h4",null,"Open Graph (Redes Sociales)",-1)),e("div",bm,[e("div",ym,[o[15]||(o[15]=e("label",{for:"og-title"},"Título para redes sociales",-1)),g(e("input",{type:"text",id:"og-title","onUpdate:modelValue":o[3]||(o[3]=t=>r.value.openGraph.title=t),class:"form-input",placeholder:"R-Integra - Servicios Contables"},null,512),[[I,r.value.openGraph.title]])]),e("div",km,[o[17]||(o[17]=e("label",{for:"og-type"},"Tipo de contenido",-1)),g(e("select",{id:"og-type","onUpdate:modelValue":o[4]||(o[4]=t=>r.value.openGraph.type=t),class:"form-select"},o[16]||(o[16]=[e("option",{value:"website"},"Sitio Web",-1),e("option",{value:"business.business"},"Negocio",-1),e("option",{value:"article"},"Artículo",-1)]),512),[[ie,r.value.openGraph.type]])])]),e("div",$m,[o[18]||(o[18]=e("label",{for:"og-description"},"Descripción para redes sociales",-1)),g(e("textarea",{id:"og-description","onUpdate:modelValue":o[5]||(o[5]=t=>r.value.openGraph.description=t),class:"form-textarea",placeholder:"Descripción optimizada para redes sociales",rows:"3"},null,512),[[I,r.value.openGraph.description]])]),e("div",hm,[o[22]||(o[22]=e("label",null,"Imagen por defecto para redes sociales",-1)),e("div",Cm,[$.value?(l(),n("div",_m,[e("img",{src:$.value,class:"media-preview",alt:"OG Image"},null,8,wm),e("button",{onClick:C,class:"btn-remove",type:"button"},o[19]||(o[19]=[e("i",{class:"fas fa-times"},null,-1)]))])):(l(),n("div",Sm,o[20]||(o[20]=[e("i",{class:"fas fa-image"},null,-1),e("p",null,"No hay imagen seleccionada",-1)]))),e("button",{onClick:m,class:"btn-media",type:"button"},o[21]||(o[21]=[e("i",{class:"fas fa-image"},null,-1),B(" Seleccionar imagen ",-1)]))]),o[23]||(o[23]=e("small",{class:"form-help"}," Recomendado: 1200x630px para mejor visualización en redes sociales ",-1))])]),e("div",xm,[o[28]||(o[28]=e("h4",null,"Configuración Técnica",-1)),e("div",Em,[e("div",Im,[o[26]||(o[26]=e("label",{for:"robots"},"Robots Meta Tag",-1)),g(e("select",{id:"robots","onUpdate:modelValue":o[6]||(o[6]=t=>r.value.robots=t),class:"form-select"},o[25]||(o[25]=[e("option",{value:"index, follow"},"Indexar y seguir enlaces",-1),e("option",{value:"index, nofollow"},"Indexar pero no seguir enlaces",-1),e("option",{value:"noindex, follow"},"No indexar pero seguir enlaces",-1),e("option",{value:"noindex, nofollow"},"No indexar ni seguir enlaces",-1)]),512),[[ie,r.value.robots]])]),e("div",Um,[o[27]||(o[27]=e("label",{for:"canonical"},"URL Canónica base",-1)),g(e("input",{type:"url",id:"canonical","onUpdate:modelValue":o[7]||(o[7]=t=>r.value.canonicalUrl=t),class:"form-input",placeholder:"https://www.r-integra.com"},null,512),[[I,r.value.canonicalUrl]])])])]),e("div",Vm,[o[32]||(o[32]=e("h4",null,"Schema.org (Datos Estructurados)",-1)),e("div",Mm,[e("div",Tm,[o[29]||(o[29]=e("label",{for:"business-name"},"Nombre del negocio",-1)),g(e("input",{type:"text",id:"business-name","onUpdate:modelValue":o[8]||(o[8]=t=>r.value.schema.businessName=t),class:"form-input",placeholder:"R-Integra"},null,512),[[I,r.value.schema.businessName]])]),e("div",Pm,[o[31]||(o[31]=e("label",{for:"business-type"},"Tipo de negocio",-1)),g(e("select",{id:"business-type","onUpdate:modelValue":o[9]||(o[9]=t=>r.value.schema.businessType=t),class:"form-select"},o[30]||(o[30]=[e("option",{value:"ProfessionalService"},"Servicio Profesional",-1),e("option",{value:"AccountingService"},"Servicio Contable",-1),e("option",{value:"FinancialService"},"Servicio Financiero",-1),e("option",{value:"ConsultingService"},"Servicio de Consultoría",-1)]),512),[[ie,r.value.schema.businessType]])])])]),e("div",Bm,[e("button",{onClick:S,class:"btn-primary",disabled:u.value},[o[33]||(o[33]=e("i",{class:"fas fa-save"},null,-1)),B(" "+f(u.value?"Guardando...":"Guardar Configuración SEO"),1)],8,Am),e("button",{onClick:U,class:"btn-secondary",type:"button"},o[34]||(o[34]=[e("i",{class:"fas fa-undo"},null,-1),B(" Restaurar Defaults ",-1)]))])]),_(Ue,{show:G(c),"selected-media":G(b),"type-filter":"image",multiple:!1,onClose:G(w),onSelect:M},null,8,["show","selected-media","onClose"])]))}}),Dm=re(Lm,[["__scopeId","data-v-85b9cf8b"]]),Rm={class:"globals-config"},Fm={class:"config-form"},zm={class:"form-section"},Gm={class:"form-group"},Nm={class:"font-selector"},qm={class:"typography-elements"},Hm={class:"elements-grid"},Om={class:"form-group"},jm=["for"],Wm=["id","onUpdate:modelValue"],Zm={class:"form-group"},Xm=["for"],Km={class:"size-input-group"},Jm=["id","onUpdate:modelValue"],Qm=["onUpdate:modelValue"],Ym={class:"form-group"},eg=["for"],og=["id","onUpdate:modelValue"],tg={class:"form-group"},sg=["for"],lg={class:"size-input-group"},ag=["id","onUpdate:modelValue"],ng=["onUpdate:modelValue"],ig={class:"element-preview"},rg={class:"form-section"},dg={class:"color-palette"},ug=["for"],cg={class:"color-input-group"},pg=["id","onUpdate:modelValue"],vg=["onUpdate:modelValue"],mg={class:"color-usage"},gg={class:"usage-label"},fg={class:"form-section"},bg={class:"button-styles"},yg={class:"button-config"},kg={class:"button-options"},$g={class:"form-row"},hg={class:"form-group"},Cg={class:"color-input-group"},_g={class:"form-group"},wg={class:"color-input-group"},Sg={class:"form-row"},xg={class:"form-group"},Eg={class:"form-group"},Ig={class:"button-preview"},Ug={class:"button-config"},Vg={class:"button-options"},Mg={class:"form-row"},Tg={class:"form-group"},Pg={class:"color-input-group"},Bg={class:"form-group"},Ag={class:"color-input-group"},Lg={class:"form-group"},Dg={class:"button-preview"},Rg={class:"button-config"},Fg={class:"button-options"},zg={class:"form-row"},Gg={class:"form-group"},Ng={class:"color-input-group"},qg={class:"form-group"},Hg={class:"color-input-group"},Og={class:"form-row"},jg={class:"form-group"},Wg={class:"color-input-group"},Zg={class:"form-group"},Xg={class:"color-input-group"},Kg={class:"form-group"},Jg={class:"button-preview"},Qg={class:"form-actions"},Yg=["disabled"],ef={__name:"GlobalsConfig",setup(p){const u=D(!1),{globalsConfig:c,saveGlobalsConfig:b,loadGlobalsConfig:i}=Ho(),w=V=>["Primario","Secundario","Éxito","Peligro","Advertencia","Info","Oscuro"][V]||`Color ${V+1}`,s=()=>({border:`${c.value.buttons.outline.borderWidth}px solid ${c.value.buttons.outline.borderColor}`,color:c.value.buttons.outline.textColor,backgroundColor:"transparent",borderRadius:`${c.value.buttons.outline.borderRadius}px`,padding:"0.75rem 1.5rem",fontFamily:c.value.fontFamily,cursor:"pointer",transition:"all 0.3s ease"}),r=()=>({backgroundColor:c.value.buttons.flat.backgroundColor,color:c.value.buttons.flat.textColor,border:"none",borderRadius:`${c.value.buttons.flat.borderRadius}px`,padding:"0.75rem 1.5rem",fontFamily:c.value.fontFamily,cursor:"pointer",transition:"all 0.3s ease"}),$=()=>({background:`linear-gradient(135deg, ${c.value.buttons.gradient.color1} 0%, ${c.value.buttons.gradient.color2} 50%, ${c.value.buttons.gradient.color3} 100%)`,color:c.value.buttons.gradient.textColor,border:"none",borderRadius:`${c.value.buttons.gradient.borderRadius}px`,padding:"0.75rem 1.5rem",fontFamily:c.value.fontFamily,cursor:"pointer",transition:"all 0.3s ease"}),m=V=>({h1:"Título H1",h2:"Título H2",h3:"Título H3",h4:"Título H4",h5:"Título H5",h6:"Título H6",p:"Párrafo"})[V]||V.toUpperCase(),M=V=>({h1:"Título Principal H1",h2:"Subtítulo H2",h3:"Encabezado H3",h4:"Título H4",h5:"Subtítulo H5",h6:"Encabezado H6",p:"Este es un párrafo de ejemplo que muestra cómo se ve el texto con la configuración aplicada."})[V]||`Texto ${V.toUpperCase()}`,C=()=>{document.documentElement.style.setProperty("--base-font-family",c.value.baseFontFamily),Object.entries(c.value.typography).forEach(([V,o])=>{const t=o.fontFamily==="inherit"?c.value.baseFontFamily:o.fontFamily,a=o.fontWeight==="inherit"?"normal":o.fontWeight;document.documentElement.style.setProperty(`--font-family-${V}`,t),document.documentElement.style.setProperty(`--font-size-${V}`,`${o.fontSize}px`),document.documentElement.style.setProperty(`--font-weight-${V}`,a),document.documentElement.style.setProperty(`--letter-spacing-${V}`,`${o.letterSpacing}px`)}),c.value.colorPalette.forEach((V,o)=>{document.documentElement.style.setProperty(`--color-${o+1}`,V)})},S=()=>{C(),window.dispatchEvent(new CustomEvent("globalsConfigChanged",{detail:c.value}))},U=async()=>{u.value=!0;try{await b(c.value,"Configuración guardada desde panel admin")?(window.dispatchEvent(new CustomEvent("globalsConfigChanged",{detail:c.value})),alert("Configuración global guardada exitosamente en la base de datos")):alert("Error al guardar la configuración en la base de datos")}catch(V){console.error("Error saving config:",V),alert("Error al guardar la configuración global")}finally{u.value=!1}},T=()=>{c.value={baseFontFamily:"'Lato', sans-serif",typography:{h1:{fontFamily:"inherit",fontSize:48,fontWeight:"700",letterSpacing:0},h2:{fontFamily:"inherit",fontSize:36,fontWeight:"600",letterSpacing:0},h3:{fontFamily:"inherit",fontSize:28,fontWeight:"600",letterSpacing:0},h4:{fontFamily:"inherit",fontSize:24,fontWeight:"600",letterSpacing:0},h5:{fontFamily:"inherit",fontSize:20,fontWeight:"600",letterSpacing:0},h6:{fontFamily:"inherit",fontSize:18,fontWeight:"600",letterSpacing:0},p:{fontFamily:"inherit",fontSize:16,fontWeight:"400",letterSpacing:0}},colorPalette:["#007bff","#17a2b8","#28a745","#dc3545","#ffc107","#6c757d","#343a40"],buttons:{outline:{borderColor:"#007bff",textColor:"#007bff",borderRadius:8,borderWidth:2},flat:{backgroundColor:"#007bff",textColor:"#ffffff",borderRadius:8},gradient:{color1:"#007bff",color2:"#0056b3",color3:"#004085",textColor:"#ffffff",borderRadius:8}}}};return fe(async()=>{await i(),C()}),(V,o)=>(l(),n("div",Rm,[o[51]||(o[51]=e("div",{class:"config-section"},[e("h3",null,"Configuración Global"),e("p",{class:"section-desc"},"Personaliza la tipografía, colores y estilos globales del sitio web")],-1)),e("div",Fm,[e("div",zm,[o[28]||(o[28]=e("h4",null,"Tipografías",-1)),e("div",Gm,[o[22]||(o[22]=e("label",{for:"base-font-family"},"Fuente base del sitio",-1)),e("div",Nm,[g(e("select",{"onUpdate:modelValue":o[0]||(o[0]=t=>G(c).baseFontFamily=t),class:"font-select",onChange:C},o[21]||(o[21]=[Se('<optgroup label="Google Fonts Sans-Serif" data-v-06ba73ed><option value="&#39;Lato&#39;, sans-serif" data-v-06ba73ed>Lato</option><option value="&#39;Open Sans&#39;, sans-serif" data-v-06ba73ed>Open Sans</option><option value="&#39;Roboto&#39;, sans-serif" data-v-06ba73ed>Roboto</option><option value="&#39;Montserrat&#39;, sans-serif" data-v-06ba73ed>Montserrat</option><option value="&#39;Poppins&#39;, sans-serif" data-v-06ba73ed>Poppins</option><option value="&#39;Nunito&#39;, sans-serif" data-v-06ba73ed>Nunito</option><option value="&#39;Inter&#39;, sans-serif" data-v-06ba73ed>Inter</option><option value="&#39;Work Sans&#39;, sans-serif" data-v-06ba73ed>Work Sans</option><option value="&#39;Source Sans Pro&#39;, sans-serif" data-v-06ba73ed>Source Sans Pro</option></optgroup><optgroup label="Google Fonts Serif" data-v-06ba73ed><option value="&#39;PT Serif&#39;, serif" data-v-06ba73ed>PT Serif</option><option value="&#39;Playfair Display&#39;, serif" data-v-06ba73ed>Playfair Display</option><option value="Georgia, serif" data-v-06ba73ed>Georgia</option><option value="&#39;Times New Roman&#39;, serif" data-v-06ba73ed>Times New Roman</option></optgroup><optgroup label="Fuentes del Sistema" data-v-06ba73ed><option value="Arial, sans-serif" data-v-06ba73ed>Arial</option><option value="Helvetica, sans-serif" data-v-06ba73ed>Helvetica</option><option value="&#39;Courier New&#39;, monospace" data-v-06ba73ed>Courier New</option></optgroup>',3)]),544),[[ie,G(c).baseFontFamily]]),e("div",{class:"font-preview",style:de({fontFamily:G(c).baseFontFamily})}," Fuente base para el cuerpo del sitio web ",4)])]),e("div",qm,[o[27]||(o[27]=e("h5",null,"Configuración Individual de Elementos",-1)),e("div",Hm,[(l(!0),n(te,null,le(G(c).typography,(t,a)=>(l(),n("div",{class:"element-config",key:a},[e("h6",null,f(m(a)),1),e("div",Om,[e("label",{for:`font-${a}`},"Fuente",8,jm),g(e("select",{id:`font-${a}`,"onUpdate:modelValue":L=>G(c).typography[a].fontFamily=L,class:"font-select-small",onChange:C},o[23]||(o[23]=[Se('<option value="inherit" data-v-06ba73ed>Heredar de la base</option><optgroup label="Google Fonts Sans-Serif" data-v-06ba73ed><option value="&#39;Lato&#39;, sans-serif" data-v-06ba73ed>Lato</option><option value="&#39;Open Sans&#39;, sans-serif" data-v-06ba73ed>Open Sans</option><option value="&#39;Roboto&#39;, sans-serif" data-v-06ba73ed>Roboto</option><option value="&#39;Montserrat&#39;, sans-serif" data-v-06ba73ed>Montserrat</option><option value="&#39;Poppins&#39;, sans-serif" data-v-06ba73ed>Poppins</option><option value="&#39;Nunito&#39;, sans-serif" data-v-06ba73ed>Nunito</option><option value="&#39;Inter&#39;, sans-serif" data-v-06ba73ed>Inter</option><option value="&#39;Work Sans&#39;, sans-serif" data-v-06ba73ed>Work Sans</option><option value="&#39;Source Sans Pro&#39;, sans-serif" data-v-06ba73ed>Source Sans Pro</option></optgroup><optgroup label="Google Fonts Serif" data-v-06ba73ed><option value="&#39;PT Serif&#39;, serif" data-v-06ba73ed>PT Serif</option><option value="&#39;Playfair Display&#39;, serif" data-v-06ba73ed>Playfair Display</option><option value="Georgia, serif" data-v-06ba73ed>Georgia</option><option value="&#39;Times New Roman&#39;, serif" data-v-06ba73ed>Times New Roman</option></optgroup><optgroup label="Fuentes del Sistema" data-v-06ba73ed><option value="Arial, sans-serif" data-v-06ba73ed>Arial</option><option value="Helvetica, sans-serif" data-v-06ba73ed>Helvetica</option><option value="&#39;Courier New&#39;, monospace" data-v-06ba73ed>Courier New</option></optgroup>',4)]),40,Wm),[[ie,G(c).typography[a].fontFamily]])]),e("div",Zm,[e("label",{for:`size-${a}`},"Tamaño",8,Xm),e("div",Km,[g(e("input",{type:"range",id:`size-${a}`,"onUpdate:modelValue":L=>G(c).typography[a].fontSize=L,min:"12",max:"72",step:"2",class:"size-range",onInput:C},null,40,Jm),[[I,G(c).typography[a].fontSize,void 0,{number:!0}]]),g(e("input",{type:"number","onUpdate:modelValue":L=>G(c).typography[a].fontSize=L,min:"12",max:"72",class:"size-number",onInput:C},null,40,Qm),[[I,G(c).typography[a].fontSize,void 0,{number:!0}]]),o[24]||(o[24]=e("span",{class:"size-unit"},"px",-1))])]),e("div",Ym,[e("label",{for:`weight-${a}`},"Peso",8,eg),g(e("select",{id:`weight-${a}`,"onUpdate:modelValue":L=>G(c).typography[a].fontWeight=L,class:"font-select-small",onChange:C},o[25]||(o[25]=[Se('<option value="inherit" data-v-06ba73ed>Heredar</option><option value="100" data-v-06ba73ed>Thin (100)</option><option value="200" data-v-06ba73ed>Extra Light (200)</option><option value="300" data-v-06ba73ed>Light (300)</option><option value="400" data-v-06ba73ed>Normal (400)</option><option value="500" data-v-06ba73ed>Medium (500)</option><option value="600" data-v-06ba73ed>Semi Bold (600)</option><option value="700" data-v-06ba73ed>Bold (700)</option><option value="800" data-v-06ba73ed>Extra Bold (800)</option><option value="900" data-v-06ba73ed>Black (900)</option>',10)]),40,og),[[ie,G(c).typography[a].fontWeight]])]),e("div",tg,[e("label",{for:`tracking-${a}`},"Tracking",8,sg),e("div",lg,[g(e("input",{type:"range",id:`tracking-${a}`,"onUpdate:modelValue":L=>G(c).typography[a].letterSpacing=L,min:"-2",max:"5",step:"0.1",class:"size-range",onInput:C},null,40,ag),[[I,G(c).typography[a].letterSpacing,void 0,{number:!0}]]),g(e("input",{type:"number","onUpdate:modelValue":L=>G(c).typography[a].letterSpacing=L,min:"-2",max:"5",step:"0.1",class:"size-number",onInput:C},null,40,ng),[[I,G(c).typography[a].letterSpacing,void 0,{number:!0}]]),o[26]||(o[26]=e("span",{class:"size-unit"},"px",-1))])]),e("div",ig,[(l(),he(Ne(a==="p"?"p":a),{class:"preview-text",style:de({fontSize:G(c).typography[a].fontSize+"px",fontFamily:G(c).typography[a].fontFamily==="inherit"?G(c).baseFontFamily:G(c).typography[a].fontFamily,fontWeight:G(c).typography[a].fontWeight==="inherit"?"normal":G(c).typography[a].fontWeight,letterSpacing:G(c).typography[a].letterSpacing+"px"})},{default:Be(()=>[B(f(M(a)),1)]),_:2},1032,["style"]))])]))),128))])])]),e("div",rg,[o[29]||(o[29]=e("h4",null,"Paleta de Colores",-1)),o[30]||(o[30]=e("p",{class:"section-desc"},"Define los 7 colores principales del sitio",-1)),e("div",dg,[(l(!0),n(te,null,le(G(c).colorPalette,(t,a)=>(l(),n("div",{key:a,class:"color-item"},[e("label",{for:`color-${a}`},"Color "+f(a+1),9,ug),e("div",cg,[g(e("input",{type:"color",id:`color-${a}`,"onUpdate:modelValue":L=>G(c).colorPalette[a]=L,class:"color-picker-large",onInput:C},null,40,pg),[[I,G(c).colorPalette[a]]]),g(e("input",{type:"text","onUpdate:modelValue":L=>G(c).colorPalette[a]=L,class:"color-text",onInput:C},null,40,vg),[[I,G(c).colorPalette[a]]])]),e("div",mg,[e("span",gg,f(w(a)),1)])]))),128))])]),e("div",fg,[o[46]||(o[46]=e("h4",null,"Estilos de Botones",-1)),o[47]||(o[47]=e("p",{class:"section-desc"},"Configura los 3 tipos de botones principales",-1)),e("div",bg,[e("div",yg,[o[35]||(o[35]=e("h5",null,"Botón Outline",-1)),e("div",kg,[e("div",$g,[e("div",hg,[o[31]||(o[31]=e("label",null,"Color del borde",-1)),e("div",Cg,[g(e("input",{type:"color","onUpdate:modelValue":o[1]||(o[1]=t=>G(c).buttons.outline.borderColor=t),class:"color-picker",onInput:C},null,544),[[I,G(c).buttons.outline.borderColor]]),g(e("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=t=>G(c).buttons.outline.borderColor=t),class:"color-text"},null,512),[[I,G(c).buttons.outline.borderColor]])])]),e("div",_g,[o[32]||(o[32]=e("label",null,"Color del texto",-1)),e("div",wg,[g(e("input",{type:"color","onUpdate:modelValue":o[3]||(o[3]=t=>G(c).buttons.outline.textColor=t),class:"color-picker",onInput:C},null,544),[[I,G(c).buttons.outline.textColor]]),g(e("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=t=>G(c).buttons.outline.textColor=t),class:"color-text"},null,512),[[I,G(c).buttons.outline.textColor]])])])]),e("div",Sg,[e("div",xg,[o[33]||(o[33]=e("label",null,"Border radius (px)",-1)),g(e("input",{type:"range","onUpdate:modelValue":o[5]||(o[5]=t=>G(c).buttons.outline.borderRadius=t),min:"0",max:"50",class:"range-input",onInput:C},null,544),[[I,G(c).buttons.outline.borderRadius,void 0,{number:!0}]]),e("span",null,f(G(c).buttons.outline.borderRadius)+"px",1)]),e("div",Eg,[o[34]||(o[34]=e("label",null,"Grosor del borde (px)",-1)),g(e("input",{type:"range","onUpdate:modelValue":o[6]||(o[6]=t=>G(c).buttons.outline.borderWidth=t),min:"1",max:"5",class:"range-input",onInput:C},null,544),[[I,G(c).buttons.outline.borderWidth,void 0,{number:!0}]]),e("span",null,f(G(c).buttons.outline.borderWidth)+"px",1)])])]),e("div",Ig,[e("button",{class:"preview-btn outline-btn",style:de(s())}," Botón Outline ",4)])]),e("div",Ug,[o[39]||(o[39]=e("h5",null,"Botón Plano",-1)),e("div",Vg,[e("div",Mg,[e("div",Tg,[o[36]||(o[36]=e("label",null,"Color de fondo",-1)),e("div",Pg,[g(e("input",{type:"color","onUpdate:modelValue":o[7]||(o[7]=t=>G(c).buttons.flat.backgroundColor=t),class:"color-picker",onInput:C},null,544),[[I,G(c).buttons.flat.backgroundColor]]),g(e("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=t=>G(c).buttons.flat.backgroundColor=t),class:"color-text"},null,512),[[I,G(c).buttons.flat.backgroundColor]])])]),e("div",Bg,[o[37]||(o[37]=e("label",null,"Color del texto",-1)),e("div",Ag,[g(e("input",{type:"color","onUpdate:modelValue":o[9]||(o[9]=t=>G(c).buttons.flat.textColor=t),class:"color-picker",onInput:C},null,544),[[I,G(c).buttons.flat.textColor]]),g(e("input",{type:"text","onUpdate:modelValue":o[10]||(o[10]=t=>G(c).buttons.flat.textColor=t),class:"color-text"},null,512),[[I,G(c).buttons.flat.textColor]])])])]),e("div",Lg,[o[38]||(o[38]=e("label",null,"Border radius (px)",-1)),g(e("input",{type:"range","onUpdate:modelValue":o[11]||(o[11]=t=>G(c).buttons.flat.borderRadius=t),min:"0",max:"50",class:"range-input",onInput:C},null,544),[[I,G(c).buttons.flat.borderRadius,void 0,{number:!0}]]),e("span",null,f(G(c).buttons.flat.borderRadius)+"px",1)])]),e("div",Dg,[e("button",{class:"preview-btn flat-btn",style:de(r())}," Botón Plano ",4)])]),e("div",Rg,[o[45]||(o[45]=e("h5",null,"Botón Degradado",-1)),e("div",Fg,[e("div",zg,[e("div",Gg,[o[40]||(o[40]=e("label",null,"Color 1",-1)),e("div",Ng,[g(e("input",{type:"color","onUpdate:modelValue":o[12]||(o[12]=t=>G(c).buttons.gradient.color1=t),class:"color-picker",onInput:C},null,544),[[I,G(c).buttons.gradient.color1]]),g(e("input",{type:"text","onUpdate:modelValue":o[13]||(o[13]=t=>G(c).buttons.gradient.color1=t),class:"color-text"},null,512),[[I,G(c).buttons.gradient.color1]])])]),e("div",qg,[o[41]||(o[41]=e("label",null,"Color 2",-1)),e("div",Hg,[g(e("input",{type:"color","onUpdate:modelValue":o[14]||(o[14]=t=>G(c).buttons.gradient.color2=t),class:"color-picker",onInput:C},null,544),[[I,G(c).buttons.gradient.color2]]),g(e("input",{type:"text","onUpdate:modelValue":o[15]||(o[15]=t=>G(c).buttons.gradient.color2=t),class:"color-text"},null,512),[[I,G(c).buttons.gradient.color2]])])])]),e("div",Og,[e("div",jg,[o[42]||(o[42]=e("label",null,"Color 3",-1)),e("div",Wg,[g(e("input",{type:"color","onUpdate:modelValue":o[16]||(o[16]=t=>G(c).buttons.gradient.color3=t),class:"color-picker",onInput:C},null,544),[[I,G(c).buttons.gradient.color3]]),g(e("input",{type:"text","onUpdate:modelValue":o[17]||(o[17]=t=>G(c).buttons.gradient.color3=t),class:"color-text"},null,512),[[I,G(c).buttons.gradient.color3]])])]),e("div",Zg,[o[43]||(o[43]=e("label",null,"Color del texto",-1)),e("div",Xg,[g(e("input",{type:"color","onUpdate:modelValue":o[18]||(o[18]=t=>G(c).buttons.gradient.textColor=t),class:"color-picker",onInput:C},null,544),[[I,G(c).buttons.gradient.textColor]]),g(e("input",{type:"text","onUpdate:modelValue":o[19]||(o[19]=t=>G(c).buttons.gradient.textColor=t),class:"color-text"},null,512),[[I,G(c).buttons.gradient.textColor]])])])]),e("div",Kg,[o[44]||(o[44]=e("label",null,"Border radius (px)",-1)),g(e("input",{type:"range","onUpdate:modelValue":o[20]||(o[20]=t=>G(c).buttons.gradient.borderRadius=t),min:"0",max:"50",class:"range-input",onInput:C},null,544),[[I,G(c).buttons.gradient.borderRadius,void 0,{number:!0}]]),e("span",null,f(G(c).buttons.gradient.borderRadius)+"px",1)])]),e("div",Jg,[e("button",{class:"preview-btn gradient-btn",style:de($())}," Botón Degradado ",4)])])])]),e("div",Qg,[e("button",{onClick:S,class:"btn-info",type:"button"},o[48]||(o[48]=[e("i",{class:"fas fa-eye"},null,-1),B(" Vista Previa ",-1)])),e("button",{onClick:U,class:"btn-primary",disabled:u.value},[o[49]||(o[49]=e("i",{class:"fas fa-save"},null,-1)),B(" "+f(u.value?"Guardando...":"Guardar Cambios"),1)],8,Yg),e("button",{onClick:T,class:"btn-secondary",type:"button"},o[50]||(o[50]=[e("i",{class:"fas fa-undo"},null,-1),B(" Restaurar Defaults ",-1)]))])])]))}},of=re(ef,[["__scopeId","data-v-06ba73ed"]]),tf={class:"global-config-content"},sf={class:"tabs-container"},lf={class:"tabs-nav"},af=["onClick"],nf={class:"tab-content"},rf={key:0,class:"tab-pane"},df={key:1,class:"tab-pane"},uf={key:2,class:"tab-pane"},cf={key:3,class:"tab-pane"},pf={key:4,class:"tab-pane"},vf=ve({__name:"GlobalConfigContent",setup(p){const u=D("header"),c=[{id:"header",name:"Encabezado",icon:"fas fa-bars"},{id:"footer",name:"Pie de Página",icon:"fas fa-window-maximize"},{id:"site",name:"Sitio Web",icon:"fas fa-globe"},{id:"seo",name:"SEO",icon:"fas fa-search"},{id:"design",name:"Diseño Global",icon:"fas fa-palette"}];return(b,i)=>(l(),n("div",tf,[i[0]||(i[0]=e("div",{class:"config-header"},[e("h2",null,[e("i",{class:"fas fa-cog"}),B(" Configuración Global ")]),e("p",null,"Gestiona la configuración del encabezado, pie de página y elementos globales del sitio")],-1)),e("div",sf,[e("div",lf,[(l(),n(te,null,le(c,w=>e("button",{key:w.id,onClick:s=>u.value=w.id,class:O(["tab-button",{active:u.value===w.id}])},[e("i",{class:O(w.icon)},null,2),B(" "+f(w.name),1)],10,af)),64))]),e("div",nf,[u.value==="header"?(l(),n("div",rf,[_(Mp)])):R("",!0),u.value==="footer"?(l(),n("div",df,[_(Rv)])):R("",!0),u.value==="site"?(l(),n("div",uf,[_(im)])):R("",!0),u.value==="seo"?(l(),n("div",cf,[_(Dm)])):R("",!0),u.value==="design"?(l(),n("div",pf,[_(of)])):R("",!0)])])]))}}),mf=re(vf,[["__scopeId","data-v-cfb58c6f"]]),gf={class:"crm-manager"},ff={class:"crm-header"},bf={class:"crm-stats"},yf={class:"stat-card"},kf={class:"stat-icon"},$f={class:"stat-content"},hf={class:"stat-card"},Cf={class:"stat-icon"},_f={class:"stat-content"},wf={class:"stat-card"},Sf={class:"stat-icon"},xf={class:"stat-content"},Ef={class:"stat-card"},If={class:"stat-icon"},Uf={class:"stat-content"},Vf={class:"crm-controls"},Mf={class:"filters"},Tf={class:"actions"},Pf={class:"submissions-container"},Bf={key:0,class:"empty-state"},Af={key:1,class:"submissions-list"},Lf={class:"submissions-header"},Df={class:"select-all-row"},Rf=["checked"],Ff={class:"select-all-text"},zf=["onClick"],Gf={class:"submission-header"},Nf={class:"submission-info"},qf={class:"submission-title-row"},Hf=["value"],Of={class:"submission-meta"},jf={class:"form-type"},Wf={class:"submission-date"},Zf={class:"submission-actions"},Xf=["onClick","title"],Kf=["onClick"],Jf=["onClick"],Qf=["onClick"],Yf=["onClick"],e1={class:"submission-summary"},o1={key:0},t1={key:1},s1={key:2},l1={key:0},a1={key:1},n1={key:0,class:"submission-details"},i1={class:"detail-section"},r1={class:"detail-grid"},d1={class:"detail-item"},u1={class:"detail-item"},c1={key:0,class:"detail-item"},p1={key:1,class:"detail-item"},v1={class:"detail-item"},m1={class:"detail-item"},g1={key:2,class:"detail-item"},f1={key:3,class:"detail-item"},b1={key:0,class:"detail-section"},y1={class:"message-content"},k1={key:1,class:"detail-section"},$1={class:"additional-fields"},h1={key:2,class:"detail-section"},C1={class:"history-list"},_1={class:"history-date"},w1={class:"history-action"},S1={key:0,class:"history-user"},x1={key:2,class:"pagination"},E1=["disabled"],I1={class:"pagination-info"},U1=["disabled"],V1={class:"modal-header"},M1={class:"modal-body"},T1={class:"form-group"},P1={class:"form-group"},B1={class:"form-group"},A1={class:"modal-footer"},L1={__name:"CrmManager",setup(p){const u=D([]),c=D("all"),b=D("all"),i=D(""),w=D(1),s=D(10),r=D([]),$=D(!1),m=D(null),M=D({to:"",subject:"",message:""});u.value=u.value||[],r.value=r.value||[],xe([c,b,i],()=>{r.value=[],C()},{immediate:!1}),fe(()=>{console.log("🔍 DEBUG: CrmManager mounted, loading submissions...");const A=window.onerror;window.onerror=function(h,y,P,H,Z){if(h.includes("Cannot read properties of null")){console.error("🔍 DEBUG: Captured null error:",{message:h,source:y,lineno:P,colno:H,error:Z,stack:Z?.stack});debugger}A&&A.call(this,h,y,P,H,Z)},C()});const C=async()=>{try{const A={status:c.value!=="all"?c.value:void 0,form_type:b.value!=="all"?b.value:void 0,date:i.value||void 0},h=await Pe.getAll(A);h.data&&h.data.data&&(console.log("🔍 DEBUG: Raw response data:",h.data.data),u.value=h.data.data.map((y,P)=>{console.log(`🔍 DEBUG: Processing submission ${P}:`,y),console.log("🔍 DEBUG: additional_fields type:",typeof y.additional_fields,y.additional_fields),console.log("🔍 DEBUG: history type:",typeof y.history,y.history);let H=[];y.history&&(Array.isArray(y.history)?H=y.history:typeof y.history=="object"&&Object.keys(y.history).length===0?H=[]:H=Object.values(y.history)),console.log(`🔍 DEBUG: cleanHistory for submission ${P}:`,H);const Z={...y,expanded:!1,additional_fields:y.additional_fields&&typeof y.additional_fields=="object"?y.additional_fields:{},history:H};return console.log(`🔍 DEBUG: Sanitized submission ${P}:`,Z),Z}),console.log("🔍 DEBUG: Final submissions array:",u.value))}catch(A){console.error("Error loading submissions:",A),u.value=[]}},S=J(()=>{console.log("🔍 DEBUG: Computing readSubmissions, submissions:",u.value);const A=u.value.filter(h=>["read","replied","archived"].includes(h.status)).length;return console.log("🔍 DEBUG: readSubmissions result:",A),A}),U=J(()=>{console.log("🔍 DEBUG: Computing unreadSubmissions, submissions:",u.value);const A=u.value.filter(h=>h.status==="unread").length;return console.log("🔍 DEBUG: unreadSubmissions result:",A),A}),T=J(()=>{const A=new Date().toDateString();return u.value.filter(h=>new Date(h.created_at).toDateString()===A).length}),V=J(()=>{console.log("🔍 DEBUG: Computing filteredSubmissions, submissions.value:",u.value);let A=Array.isArray(u.value)?[...u.value]:[];if(c.value!=="all"&&(console.log("🔍 DEBUG: Filtering by status:",c.value),A=A.filter(h=>h&&h.status===c.value)),b.value!=="all"&&(console.log("🔍 DEBUG: Filtering by form:",b.value),A=A.filter(h=>h&&h.form_type===b.value)),i.value){console.log("🔍 DEBUG: Filtering by date:",i.value);const h=new Date(i.value).toDateString();A=A.filter(y=>y&&y.created_at&&new Date(y.created_at).toDateString()===h)}return console.log("🔍 DEBUG: filteredSubmissions result:",A),Array.isArray(A)?A:[]}),o=J(()=>Math.ceil(V.value.length/s.value)),t=J(()=>{console.log("🔍 DEBUG: Computing paginatedSubmissions"),console.log("  currentPage:",w.value),console.log("  itemsPerPage:",s.value),console.log("  filteredSubmissions:",V.value);const A=(w.value-1)*s.value,h=A+s.value;console.log("  start:",A,"end:",h);const y=V.value.slice(A,h);return console.log("🔍 DEBUG: paginatedSubmissions result:",y),y}),a=J(()=>{console.log("🔍 DEBUG: Computing allSubmissionsSelected"),console.log("  filteredSubmissions.value:",V.value),console.log("  selectedSubmissions.value:",r.value);const A=V.value.length>0&&r.value.length===V.value.length;return console.log("🔍 DEBUG: allSubmissionsSelected result:",A),A}),L=A=>({contact:"Contacto",lead_converter:"Generador de Leads"})[A]||A,E=A=>({unread:"Sin leer",read:"Leído",replied:"Respondido",archived:"Archivado"})[A]||A,d=A=>new Date(A).toLocaleDateString("es-ES"),v=A=>new Date(A).toLocaleString("es-ES"),z=A=>A.replace(/_/g," ").replace(/\b\w/g,h=>h.toUpperCase()),k=(A,h)=>(console.log("🔍 DEBUG: truncateText called with:",{text:A,maxLength:h,type:typeof A}),!A||typeof A!="string"?(console.log("🔍 DEBUG: text is null/undefined or not string, returning empty"),""):A.length<=h?A:A.substr(0,h)+"..."),x=A=>{const h=u.value.find(y=>y.id===A);h&&(h.expanded=!h.expanded)},oe=async(A,h)=>{try{await Pe.updateStatus(A.id,h),A.status=h,A.history||(A.history=[]),A.history.unshift({id:Date.now(),action:`Marcado como ${E(h).toLowerCase()}`,user:"Admin",created_at:new Date().toISOString()}),console.log(`✅ Updated submission ${A.id} to status: ${h}`)}catch(y){console.error("❌ Error updating submission status:",y),alert("Error al actualizar el estado del formulario")}},X=async()=>{try{console.log("🔍 DEBUG: markAllAsRead called",u.value),await Pe.markAllAsRead(),u.value&&Array.isArray(u.value)?u.value.forEach(A=>{A&&A.status==="unread"&&(A.status="read",(!A.history||!Array.isArray(A.history))&&(A.history=[]),A.history.unshift({id:Date.now(),action:"Marcado como leído (acción masiva)",user:"Admin",created_at:new Date().toISOString()}))}):console.log("🔍 DEBUG: submissions.value is not a valid array:",u.value),console.log("✅ Marked all submissions as read"),alert("Todos los formularios han sido marcados como leídos")}catch(A){console.error("❌ Error marking all as read:",A),alert("Error al marcar todos como leídos")}},K=A=>{confirm("¿Estás seguro de archivar este formulario?")&&oe(A,"archived")},Q=async A=>{if(confirm("¿Estás seguro de eliminar este formulario? Esta acción no se puede deshacer."))try{await Pe.delete(A.id);const h=u.value.findIndex(y=>y.id===A.id);h!==-1&&u.value.splice(h,1),console.log(`✅ Deleted submission ${A.id}`),alert("Formulario eliminado exitosamente")}catch(h){console.error("❌ Error deleting submission:",h),alert("Error al eliminar el formulario")}},W=async()=>{if(console.log("🔍 DEBUG: deleteSelectedSubmissions called",r.value),!r.value||!Array.isArray(r.value)||r.value.length===0){console.log("🔍 DEBUG: No submissions selected or invalid array");return}const A=r.value.length;if(confirm(`¿Estás seguro de eliminar ${A} formulario(s)? Esta acción no se puede deshacer.`))try{console.log("🔍 DEBUG: Starting deletion process");const h=Array.isArray(r.value)?r.value:[],y=h.map(P=>Pe.delete(P));await Promise.all(y),console.log("🔍 DEBUG: Deletion completed, updating local arrays"),u.value&&Array.isArray(u.value)&&(u.value=u.value.filter(P=>!h.includes(P.id))),r.value=[],console.log(`✅ Deleted ${A} submissions`),alert(`${A} formulario(s) eliminado(s) exitosamente`)}catch(h){console.error("❌ Error deleting selected submissions:",h),alert("Error al eliminar los formularios seleccionados")}},ee=()=>{a.value?r.value=[]:r.value=V.value.map(A=>A.id)},pe=A=>{m.value=A,M.value={to:A.email,subject:`Re: ${L(A.form_type)} - ${A.name}`,message:`Hola ${A.name},

Gracias por contactarnos. 

Saludos cordiales,
Equipo R-Integra`},$.value=!0},j=()=>{$.value=!1,m.value=null,M.value={to:"",subject:"",message:""}},q=async()=>{try{if(!m.value)return;await Pe.reply(m.value.id,M.value),await oe(m.value,"replied"),m.value.history||(m.value.history=[]),m.value.history.unshift({id:Date.now(),action:`Respuesta enviada: "${M.value.subject}"`,user:"Admin",created_at:new Date().toISOString()}),console.log("✅ Reply sent successfully"),alert("Respuesta enviada correctamente"),j()}catch(A){console.error("❌ Error sending reply:",A),alert("Error al enviar la respuesta")}},Y=async()=>{try{const A={status:c.value!=="all"?c.value:void 0,form_type:b.value!=="all"?b.value:void 0,date:i.value||void 0},h=await Pe.exportCsv(A),y=new Blob([h.data],{type:"text/csv"}),P=window.URL.createObjectURL(y),H=document.createElement("a");H.href=P,H.download=`formularios_crm_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(H),H.click(),document.body.removeChild(H),window.URL.revokeObjectURL(P),console.log("✅ CSV exported successfully"),alert("Archivo CSV descargado correctamente")}catch(A){console.error("❌ Error exporting CSV:",A),alert("Error al exportar el archivo CSV")}};return(A,h)=>(l(),n("div",gf,[e("div",ff,[h[14]||(h[14]=e("h2",null,"CRM - Gestión de Formularios",-1)),e("div",bf,[e("div",yf,[e("div",kf,[_(N,{name:"envelope"})]),e("div",$f,[e("h3",null,f(u.value?.length||0),1),h[10]||(h[10]=e("p",null,"Formularios Recibidos",-1))])]),e("div",hf,[e("div",Cf,[_(N,{name:"check"})]),e("div",_f,[e("h3",null,f(S.value),1),h[11]||(h[11]=e("p",null,"Leídos",-1))])]),e("div",wf,[e("div",Sf,[_(N,{name:"clock"})]),e("div",xf,[e("h3",null,f(U.value),1),h[12]||(h[12]=e("p",null,"Sin Leer",-1))])]),e("div",Ef,[e("div",If,[_(N,{name:"calendar"})]),e("div",Uf,[e("h3",null,f(T.value),1),h[13]||(h[13]=e("p",null,"Hoy",-1))])])])]),e("div",Vf,[e("div",Mf,[g(e("select",{"onUpdate:modelValue":h[0]||(h[0]=y=>c.value=y),class:"filter-select"},h[15]||(h[15]=[Se('<option value="all" data-v-3063df6f>Todos los estados</option><option value="unread" data-v-3063df6f>Sin leer</option><option value="read" data-v-3063df6f>Leídos</option><option value="replied" data-v-3063df6f>Respondidos</option><option value="archived" data-v-3063df6f>Archivados</option>',5)]),512),[[ie,c.value]]),g(e("select",{"onUpdate:modelValue":h[1]||(h[1]=y=>b.value=y),class:"filter-select"},h[16]||(h[16]=[e("option",{value:"all"},"Todos los formularios",-1),e("option",{value:"contact"},"Formulario de Contacto",-1),e("option",{value:"lead_converter"},"Generador de Leads",-1)]),512),[[ie,b.value]]),g(e("input",{type:"date","onUpdate:modelValue":h[2]||(h[2]=y=>i.value=y),class:"filter-date",placeholder:"Filtrar por fecha"},null,512),[[I,i.value]])]),e("div",Tf,[e("button",{onClick:Y,class:"btn-secondary"},[_(N,{name:"document"}),h[17]||(h[17]=B(" Exportar CSV ",-1))]),e("button",{onClick:X,class:"btn-primary"},[_(N,{name:"check"}),h[18]||(h[18]=B(" Marcar Todo Como Leído ",-1))]),(r.value?.length||0)>0?(l(),n("button",{key:0,onClick:W,class:"btn-secondary"},[_(N,{name:"trash"}),B(" Eliminar Seleccionados ("+f(r.value?.length||0)+") ",1)])):R("",!0)])]),e("div",Pf,[(V.value?.length||0)===0?(l(),n("div",Bf,[_(N,{name:"envelope"}),h[19]||(h[19]=e("h3",null,"No hay formularios",-1)),h[20]||(h[20]=e("p",null,"Los formularios enviados desde el sitio web aparecerán aquí",-1))])):(l(),n("div",Af,[e("div",Lf,[e("div",Df,[e("input",{type:"checkbox",checked:a.value,onChange:ee,class:"submission-checkbox"},null,40,Rf),e("span",Ff,f((r.value?.length||0)>0?`${r.value?.length||0} de ${V.value?.length||0} seleccionados`:"Seleccionar todos"),1)])]),(l(!0),n(te,null,le(t.value,(y,P)=>(l(),n("div",{key:y.id,class:O(["submission-card",{unread:y.status==="unread",read:y.status==="read",replied:y.status==="replied",archived:y.status==="archived"}]),onClick:H=>console.log(`🔍 DEBUG: Clicked submission ${P}:`,y)},[e("div",Gf,[e("div",Nf,[e("div",qf,[g(e("input",{type:"checkbox",value:y.id,"onUpdate:modelValue":h[3]||(h[3]=H=>r.value=H),class:"submission-checkbox"},null,8,Hf),[[ke,r.value]]),e("h4",null,f(y.name),1)]),e("div",Of,[e("span",jf,f(L(y.form_type)),1),e("span",Wf,f(d(y.created_at)),1),e("span",{class:O(["status-badge",y.status])},f(E(y.status)),3)])]),e("div",Zf,[e("button",{onClick:H=>x(y.id),class:"btn-icon",title:y.expanded?"Ocultar detalles":"Ver detalles"},[_(N,{name:y.expanded?"chevron-up":"chevron-down"},null,8,["name"])],8,Xf),y.status==="unread"?(l(),n("button",{key:0,onClick:H=>oe(y,"read"),class:"btn-icon",title:"Marcar como leído"},[_(N,{name:"eye"})],8,Kf)):R("",!0),e("button",{onClick:H=>pe(y),class:"btn-icon",title:"Responder"},[_(N,{name:"envelope"})],8,Jf),e("button",{onClick:H=>K(y),class:"btn-icon",title:"Archivar"},[_(N,{name:"archive"})],8,Qf),e("button",{onClick:H=>Q(y),class:"btn-icon",title:"Eliminar"},[_(N,{name:"trash"})],8,Yf)])]),e("div",e1,[e("p",null,[h[21]||(h[21]=e("strong",null,"Email:",-1)),B(" "+f(y.email),1)]),y.phone?(l(),n("p",o1,[h[22]||(h[22]=e("strong",null,"Teléfono:",-1)),B(" "+f(y.phone),1)])):R("",!0),y.message?(l(),n("p",t1,[h[23]||(h[23]=e("strong",null,"Mensaje:",-1)),B(" "+f(k(y.message,100)),1)])):R("",!0),y.form_type==="lead_converter"&&y.additional_fields?(l(),n("div",s1,[y.additional_fields.situation?(l(),n("p",l1,[h[24]||(h[24]=e("strong",null,"Situación:",-1)),B(" "+f(y.additional_fields.situation),1)])):R("",!0),y.additional_fields.urgency?(l(),n("p",a1,[h[25]||(h[25]=e("strong",null,"Urgencia:",-1)),B(" "+f(y.additional_fields.urgency),1)])):R("",!0)])):R("",!0)]),y.expanded?(l(),n("div",n1,[e("div",i1,[h[34]||(h[34]=e("h5",null,"Información Completa",-1)),e("div",r1,[e("div",d1,[h[26]||(h[26]=e("label",null,"Nombre:",-1)),e("span",null,f(y.name),1)]),e("div",u1,[h[27]||(h[27]=e("label",null,"Email:",-1)),e("span",null,f(y.email),1)]),y.phone?(l(),n("div",c1,[h[28]||(h[28]=e("label",null,"Teléfono:",-1)),e("span",null,f(y.phone),1)])):R("",!0),y.company?(l(),n("div",p1,[h[29]||(h[29]=e("label",null,"Empresa:",-1)),e("span",null,f(y.company),1)])):R("",!0),e("div",v1,[h[30]||(h[30]=e("label",null,"Formulario:",-1)),e("span",null,f(L(y.form_type)),1)]),e("div",m1,[h[31]||(h[31]=e("label",null,"Fecha:",-1)),e("span",null,f(v(y.created_at)),1)]),y.ip?(l(),n("div",g1,[h[32]||(h[32]=e("label",null,"IP:",-1)),e("span",null,f(y.ip),1)])):R("",!0),y.user_agent?(l(),n("div",f1,[h[33]||(h[33]=e("label",null,"Navegador:",-1)),e("span",null,f(y.user_agent),1)])):R("",!0)])]),y.message?(l(),n("div",b1,[h[35]||(h[35]=e("h5",null,"Mensaje Completo",-1)),e("div",y1,f(y.message),1)])):R("",!0),y.additional_fields&&typeof y.additional_fields=="object"?(l(),n("div",k1,[h[36]||(h[36]=e("h5",null,"Campos Adicionales",-1)),e("div",$1,[(l(!0),n(te,null,le(y.additional_fields||{},(H,Z)=>(l(),n("div",{key:Z,class:"field-item"},[e("label",null,f(z(Z))+":",1),e("span",null,f(H),1)]))),128))])])):R("",!0),y.history&&Array.isArray(y.history)&&y.history.length>0?(l(),n("div",h1,[h[37]||(h[37]=e("h5",null,"Historial",-1)),e("div",C1,[(l(!0),n(te,null,le(y.history||[],H=>(l(),n("div",{key:H.id,class:"history-item"},[e("span",_1,f(v(H.created_at)),1),e("span",w1,f(H.action),1),H.user?(l(),n("span",S1,"por "+f(H.user),1)):R("",!0)]))),128))])])):R("",!0)])):R("",!0)],10,zf))),128))])),o.value>1?(l(),n("div",x1,[e("button",{onClick:h[4]||(h[4]=y=>w.value--),disabled:w.value===1,class:"btn-pagination"},[_(N,{name:"chevron-left"}),h[38]||(h[38]=B(" Anterior ",-1))],8,E1),e("span",I1," Página "+f(w.value)+" de "+f(o.value)+" ("+f(V.value?.length||0)+" resultados) ",1),e("button",{onClick:h[5]||(h[5]=y=>w.value++),disabled:w.value===o.value,class:"btn-pagination"},[h[39]||(h[39]=B(" Siguiente ",-1)),_(N,{name:"chevron-right"})],8,U1)])):R("",!0)]),$.value?(l(),n("div",{key:0,class:"modal-overlay",onClick:j},[e("div",{class:"modal-content",onClick:h[9]||(h[9]=ce(()=>{},["stop"]))},[e("div",V1,[e("h3",null,"Responder a "+f(m.value?.name),1),e("button",{onClick:j,class:"btn-close"},[_(N,{name:"close"})])]),e("div",M1,[e("div",T1,[h[40]||(h[40]=e("label",null,"Para:",-1)),g(e("input",{type:"email","onUpdate:modelValue":h[6]||(h[6]=y=>M.value.to=y),class:"form-input",readonly:""},null,512),[[I,M.value.to]])]),e("div",P1,[h[41]||(h[41]=e("label",null,"Asunto:",-1)),g(e("input",{type:"text","onUpdate:modelValue":h[7]||(h[7]=y=>M.value.subject=y),class:"form-input"},null,512),[[I,M.value.subject]])]),e("div",B1,[h[42]||(h[42]=e("label",null,"Mensaje:",-1)),g(e("textarea",{"onUpdate:modelValue":h[8]||(h[8]=y=>M.value.message=y),rows:"8",class:"form-input"},null,512),[[I,M.value.message]])])]),e("div",A1,[e("button",{onClick:j,class:"btn-secondary"},[_(N,{name:"close"}),h[43]||(h[43]=B(" Cancelar ",-1))]),e("button",{onClick:q,class:"btn-primary"},[_(N,{name:"envelope"}),h[44]||(h[44]=B(" Enviar Respuesta ",-1))])])])])):R("",!0)]))}},D1=re(L1,[["__scopeId","data-v-3063df6f"]]),R1={class:"analytics-manager"},F1={class:"analytics-header"},z1={class:"header-actions"},G1={class:"config-section"},N1={class:"config-card"},q1={class:"config-header"},H1={class:"config-content"},O1={class:"form-group"},j1={class:"input-group"},W1={class:"stats-grid"},Z1={class:"stat-card"},X1={class:"stat-icon"},K1={class:"stat-content"},J1={class:"stat-card"},Q1={class:"stat-icon"},Y1={class:"stat-content"},eb={class:"stat-card"},ob={class:"stat-icon"},tb={class:"stat-content"},sb={class:"stat-card"},lb={class:"stat-icon"},ab={class:"stat-content"},nb={class:"analytics-content"},ib={class:"analytics-row"},rb={class:"table-card"},db={class:"table-responsive"},ub={class:"analytics-table"},cb={class:"page-info"},pb={class:"page-path"},vb={class:"page-title"},mb={class:"pagespeed-card"},gb={class:"pagespeed-content"},fb={class:"speed-test"},bb=["disabled"],yb={key:0,class:"speed-results"},kb={class:"speed-scores"},$b={class:"score-item"},hb={class:"score-item"},Cb={class:"score-item"},_b={class:"score-item"},wb={class:"speed-metrics"},Sb={class:"metric"},xb={class:"metric"},Eb={class:"metric"},Ib={class:"metric"},Ub={class:"recommendations"},Vb={class:"additional-config"},Mb={class:"config-card"},Tb={class:"config-options"},Pb={class:"option-group"},Bb={class:"checkbox-label"},Ab={class:"option-group"},Lb={class:"checkbox-label"},Db={class:"option-group"},Rb={class:"checkbox-label"},Fb={class:"option-group"},zb={class:"checkbox-label"},Gb={__name:"AnalyticsManager",setup(p){const u=D("30"),c=D(""),b=D(!1),i=D(!1),w=D(null),s=D({pageViews:12450,pageViewsChange:12.5,sessions:8920,sessionsChange:8.3,avgSessionDuration:142,durationChange:-2.1,bounceRate:45.2,bounceRateChange:-3.2}),r=D([{path:"/",title:"Página de inicio",views:4521,percentage:36.3},{path:"/servicios",title:"Servicios",views:2103,percentage:16.9},{path:"/contacto",title:"Contacto",views:1876,percentage:15.1},{path:"/about",title:"Acerca de nosotros",views:1204,percentage:9.7},{path:"/blog",title:"Blog",views:956,percentage:7.7}]),$=D({trackOutboundLinks:!0,trackFileDownloads:!0,trackScrollDepth:!1,anonymizeIP:!0});fe(()=>{m()});const m=()=>{const t=localStorage.getItem("ga-tracking-id");t&&(c.value=t,b.value=!0)},M=()=>{if(!c.value){alert("Por favor ingresa un ID de seguimiento válido");return}localStorage.setItem("ga-tracking-id",c.value),b.value=!0,alert("Configuración de Google Analytics guardada correctamente")},C=()=>{console.log(`Refreshing analytics data for ${u.value} days`),alert("Datos actualizados (simulación)")},S=async()=>{i.value=!0,await new Promise(t=>setTimeout(t,3e3)),w.value={performance:85,accessibility:92,bestPractices:88,seo:95,fcp:1.2,lcp:2.4,tti:3.1,tbt:45,recommendations:["Optimizar imágenes para reducir el tiempo de carga","Minimizar CSS y JavaScript no utilizados","Implementar lazy loading para imágenes","Usar un CDN para servir recursos estáticos"]},i.value=!1},U=()=>{localStorage.setItem("analytics-settings",JSON.stringify($.value)),alert("Configuración guardada correctamente")},T=t=>t.toLocaleString("es-ES"),V=t=>{const a=Math.floor(t/60),L=t%60;return`${a}:${L.toString().padStart(2,"0")}`},o=t=>t>=90?"excellent":t>=70?"good":t>=50?"fair":"poor";return(t,a)=>(l(),n("div",R1,[e("div",F1,[a[8]||(a[8]=e("h2",null,"Analíticas y Rendimiento",-1)),e("div",z1,[g(e("select",{"onUpdate:modelValue":a[0]||(a[0]=L=>u.value=L),class:"period-select"},a[6]||(a[6]=[e("option",{value:"7"},"Últimos 7 días",-1),e("option",{value:"30"},"Últimos 30 días",-1),e("option",{value:"90"},"Últimos 90 días",-1),e("option",{value:"365"},"Último año",-1)]),512),[[ie,u.value]]),e("button",{onClick:C,class:"btn-primary"},[_(N,{name:"refresh"}),a[7]||(a[7]=B(" Actualizar ",-1))])])]),e("div",G1,[e("div",N1,[e("div",q1,[a[10]||(a[10]=e("h3",null,"Configuración de Google Analytics",-1)),e("div",{class:O(["status-indicator",{connected:b.value}])},[a[9]||(a[9]=e("span",{class:"status-dot"},null,-1)),B(" "+f(b.value?"Conectado":"Desconectado"),1)],2)]),e("div",H1,[e("div",O1,[a[12]||(a[12]=e("label",{for:"ga-tracking-id"},"ID de seguimiento de Google Analytics",-1)),e("div",j1,[g(e("input",{type:"text",id:"ga-tracking-id","onUpdate:modelValue":a[1]||(a[1]=L=>c.value=L),placeholder:"G-XXXXXXXXXX o UA-XXXXXXXXX-X",class:"form-input"},null,512),[[I,c.value]]),e("button",{onClick:M,class:"btn-secondary"},[_(N,{name:"save"}),a[11]||(a[11]=B(" Guardar ",-1))])])]),a[13]||(a[13]=e("div",{class:"config-help"},[e("p",null,[e("strong",null,"¿Cómo obtener tu ID de Google Analytics?")]),e("ol",null,[e("li",null,[B("Ve a "),e("a",{href:"https://analytics.google.com",target:"_blank"},"Google Analytics")]),e("li",null,"Selecciona tu propiedad"),e("li",null,"Ve a Administrador > Información de seguimiento > Código de seguimiento"),e("li",null,"Copia el ID que aparece (GA4: G-XXXXXXXXXX, Universal: UA-XXXXXXXXX-X)")])],-1))])])]),e("div",W1,[e("div",Z1,[e("div",X1,[_(N,{name:"eye"})]),e("div",K1,[e("h3",null,f(T(s.value.pageViews)),1),a[14]||(a[14]=e("p",null,"Vistas de página",-1)),e("span",{class:O(["stat-change",s.value.pageViewsChange>=0?"positive":"negative"])},f(s.value.pageViewsChange>=0?"+":"")+f(s.value.pageViewsChange)+"% ",3)])]),e("div",J1,[e("div",Q1,[_(N,{name:"globe"})]),e("div",Y1,[e("h3",null,f(T(s.value.sessions)),1),a[15]||(a[15]=e("p",null,"Sesiones",-1)),e("span",{class:O(["stat-change",s.value.sessionsChange>=0?"positive":"negative"])},f(s.value.sessionsChange>=0?"+":"")+f(s.value.sessionsChange)+"% ",3)])]),e("div",eb,[e("div",ob,[_(N,{name:"clock"})]),e("div",tb,[e("h3",null,f(V(s.value.avgSessionDuration)),1),a[16]||(a[16]=e("p",null,"Duración promedio",-1)),e("span",{class:O(["stat-change",s.value.durationChange>=0?"positive":"negative"])},f(s.value.durationChange>=0?"+":"")+f(s.value.durationChange)+"% ",3)])]),e("div",sb,[e("div",lb,[_(N,{name:"arrow-path"})]),e("div",ab,[e("h3",null,f(s.value.bounceRate)+"%",1),a[17]||(a[17]=e("p",null,"Tasa de rebote",-1)),e("span",{class:O(["stat-change",s.value.bounceRateChange<=0?"positive":"negative"])},f(s.value.bounceRateChange>=0?"+":"")+f(s.value.bounceRateChange)+"% ",3)])])]),e("div",nb,[a[30]||(a[30]=Se('<div class="analytics-row" data-v-2d15085f><div class="chart-card" data-v-2d15085f><h3 data-v-2d15085f>Visitas en el tiempo</h3><div class="chart-placeholder" data-v-2d15085f><div class="chart-mock" data-v-2d15085f><div class="chart-bars" data-v-2d15085f><div class="bar" style="height:60%;" data-v-2d15085f></div><div class="bar" style="height:80%;" data-v-2d15085f></div><div class="bar" style="height:45%;" data-v-2d15085f></div><div class="bar" style="height:90%;" data-v-2d15085f></div><div class="bar" style="height:75%;" data-v-2d15085f></div><div class="bar" style="height:85%;" data-v-2d15085f></div><div class="bar" style="height:70%;" data-v-2d15085f></div></div><p class="chart-note" data-v-2d15085f>Integración con Chart.js en desarrollo</p></div></div></div><div class="table-card" data-v-2d15085f><h3 data-v-2d15085f>Fuentes de tráfico</h3><div class="traffic-sources" data-v-2d15085f><div class="source-item" data-v-2d15085f><div class="source-info" data-v-2d15085f><span class="source-name" data-v-2d15085f>Búsqueda orgánica</span><span class="source-percentage" data-v-2d15085f>45%</span></div><div class="progress-bar" data-v-2d15085f><div class="progress-fill" style="width:45%;" data-v-2d15085f></div></div></div><div class="source-item" data-v-2d15085f><div class="source-info" data-v-2d15085f><span class="source-name" data-v-2d15085f>Directo</span><span class="source-percentage" data-v-2d15085f>30%</span></div><div class="progress-bar" data-v-2d15085f><div class="progress-fill" style="width:30%;" data-v-2d15085f></div></div></div><div class="source-item" data-v-2d15085f><div class="source-info" data-v-2d15085f><span class="source-name" data-v-2d15085f>Redes sociales</span><span class="source-percentage" data-v-2d15085f>15%</span></div><div class="progress-bar" data-v-2d15085f><div class="progress-fill" style="width:15%;" data-v-2d15085f></div></div></div><div class="source-item" data-v-2d15085f><div class="source-info" data-v-2d15085f><span class="source-name" data-v-2d15085f>Referencias</span><span class="source-percentage" data-v-2d15085f>10%</span></div><div class="progress-bar" data-v-2d15085f><div class="progress-fill" style="width:10%;" data-v-2d15085f></div></div></div></div></div></div>',1)),e("div",ib,[e("div",rb,[a[19]||(a[19]=e("h3",null,"Páginas más visitadas",-1)),e("div",db,[e("table",ub,[a[18]||(a[18]=e("thead",null,[e("tr",null,[e("th",null,"Página"),e("th",null,"Visitas"),e("th",null,"% del total")])],-1)),e("tbody",null,[(l(!0),n(te,null,le(r.value,L=>(l(),n("tr",{key:L.path},[e("td",null,[e("div",cb,[e("span",pb,f(L.path),1),e("small",vb,f(L.title),1)])]),e("td",null,f(T(L.views)),1),e("td",null,f(L.percentage)+"%",1)]))),128))])])])]),e("div",mb,[a[29]||(a[29]=e("h3",null,"PageSpeed Insights",-1)),e("div",gb,[e("div",fb,[e("button",{onClick:S,class:"btn-secondary",disabled:i.value},[_(N,{name:"refresh"}),B(" "+f(i.value?"Analizando...":"Analizar velocidad"),1)],8,bb)]),w.value?(l(),n("div",yb,[e("div",kb,[e("div",$b,[e("div",{class:O(["score-circle",o(w.value.performance)])},f(w.value.performance),3),a[20]||(a[20]=e("span",null,"Rendimiento",-1))]),e("div",hb,[e("div",{class:O(["score-circle",o(w.value.accessibility)])},f(w.value.accessibility),3),a[21]||(a[21]=e("span",null,"Accesibilidad",-1))]),e("div",Cb,[e("div",{class:O(["score-circle",o(w.value.bestPractices)])},f(w.value.bestPractices),3),a[22]||(a[22]=e("span",null,"Mejores prácticas",-1))]),e("div",_b,[e("div",{class:O(["score-circle",o(w.value.seo)])},f(w.value.seo),3),a[23]||(a[23]=e("span",null,"SEO",-1))])]),e("div",wb,[e("div",Sb,[a[24]||(a[24]=e("label",null,"First Contentful Paint",-1)),e("span",null,f(w.value.fcp)+"s",1)]),e("div",xb,[a[25]||(a[25]=e("label",null,"Largest Contentful Paint",-1)),e("span",null,f(w.value.lcp)+"s",1)]),e("div",Eb,[a[26]||(a[26]=e("label",null,"Time to Interactive",-1)),e("span",null,f(w.value.tti)+"s",1)]),e("div",Ib,[a[27]||(a[27]=e("label",null,"Total Blocking Time",-1)),e("span",null,f(w.value.tbt)+"ms",1)])]),e("div",Ub,[a[28]||(a[28]=e("h4",null,"Recomendaciones principales",-1)),e("ul",null,[(l(!0),n(te,null,le(w.value.recommendations,L=>(l(),n("li",{key:L},f(L),1))),128))])])])):R("",!0)])])])]),e("div",Vb,[e("div",Mb,[a[40]||(a[40]=e("h3",null,"Configuración adicional",-1)),e("div",Tb,[e("div",Pb,[e("label",Bb,[g(e("input",{type:"checkbox","onUpdate:modelValue":a[2]||(a[2]=L=>$.value.trackOutboundLinks=L)},null,512),[[ke,$.value.trackOutboundLinks]]),a[31]||(a[31]=e("span",{class:"checkmark"},null,-1)),a[32]||(a[32]=B(" Rastrear clics en enlaces externos ",-1))])]),e("div",Ab,[e("label",Lb,[g(e("input",{type:"checkbox","onUpdate:modelValue":a[3]||(a[3]=L=>$.value.trackFileDownloads=L)},null,512),[[ke,$.value.trackFileDownloads]]),a[33]||(a[33]=e("span",{class:"checkmark"},null,-1)),a[34]||(a[34]=B(" Rastrear descargas de archivos ",-1))])]),e("div",Db,[e("label",Rb,[g(e("input",{type:"checkbox","onUpdate:modelValue":a[4]||(a[4]=L=>$.value.trackScrollDepth=L)},null,512),[[ke,$.value.trackScrollDepth]]),a[35]||(a[35]=e("span",{class:"checkmark"},null,-1)),a[36]||(a[36]=B(" Rastrear profundidad de scroll ",-1))])]),e("div",Fb,[e("label",zb,[g(e("input",{type:"checkbox","onUpdate:modelValue":a[5]||(a[5]=L=>$.value.anonymizeIP=L)},null,512),[[ke,$.value.anonymizeIP]]),a[37]||(a[37]=e("span",{class:"checkmark"},null,-1)),a[38]||(a[38]=B(" Anonimizar direcciones IP (GDPR) ",-1))])])]),e("button",{onClick:U,class:"btn-primary"},[_(N,{name:"save"}),a[39]||(a[39]=B(" Guardar configuración ",-1))])])])]))}},Nb=re(Gb,[["__scopeId","data-v-2d15085f"]]),qb={class:"users-manager"},Hb={class:"users-header"},Ob={class:"header-actions"},jb={class:"stats-grid"},Wb={class:"stat-card"},Zb={class:"stat-icon"},Xb={class:"stat-content"},Kb={class:"stat-card"},Jb={class:"stat-icon"},Qb={class:"stat-content"},Yb={class:"stat-card"},ey={class:"stat-icon"},oy={class:"stat-content"},ty={class:"stat-card"},sy={class:"stat-icon"},ly={class:"stat-content"},ay={class:"users-controls"},ny={class:"search-filters"},iy={class:"search-box"},ry=["value"],dy={class:"users-container"},uy={class:"users-table-container"},cy={class:"users-table"},py={class:"user-info"},vy={class:"user-avatar"},my=["src","alt"],gy={key:1,class:"avatar-placeholder"},fy={class:"user-details"},by={class:"user-name"},yy={class:"user-meta"},ky={class:"user-email"},$y={class:"created-date"},hy={class:"user-actions"},Cy=["onClick"],_y=["onClick"],wy={class:"modal-header"},Sy={class:"modal-body"},xy={class:"form-row"},Ey={class:"form-group"},Iy={class:"form-group"},Uy={class:"form-row"},Vy={class:"form-group"},My={class:"form-group"},Ty=["value"],Py={key:0,class:"form-group"},By={class:"form-group"},Ay={class:"form-group"},Ly={class:"checkbox-label"},Dy={class:"modal-footer"},Ry={class:"modal-header"},Fy={class:"modal-body"},zy={class:"roles-section"},Gy={class:"section-header"},Ny={class:"roles-list"},qy={class:"role-header"},Hy={class:"role-info"},Oy={class:"role-actions"},jy=["onClick"],Wy=["onClick"],Zy={class:"role-permissions"},Xy={class:"permissions-grid"},Ky={key:0,class:"role-editor"},Jy={class:"form-group"},Qy={class:"form-group"},Yy={class:"form-group"},ek={class:"permissions-selector"},ok={class:"checkbox-label"},tk=["value"],sk={class:"permission-details"},lk={class:"permission-name"},ak={class:"permission-description"},nk={class:"form-actions"},ik={type:"submit",class:"btn-primary"},rk={__name:"UsersManager",setup(p){const u=D([]),c=D([]),b=D(!1),i=D({current_page:1,last_page:1,per_page:10,total:0}),w=D(""),s=D("all"),r=D("all"),$=D(!1),m=D(!1),M=D(!1),C=D(1),S=D(null),U=D({name:"",email:"",title:"",role_id:"",password:"",phone:"",send_welcome_email:!0}),T=D([{key:"pages.create",name:"Crear páginas",description:"Permitir crear nuevas páginas"},{key:"pages.edit",name:"Editar páginas",description:"Permitir modificar páginas existentes"},{key:"pages.delete",name:"Eliminar páginas",description:"Permitir eliminar páginas"},{key:"pages.publish",name:"Publicar páginas",description:"Permitir cambiar estado de publicación"},{key:"media.upload",name:"Subir medios",description:"Permitir subir archivos multimedia"},{key:"media.delete",name:"Eliminar medios",description:"Permitir eliminar archivos multimedia"},{key:"users.view",name:"Ver usuarios",description:"Permitir ver lista de usuarios"},{key:"users.create",name:"Crear usuarios",description:"Permitir crear nuevos usuarios"},{key:"users.edit",name:"Editar usuarios",description:"Permitir modificar usuarios existentes"},{key:"users.delete",name:"Eliminar usuarios",description:"Permitir eliminar usuarios"},{key:"analytics.view",name:"Ver analíticas",description:"Permitir acceso a datos de analíticas"},{key:"settings.edit",name:"Editar configuración",description:"Permitir modificar configuración del sistema"},{key:"backups.create",name:"Crear backups",description:"Permitir generar respaldos"},{key:"backups.restore",name:"Restaurar backups",description:"Permitir restaurar desde respaldos"}]);fe(()=>{V(),o()});const V=async(j=1)=>{try{b.value=!0;const q={page:j,search:w.value||void 0,role:r.value!=="all"?r.value:void 0},Y=await He.getAll(q);Y.data.success?(u.value=Y.data.data,i.value=Y.data.pagination):console.error("Error al cargar usuarios:",Y.data.message)}catch(q){console.error("Error al cargar usuarios:",q),alert("Error al cargar los usuarios")}finally{b.value=!1}},o=async()=>{try{const j=await He.getRoles();j.data.success?c.value=j.data.data:console.error("Error al cargar roles:",j.data.message)}catch(j){console.error("Error al cargar roles:",j)}};J(()=>u.value.filter(j=>j.status==="active").length),J(()=>u.value.filter(j=>j.status==="pending").length);const t=J(()=>{let j=u.value;if(w.value){const q=w.value.toLowerCase();j=j.filter(Y=>Y.name.toLowerCase().includes(q)||Y.email.toLowerCase().includes(q))}return s.value!=="all"&&(j=j.filter(q=>q.status===s.value)),r.value!=="all"&&(j=j.filter(q=>q.role_id==r.value)),j}),a=j=>j.split(" ").map(q=>q[0]).join("").substring(0,2).toUpperCase(),L=j=>j.role?j.role.name:"Sin rol",E=j=>{if(!j.role)return"role-none";switch(j.role.name.toLowerCase()){case"admin":return"role-admin";case"editor":return"role-editor";default:return"role-user"}},d=j=>{const q=T.value.find(Y=>Y.key===j);return q?q.name:j},v=j=>new Date(j).toLocaleDateString("es-ES"),z=j=>{U.value={...j,password:"",send_welcome_email:!1},m.value=!0},k=()=>{$.value=!1,m.value=!1,U.value={name:"",email:"",title:"",role_id:"",password:"",phone:"",send_welcome_email:!0}},x=async()=>{try{b.value=!0;const j={name:U.value.name,email:U.value.email,role_id:parseInt(U.value.role_id)};!m.value&&U.value.password&&(j.password=U.value.password,j.password_confirmation=U.value.password);let q;m.value?q=await He.update(U.value.id,j):q=await He.create(j),q.data.success?(k(),alert(q.data.message||`Usuario ${m.value?"actualizado":"creado"} correctamente`),await V()):alert(q.data.message||"Error al guardar usuario")}catch(j){console.error("Error al guardar usuario:",j),alert("Error al guardar el usuario")}finally{b.value=!1}},oe=async j=>{if(confirm(`¿Estás seguro de eliminar a ${j.name}? Esta acción no se puede deshacer.`))try{b.value=!0;const q=await He.delete(j.id);q.data.success?(alert(q.data.message||"Usuario eliminado correctamente"),await V()):alert(q.data.message||"Error al eliminar usuario")}catch(q){console.error("Error al eliminar usuario:",q),alert("Error al eliminar el usuario")}finally{b.value=!1}},X=()=>{M.value=!1,S.value=null},K=()=>{S.value={name:"",description:"",permissions:[]}},Q=j=>{S.value={...j}},W=()=>{S.value=null},ee=()=>{if(console.log("Saving role:",S.value),S.value.id){const j=c.value.findIndex(q=>q.id===S.value.id);j!==-1&&(c.value[j]={...S.value})}else{const j={...S.value,id:Date.now(),system_role:!1};c.value.push(j)}S.value=null,alert(`Rol ${S.value?.id?"actualizado":"creado"} correctamente`)},pe=j=>{if(confirm(`¿Estás seguro de eliminar el rol "${j.name}"?`)){const q=c.value.findIndex(Y=>Y.id===j.id);q!==-1&&c.value.splice(q,1),console.log(`Role deleted: ${j.id}`)}};return(j,q)=>(l(),n("div",qb,[e("div",Hb,[q[20]||(q[20]=e("h2",null,"Usuarios y Roles",-1)),e("div",Ob,[e("button",{onClick:q[0]||(q[0]=Y=>$.value=!0),class:"btn-primary"},[_(N,{name:"plus"}),q[18]||(q[18]=B(" Nuevo Usuario ",-1))]),e("button",{onClick:q[1]||(q[1]=Y=>M.value=!0),class:"btn-secondary"},[_(N,{name:"cog"}),q[19]||(q[19]=B(" Gestionar Roles ",-1))])])]),e("div",jb,[e("div",Wb,[e("div",Zb,[_(N,{name:"cube"})]),e("div",Xb,[e("h3",null,f(u.value.length),1),q[21]||(q[21]=e("p",null,"Total Usuarios",-1))])]),e("div",Kb,[e("div",Jb,[_(N,{name:"check"})]),e("div",Qb,[e("h3",null,f(u.value.filter(Y=>Y.role?.name==="admin").length),1),q[22]||(q[22]=e("p",null,"Administradores",-1))])]),e("div",Yb,[e("div",ey,[_(N,{name:"clock"})]),e("div",oy,[e("h3",null,f(u.value.filter(Y=>Y.role?.name==="editor").length),1),q[23]||(q[23]=e("p",null,"Editores",-1))])]),e("div",ty,[e("div",sy,[_(N,{name:"globe"})]),e("div",ly,[e("h3",null,f(c.value.length),1),q[24]||(q[24]=e("p",null,"Roles Definidos",-1))])])]),e("div",ay,[e("div",ny,[e("div",iy,[_(N,{name:"search"}),g(e("input",{type:"text","onUpdate:modelValue":q[2]||(q[2]=Y=>w.value=Y),placeholder:"Buscar usuarios...",class:"search-input",onKeyup:q[3]||(q[3]=lo(Y=>V(),["enter"]))},null,544),[[I,w.value]])]),g(e("select",{"onUpdate:modelValue":q[4]||(q[4]=Y=>r.value=Y),onChange:q[5]||(q[5]=Y=>V()),class:"filter-select"},[q[25]||(q[25]=e("option",{value:"all"},"Todos los roles",-1)),(l(!0),n(te,null,le(c.value,Y=>(l(),n("option",{key:Y.id,value:Y.name},f(Y.name),9,ry))),128))],544),[[ie,r.value]])])]),e("div",dy,[e("div",uy,[e("table",cy,[q[26]||(q[26]=e("thead",null,[e("tr",null,[e("th",null,"Usuario"),e("th",null,"Email"),e("th",null,"Rol"),e("th",null,"Fecha registro"),e("th",null,"Acciones")])],-1)),e("tbody",null,[(l(!0),n(te,null,le(t.value,Y=>(l(),n("tr",{key:Y.id,class:"user-row"},[e("td",null,[e("div",py,[e("div",vy,[Y.avatar?(l(),n("img",{key:0,src:Y.avatar,alt:Y.name},null,8,my)):(l(),n("span",gy,f(a(Y.name)),1))]),e("div",fy,[e("span",by,f(Y.name),1),e("small",yy,f(Y.title||"Sin título"),1)])])]),e("td",null,[e("span",ky,f(Y.email),1)]),e("td",null,[e("span",{class:O(["role-badge",E(Y)])},f(L(Y)),3)]),e("td",null,[e("span",$y,f(v(Y.created_at)),1)]),e("td",null,[e("div",hy,[e("button",{onClick:A=>z(Y),class:"btn-icon",title:"Editar usuario"},[_(N,{name:"edit"})],8,Cy),Y.id!==C.value?(l(),n("button",{key:0,onClick:A=>oe(Y),class:"btn-icon danger",title:"Eliminar usuario"},[_(N,{name:"trash"})],8,_y)):R("",!0)])])]))),128))])])])]),$.value||m.value?(l(),n("div",{key:0,class:"modal-overlay",onClick:k},[e("div",{class:"modal-content",onClick:q[13]||(q[13]=ce(()=>{},["stop"]))},[e("div",wy,[e("h3",null,f(m.value?"Editar Usuario":"Nuevo Usuario"),1),e("button",{onClick:k,class:"btn-close"},[_(N,{name:"close"})])]),e("div",Sy,[e("form",{onSubmit:ce(x,["prevent"])},[e("div",xy,[e("div",Ey,[q[27]||(q[27]=e("label",{for:"user-name"},"Nombre completo",-1)),g(e("input",{type:"text",id:"user-name","onUpdate:modelValue":q[6]||(q[6]=Y=>U.value.name=Y),class:"form-input",required:""},null,512),[[I,U.value.name]])]),e("div",Iy,[q[28]||(q[28]=e("label",{for:"user-email"},"Email",-1)),g(e("input",{type:"email",id:"user-email","onUpdate:modelValue":q[7]||(q[7]=Y=>U.value.email=Y),class:"form-input",required:""},null,512),[[I,U.value.email]])])]),e("div",Uy,[e("div",Vy,[q[29]||(q[29]=e("label",{for:"user-title"},"Título/Cargo",-1)),g(e("input",{type:"text",id:"user-title","onUpdate:modelValue":q[8]||(q[8]=Y=>U.value.title=Y),class:"form-input",placeholder:"Ej: Administrador, Editor"},null,512),[[I,U.value.title]])]),e("div",My,[q[31]||(q[31]=e("label",{for:"user-role"},"Rol",-1)),g(e("select",{id:"user-role","onUpdate:modelValue":q[9]||(q[9]=Y=>U.value.role_id=Y),class:"form-input",required:""},[q[30]||(q[30]=e("option",{value:""},"Seleccionar rol",-1)),(l(!0),n(te,null,le(c.value,Y=>(l(),n("option",{key:Y.id,value:Y.id},f(Y.name),9,Ty))),128))],512),[[ie,U.value.role_id]])])]),m.value?R("",!0):(l(),n("div",Py,[q[32]||(q[32]=e("label",{for:"user-password"},"Contraseña",-1)),g(e("input",{type:"password",id:"user-password","onUpdate:modelValue":q[10]||(q[10]=Y=>U.value.password=Y),class:"form-input",required:"",minlength:"8"},null,512),[[I,U.value.password]]),q[33]||(q[33]=e("small",{class:"form-help"},"Mínimo 8 caracteres",-1))])),e("div",By,[q[34]||(q[34]=e("label",{for:"user-phone"},"Teléfono",-1)),g(e("input",{type:"tel",id:"user-phone","onUpdate:modelValue":q[11]||(q[11]=Y=>U.value.phone=Y),class:"form-input"},null,512),[[I,U.value.phone]])]),e("div",Ay,[e("label",Ly,[g(e("input",{type:"checkbox","onUpdate:modelValue":q[12]||(q[12]=Y=>U.value.send_welcome_email=Y)},null,512),[[ke,U.value.send_welcome_email]]),q[35]||(q[35]=e("span",{class:"checkmark"},null,-1)),q[36]||(q[36]=B(" Enviar email de bienvenida ",-1))])])],32)]),e("div",Dy,[e("button",{onClick:k,class:"btn-secondary"},[_(N,{name:"close"}),q[37]||(q[37]=B(" Cancelar ",-1))]),e("button",{onClick:x,class:"btn-primary"},[_(N,{name:"save"}),B(" "+f(m.value?"Actualizar":"Crear")+" Usuario ",1)])])])])):R("",!0),M.value?(l(),n("div",{key:1,class:"modal-overlay",onClick:X},[e("div",{class:"modal-content large",onClick:q[17]||(q[17]=ce(()=>{},["stop"]))},[e("div",Ry,[q[38]||(q[38]=e("h3",null,"Gestión de Roles",-1)),e("button",{onClick:X,class:"btn-close"},[_(N,{name:"close"})])]),e("div",Fy,[e("div",zy,[e("div",Gy,[q[40]||(q[40]=e("h4",null,"Roles Existentes",-1)),e("button",{onClick:K,class:"btn-primary btn-sm"},[_(N,{name:"plus"}),q[39]||(q[39]=B(" Nuevo Rol ",-1))])]),e("div",Ny,[(l(!0),n(te,null,le(c.value,Y=>(l(),n("div",{key:Y.id,class:"role-card"},[e("div",qy,[e("div",Hy,[e("h5",null,f(Y.name),1),e("p",null,f(Y.description),1)]),e("div",Oy,[e("button",{onClick:A=>Q(Y),class:"btn-icon"},[_(N,{name:"edit"})],8,jy),Y.system_role?R("",!0):(l(),n("button",{key:0,onClick:A=>pe(Y),class:"btn-icon danger"},[_(N,{name:"trash"})],8,Wy))])]),e("div",Zy,[q[41]||(q[41]=e("h6",null,"Permisos:",-1)),e("div",Xy,[(l(!0),n(te,null,le(Y.permissions,A=>(l(),n("div",{key:A,class:"permission-tag"},f(d(A)),1))),128))])])]))),128))])]),S.value?(l(),n("div",Ky,[e("h4",null,f(S.value.id?"Editar Rol":"Nuevo Rol"),1),e("form",{onSubmit:ce(ee,["prevent"])},[e("div",Jy,[q[42]||(q[42]=e("label",{for:"role-name"},"Nombre del rol",-1)),g(e("input",{type:"text",id:"role-name","onUpdate:modelValue":q[14]||(q[14]=Y=>S.value.name=Y),class:"form-input",required:""},null,512),[[I,S.value.name]])]),e("div",Qy,[q[43]||(q[43]=e("label",{for:"role-description"},"Descripción",-1)),g(e("textarea",{id:"role-description","onUpdate:modelValue":q[15]||(q[15]=Y=>S.value.description=Y),class:"form-input",rows:"3"},null,512),[[I,S.value.description]])]),e("div",Yy,[q[45]||(q[45]=e("label",null,"Permisos",-1)),e("div",ek,[(l(!0),n(te,null,le(T.value,Y=>(l(),n("div",{key:Y.key,class:"permission-item"},[e("label",ok,[g(e("input",{type:"checkbox",value:Y.key,"onUpdate:modelValue":q[16]||(q[16]=A=>S.value.permissions=A)},null,8,tk),[[ke,S.value.permissions]]),q[44]||(q[44]=e("span",{class:"checkmark"},null,-1)),e("div",sk,[e("span",lk,f(Y.name),1),e("small",ak,f(Y.description),1)])])]))),128))])]),e("div",nk,[e("button",{type:"button",onClick:W,class:"btn-secondary"}," Cancelar "),e("button",ik,f(S.value.id?"Actualizar":"Crear")+" Rol ",1)])],32)])):R("",!0)])])])):R("",!0)]))}},dk=re(rk,[["__scopeId","data-v-0a1aff23"]]),uk={class:"backups-manager"},ck={class:"backups-header"},pk={class:"header-actions"},vk=["disabled"],mk={class:"backup-stats"},gk={class:"stat-card"},fk={class:"stat-icon"},bk={class:"stat-content"},yk={class:"stat-card"},kk={class:"stat-icon"},$k={class:"stat-content"},hk={class:"stat-card"},Ck={class:"stat-icon"},_k={class:"stat-content"},wk={class:"stat-card"},Sk={class:"stat-icon"},xk={class:"stat-content"},Ek={class:"backup-config"},Ik={class:"config-card"},Uk={class:"config-content"},Vk={class:"config-row"},Mk={class:"config-group"},Tk={class:"checkbox-label"},Pk={key:0,class:"config-group"},Bk={class:"config-row"},Ak={class:"config-group"},Lk={class:"config-group"},Dk={class:"backups-list-section"},Rk={class:"backups-card"},Fk={class:"backups-card-header"},zk={class:"list-actions"},Gk={key:0,class:"empty-state"},Nk={key:1,class:"backups-table-container"},qk={class:"backups-table"},Hk={class:"backup-name"},Ok={key:0},jk=["onKeyup","onBlur"],Wk={class:"backup-actions"},Zk=["onClick"],Xk=["onClick","disabled"],Kk=["onClick","disabled"],Jk=["onClick"],Qk=["onClick"],Yk={key:2,class:"pagination"},e$=["disabled"],o$={class:"pagination-info"},t$=["disabled"],s$={class:"modal-header"},l$={key:0,class:"modal-body"},a$={class:"detail-section"},n$={class:"detail-grid"},i$={class:"detail-item"},r$={class:"detail-item"},d$={class:"detail-item"},u$={class:"detail-item"},c$={class:"detail-item"},p$={key:0,class:"detail-item"},v$={key:0,class:"detail-section"},m$={class:"backup-contents"},g$={class:"content-type"},f$={class:"content-count"},b$={class:"content-size"},y$={key:1,class:"detail-section"},k$={class:"metadata-list"},$$={class:"modal-footer"},h$={class:"modal-header"},C$={class:"modal-body"},_$={class:"warning-message"},w$={class:"restore-options"},S$={class:"checkbox-label"},x$={class:"checkbox-label"},E$={class:"modal-footer"},I$={__name:"BackupsManager",setup(p){const u=D([]),c=D(!1),b=D({current_page:1,last_page:1,per_page:10,total:0}),i=D({}),w=D(""),s=D("all"),r=D(1),$=D(10),m=D(!1),M=D(!1),C=D(!1),S=D(null),U=D(null),T=D(null),V=D(""),o=D(null),t=D(!0),a=D("weekly"),L=D("30"),E=D(50),d=D({createBackupBefore:!0,notifyUsers:!1});fe(()=>{v(),z(),k()});const v=async(se=1)=>{try{c.value=!0;const F={page:se,search:w.value||void 0,type:s.value!=="all"?s.value:void 0},ae=await Le.getAll(F);ae.data.success?(u.value=ae.data.data,b.value=ae.data.pagination):console.error("Error al cargar backups:",ae.data.message)}catch(F){console.error("Error al cargar backups:",F),alert("Error al cargar los backups")}finally{c.value=!1}},z=async()=>{try{const se=await Le.getStats();se.data.success&&(i.value=se.data.data)}catch(se){console.error("Error al cargar estadísticas:",se)}},k=()=>{const se=localStorage.getItem("backup-config");if(se){const F=JSON.parse(se);t.value=F.autoBackupEnabled,a.value=F.autoBackupFrequency,L.value=F.retentionPolicy,E.value=F.maxBackups}},x=J(()=>i.value.total_size||0),oe=J(()=>i.value.last_backup?Ce(i.value.last_backup.created_at):"Nunca"),X=J(()=>{let se=u.value;if(w.value){const F=w.value.toLowerCase();se=se.filter(ae=>ae.name.toLowerCase().includes(F)||ae.description?.toLowerCase().includes(F))}return s.value!=="all"&&(se=se.filter(F=>F.type===s.value)),se.sort((F,ae)=>new Date(ae.created_at)-new Date(F.created_at))}),K=J(()=>Math.ceil(X.value.length/$.value)),Q=J(()=>{const se=(r.value-1)*$.value,F=se+$.value;return X.value.slice(se,F)}),W=async()=>{try{m.value=!0;const se={description:"Backup manual creado desde el panel de administración",include_database:!0,include_files:!0,include_media:!0},F=await Le.create(se);F.data.success?(alert(F.data.message||"Backup iniciado exitosamente"),await v(),await z()):alert(F.data.message||"Error al crear backup")}catch(se){console.error("Error al crear backup:",se),alert("Error al crear el backup")}finally{m.value=!1}},ee=()=>{const se={autoBackupEnabled:t.value,autoBackupFrequency:a.value,retentionPolicy:L.value,maxBackups:E.value};localStorage.setItem("backup-config",JSON.stringify(se)),alert("Configuración de backups guardada correctamente")},pe=async se=>{try{const F=await Le.download(se.id),ae=window.URL.createObjectURL(new Blob([F.data])),ye=document.createElement("a");ye.href=ae,ye.download=se.filename||se.name+".zip",document.body.appendChild(ye),ye.click(),document.body.removeChild(ye),window.URL.revokeObjectURL(ae),alert(`Descarga iniciada: ${se.name}`)}catch(F){console.error("Error al descargar backup:",F),alert("Error al descargar el backup")}},j=se=>{U.value=se,C.value=!0},q=async()=>{try{const se={create_backup_before:d.value.createBackupBefore,notify_users:d.value.notifyUsers},F=await Le.restore(U.value.id,se);F.data.success?(alert(F.data.message||`Restauración iniciada: ${U.value.name}`),await v()):alert(F.data.message||"Error al restaurar backup")}catch(se){console.error("Error al restaurar backup:",se),alert("Error al restaurar el backup")}finally{y()}},Y=se=>{S.value=se,M.value=!0},A=async se=>{if(confirm(`¿Estás seguro de eliminar el backup "${se.name}"?`))try{const F=await Le.delete(se.id);F.data.success?(alert(F.data.message||"Backup eliminado correctamente"),await v(),await z()):alert(F.data.message||"Error al eliminar backup")}catch(F){console.error("Error al eliminar backup:",F),alert("Error al eliminar el backup")}},h=()=>{M.value=!1,S.value=null},y=()=>{C.value=!1,U.value=null,d.value={createBackupBefore:!0,notifyUsers:!1}},P=se=>{T.value=se,V.value=se.name},H=async se=>{if(!V.value.trim()){Z();return}try{const F=await Le.update(se.id,{name:V.value.trim()});F.data.success?(se.name=V.value.trim(),alert("Nombre del backup actualizado correctamente")):alert(F.data.message||"Error al actualizar el nombre")}catch(F){console.error("Error al actualizar nombre:",F),alert("Error al actualizar el nombre del backup")}finally{Z()}},Z=()=>{T.value=null,V.value=""},ue=()=>{o.value?.click()},be=async se=>{const F=se.target.files[0];if(!F)return;const ae=new FormData;ae.append("backup_file",F),ae.append("description",`Backup importado: ${F.name}`);try{const vo=await(await fetch("https://r-integra.com/api/backups/import",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:ae})).json();vo.success?(alert(`Backup importado correctamente: ${F.name}`),await v(),await z()):alert(vo.message||"Error al importar el backup")}catch(ye){console.error("Error al importar backup:",ye),alert("Error al importar el backup")}se.target.value=""},me=se=>{if(!se||se===0)return"0 B";const F=1024,ae=["B","KB","MB","GB"],ye=Math.floor(Math.log(se)/Math.log(F));return parseFloat((se/Math.pow(F,ye)).toFixed(2))+" "+ae[ye]},Ce=se=>new Date(se).toLocaleDateString("es-ES"),Fe=se=>new Date(se).toLocaleString("es-ES"),co=se=>({auto:"Automático",manual:"Manual",scheduled:"Programado"})[se]||se,po=se=>({completed:"Completado",in_progress:"En progreso",failed:"Fallido",cancelled:"Cancelado"})[se]||se,Zo=se=>({Páginas:"document-text",Medios:"photo",CRM:"envelope",Configuración:"cog"})[se]||"document",Xo=se=>se.replace(/([A-Z])/g," $1").replace(/^./,F=>F.toUpperCase());return(se,F)=>(l(),n("div",uk,[e("div",ck,[F[15]||(F[15]=e("h2",null,"Gestión de Backups",-1)),e("div",pk,[e("button",{onClick:ue,class:"btn-secondary"},[_(N,{name:"upload"}),F[14]||(F[14]=B(" Importar Backup ",-1))]),e("button",{onClick:W,class:"btn-primary",disabled:m.value},[_(N,{name:"plus"}),B(" "+f(m.value?"Creando...":"Crear Backup"),1)],8,vk),e("input",{ref_key:"fileInput",ref:o,type:"file",accept:".zip,.sql",onChange:be,style:{display:"none"}},null,544)])]),e("div",mk,[e("div",gk,[e("div",fk,[_(N,{name:"server"})]),e("div",bk,[e("h3",null,f(u.value.length),1),F[16]||(F[16]=e("p",null,"Backups Totales",-1))])]),e("div",yk,[e("div",kk,[_(N,{name:"clock"})]),e("div",$k,[e("h3",null,f(me(x.value)),1),F[17]||(F[17]=e("p",null,"Espacio Usado",-1))])]),e("div",hk,[e("div",Ck,[_(N,{name:"calendar"})]),e("div",_k,[e("h3",null,f(oe.value),1),F[18]||(F[18]=e("p",null,"Último Backup",-1))])]),e("div",wk,[e("div",Sk,[_(N,{name:"cog"})]),e("div",xk,[e("h3",null,f(t.value?"Activo":"Inactivo"),1),F[19]||(F[19]=e("p",null,"Backup Automático",-1))])])]),e("div",Ek,[e("div",Ik,[F[28]||(F[28]=e("div",{class:"config-header"},[e("h3",null,"Configuración de Backups")],-1)),e("div",Uk,[e("div",Vk,[e("div",Mk,[e("label",Tk,[g(e("input",{type:"checkbox","onUpdate:modelValue":F[0]||(F[0]=ae=>t.value=ae)},null,512),[[ke,t.value]]),F[20]||(F[20]=e("span",{class:"checkmark"},null,-1)),F[21]||(F[21]=B(" Habilitar backups automáticos ",-1))])]),t.value?(l(),n("div",Pk,[F[23]||(F[23]=e("label",{for:"backup-frequency"},"Frecuencia de backup automático",-1)),g(e("select",{id:"backup-frequency","onUpdate:modelValue":F[1]||(F[1]=ae=>a.value=ae),class:"form-input"},F[22]||(F[22]=[e("option",{value:"daily"},"Diario",-1),e("option",{value:"weekly"},"Semanal",-1),e("option",{value:"monthly"},"Mensual",-1)]),512),[[ie,a.value]])])):R("",!0)]),e("div",Bk,[e("div",Ak,[F[25]||(F[25]=e("label",{for:"retention-policy"},"Política de retención",-1)),g(e("select",{id:"retention-policy","onUpdate:modelValue":F[2]||(F[2]=ae=>L.value=ae),class:"form-input"},F[24]||(F[24]=[Se('<option value="7" data-v-3c9ca27f>Conservar 7 días</option><option value="30" data-v-3c9ca27f>Conservar 30 días</option><option value="90" data-v-3c9ca27f>Conservar 90 días</option><option value="365" data-v-3c9ca27f>Conservar 1 año</option><option value="0" data-v-3c9ca27f>Conservar todo</option>',5)]),512),[[ie,L.value]])]),e("div",Lk,[F[26]||(F[26]=e("label",{for:"max-backups"},"Máximo número de backups",-1)),g(e("input",{type:"number",id:"max-backups","onUpdate:modelValue":F[3]||(F[3]=ae=>E.value=ae),min:"1",max:"100",class:"form-input"},null,512),[[I,E.value,void 0,{number:!0}]])])]),e("button",{onClick:ee,class:"btn-primary"},[_(N,{name:"save"}),F[27]||(F[27]=B(" Guardar Configuración ",-1))])])])]),e("div",Dk,[e("div",Rk,[e("div",Fk,[F[30]||(F[30]=e("h3",null,"Historial de Backups",-1)),e("div",zk,[g(e("input",{type:"text","onUpdate:modelValue":F[4]||(F[4]=ae=>w.value=ae),placeholder:"Buscar backups...",class:"search-input"},null,512),[[I,w.value]]),g(e("select",{"onUpdate:modelValue":F[5]||(F[5]=ae=>s.value=ae),class:"filter-select"},F[29]||(F[29]=[e("option",{value:"all"},"Todos los tipos",-1),e("option",{value:"auto"},"Automático",-1),e("option",{value:"manual"},"Manual",-1),e("option",{value:"scheduled"},"Programado",-1)]),512),[[ie,s.value]])])]),X.value.length===0?(l(),n("div",Gk,[_(N,{name:"server"}),F[31]||(F[31]=e("h3",null,"No hay backups",-1)),F[32]||(F[32]=e("p",null,"Los backups creados aparecerán aquí",-1))])):(l(),n("div",Nk,[e("table",qk,[F[33]||(F[33]=e("thead",null,[e("tr",null,[e("th",null,"Nombre del Backup"),e("th",null,"Tipo"),e("th",null,"Tamaño"),e("th",null,"Fecha de Creación"),e("th",null,"Estado"),e("th",null,"Acciones")])],-1)),e("tbody",null,[(l(!0),n(te,null,le(Q.value,ae=>(l(),n("tr",{key:ae.id,class:"backup-row"},[e("td",null,[e("div",Hk,[_(N,{name:"document"}),T.value?.id!==ae.id?(l(),n("span",Ok,f(ae.name),1)):g((l(),n("input",{key:1,"onUpdate:modelValue":F[6]||(F[6]=ye=>V.value=ye),onKeyup:[lo(ye=>H(ae),["enter"]),lo(Z,["escape"])],class:"backup-name-input",onBlur:ye=>H(ae)},null,40,jk)),[[I,V.value]])])]),e("td",null,[e("span",{class:O(["backup-type",ae.type])},f(co(ae.type)),3)]),e("td",null,f(ae.size_formatted||me(ae.size)),1),e("td",null,f(Fe(ae.created_at)),1),e("td",null,[e("span",{class:O(["status-badge",ae.status])},f(po(ae.status)),3)]),e("td",null,[e("div",Wk,[e("button",{onClick:ye=>P(ae),class:"btn-icon",title:"Editar nombre"},[_(N,{name:"edit"})],8,Zk),e("button",{onClick:ye=>pe(ae),class:"btn-icon",title:"Descargar",disabled:ae.status!=="completed"},[_(N,{name:"download"})],8,Xk),e("button",{onClick:ye=>j(ae),class:"btn-icon",title:"Restaurar",disabled:ae.status!=="completed"},[_(N,{name:"reload"})],8,Kk),e("button",{onClick:ye=>Y(ae),class:"btn-icon",title:"Ver detalles"},[_(N,{name:"eye"})],8,Jk),e("button",{onClick:ye=>A(ae),class:"btn-icon btn-danger",title:"Eliminar"},[_(N,{name:"delete"})],8,Qk)])])]))),128))])])])),K.value>1?(l(),n("div",Yk,[e("button",{onClick:F[7]||(F[7]=ae=>r.value--),disabled:r.value===1,class:"btn-pagination"},[_(N,{name:"arrow-left"}),F[34]||(F[34]=B(" Anterior ",-1))],8,e$),e("span",o$," Página "+f(r.value)+" de "+f(K.value)+" ("+f(X.value.length)+" backups) ",1),e("button",{onClick:F[8]||(F[8]=ae=>r.value++),disabled:r.value===K.value,class:"btn-pagination"},[F[35]||(F[35]=B(" Siguiente ",-1)),_(N,{name:"arrow-right"})],8,t$)])):R("",!0)])]),M.value?(l(),n("div",{key:0,class:"modal-overlay",onClick:h},[e("div",{class:"modal-content",onClick:F[10]||(F[10]=ce(()=>{},["stop"]))},[e("div",s$,[F[36]||(F[36]=e("h3",null,"Detalles del Backup",-1)),e("button",{onClick:h,class:"btn-close"},[_(N,{name:"close"})])]),S.value?(l(),n("div",l$,[e("div",a$,[F[43]||(F[43]=e("h4",null,"Información General",-1)),e("div",n$,[e("div",i$,[F[37]||(F[37]=e("label",null,"Nombre:",-1)),e("span",null,f(S.value.name),1)]),e("div",r$,[F[38]||(F[38]=e("label",null,"Tipo:",-1)),e("span",null,f(co(S.value.type)),1)]),e("div",d$,[F[39]||(F[39]=e("label",null,"Tamaño:",-1)),e("span",null,f(me(S.value.size)),1)]),e("div",u$,[F[40]||(F[40]=e("label",null,"Estado:",-1)),e("span",{class:O(["status-badge",S.value.status])},f(po(S.value.status)),3)]),e("div",c$,[F[41]||(F[41]=e("label",null,"Fecha de creación:",-1)),e("span",null,f(Fe(S.value.created_at)),1)]),S.value.description?(l(),n("div",p$,[F[42]||(F[42]=e("label",null,"Descripción:",-1)),e("span",null,f(S.value.description),1)])):R("",!0)])]),S.value.contents?(l(),n("div",v$,[F[44]||(F[44]=e("h4",null,"Contenido del Backup",-1)),e("div",m$,[(l(!0),n(te,null,le(S.value.contents,ae=>(l(),n("div",{key:ae.type,class:"content-item"},[_(N,{name:Zo(ae.type)},null,8,["name"]),e("span",g$,f(ae.type),1),e("span",f$,f(ae.count)+" elementos",1),e("span",b$,f(me(ae.size)),1)]))),128))])])):R("",!0),S.value.metadata?(l(),n("div",y$,[F[45]||(F[45]=e("h4",null,"Metadatos",-1)),e("div",k$,[(l(!0),n(te,null,le(S.value.metadata,(ae,ye)=>(l(),n("div",{key:ye,class:"metadata-item"},[e("label",null,f(Xo(ye))+":",1),e("span",null,f(ae),1)]))),128))])])):R("",!0)])):R("",!0),e("div",$$,[e("button",{onClick:h,class:"btn-secondary"},[_(N,{name:"close"}),F[46]||(F[46]=B(" Cerrar ",-1))]),S.value?.status==="completed"?(l(),n("button",{key:0,onClick:F[9]||(F[9]=ae=>pe(S.value)),class:"btn-primary"},[_(N,{name:"download"}),F[47]||(F[47]=B(" Descargar ",-1))])):R("",!0)])])])):R("",!0),C.value?(l(),n("div",{key:1,class:"modal-overlay",onClick:y},[e("div",{class:"modal-content",onClick:F[13]||(F[13]=ce(()=>{},["stop"]))},[e("div",h$,[F[48]||(F[48]=e("h3",null,"Confirmar Restauración",-1)),e("button",{onClick:y,class:"btn-close"},[_(N,{name:"close"})])]),e("div",C$,[e("div",_$,[_(N,{name:"warning"}),e("div",null,[F[51]||(F[51]=e("h4",null,"¡Atención!",-1)),F[52]||(F[52]=e("p",null,"Esta acción reemplazará todos los datos actuales del sistema con el contenido del backup seleccionado.",-1)),e("p",null,[F[49]||(F[49]=e("strong",null,"Backup a restaurar:",-1)),B(" "+f(U.value?.name),1)]),e("p",null,[F[50]||(F[50]=e("strong",null,"Fecha del backup:",-1)),B(" "+f(Fe(U.value?.created_at)),1)])])]),e("div",w$,[e("label",S$,[g(e("input",{type:"checkbox","onUpdate:modelValue":F[11]||(F[11]=ae=>d.value.createBackupBefore=ae)},null,512),[[ke,d.value.createBackupBefore]]),F[53]||(F[53]=e("span",{class:"checkmark"},null,-1)),F[54]||(F[54]=B(" Crear backup automático antes de restaurar ",-1))]),e("label",x$,[g(e("input",{type:"checkbox","onUpdate:modelValue":F[12]||(F[12]=ae=>d.value.notifyUsers=ae)},null,512),[[ke,d.value.notifyUsers]]),F[55]||(F[55]=e("span",{class:"checkmark"},null,-1)),F[56]||(F[56]=B(" Notificar a usuarios sobre la restauración ",-1))])])]),e("div",E$,[e("button",{onClick:y,class:"btn-secondary"},[_(N,{name:"close"}),F[57]||(F[57]=B(" Cancelar ",-1))]),e("button",{onClick:q,class:"btn-danger"},[_(N,{name:"reload"}),F[58]||(F[58]=B(" Confirmar Restauración ",-1))])])])])):R("",!0)]))}},U$=re(I$,[["__scopeId","data-v-3c9ca27f"]]),V$={class:"tiptap-editor-container"},M$={key:0,class:"editor-toolbar"},T$={class:"toolbar-row"},P$={class:"toolbar-group"},B$=["value"],A$={class:"toolbar-group"},L$={class:"toolbar-group"},D$={class:"toolbar-row"},R$={class:"toolbar-group"},F$={class:"toolbar-group"},z$=["disabled"],G$=["title"],N$={key:0,class:"custom-indicator"},q$={class:"tiptap-editor-area"},H$=ve({__name:"TiptapEditor",props:{modelValue:{}},emits:["update:modelValue"],setup(p,{emit:u}){const c=p,b=u,i=D(!1),w=D(c.modelValue||"<p>Escribe tu texto aquí...</p>"),s=D(!1),r=o=>{const t=/<[^>]+style\s*=\s*["'][^"']*["'][^>]*>/i.test(o),a=/<div[^>]*>/i.test(o),L=/<[^>]+class\s*=\s*["'][^"']*["'][^>]*>/i.test(o);return t||a||L},$=At.create({name:"customDiv",group:"block",content:"block*",parseHTML(){return[{tag:"div",getAttrs:o=>o instanceof HTMLElement&&(o.hasAttribute("style")||o.hasAttribute("class"))?{}:!1}]},renderHTML({HTMLAttributes:o}){return["div",o,0]},addAttributes(){return{style:{default:null,parseHTML:o=>o.getAttribute("style"),renderHTML:o=>o.style?{style:o.style}:{}},class:{default:null,parseHTML:o=>o.getAttribute("class"),renderHTML:o=>o.class?{class:o.class}:{}}}}}),m=no({content:c.modelValue||"<p>Escribe tu texto aquí...</p>",extensions:[ro.configure({dropcursor:{color:"#DBEAFE",width:4},blockquote:!1,code:!1,codeBlock:!1}),$,Lt,Dt.configure({types:["textStyle"]}),Rt.configure({multicolor:!0}),Ft.configure({types:["heading","paragraph","customDiv"]}),zt,Gt.configure({openOnClick:!1,HTMLAttributes:{class:"custom-link"}}),Nt,qt,Ht.configure({HTMLAttributes:{class:"custom-code-block"}})],editorProps:{attributes:{class:"prose prose-sm focus:outline-none min-h-[200px] p-4 tiptap-content"}},parseOptions:{preserveWhitespace:"full"},enableInputRules:!0,enablePasteRules:!0,onUpdate:({editor:o})=>{if(o){const t=o.getHTML();w.value=t,s.value=r(t),b("update:modelValue",t)}}}),M=o=>{if(!m.value)return;const t=o.target,a=t.value,L=t.selectedOptions[0];if(a==="paragraph")m.value.chain().focus().setParagraph().run();else if(a==="heading"){const E=parseInt(L.dataset.level||"1");m.value.chain().focus().toggleHeading({level:E}).run()}},C=()=>!m.value||m.value.isActive("paragraph")?"paragraph":m.value.isActive("heading")?"heading":"paragraph",S=()=>{if(!m.value)return;const o=m.value.getAttributes("link").href,t=window.prompt("URL del enlace:",o);if(t!==null){if(t===""){m.value.chain().focus().extendMarkRange("link").unsetLink().run();return}m.value.chain().focus().extendMarkRange("link").setLink({href:t}).run()}},U=()=>{m.value&&(i.value?(s.value=r(w.value),m.value.commands.setContent(w.value),b("update:modelValue",w.value),i.value=!1):(w.value=m.value.getHTML(),i.value=!0))},T=()=>{s.value=r(w.value),b("update:modelValue",w.value)};return xe(()=>c.modelValue,o=>{try{const t=o||"<p>Escribe tu texto aquí...</p>";w.value=t,s.value=r(t),m.value&&!m.value.isDestroyed&&o!==m.value.getHTML()&&m.value.commands.setContent(t)}catch(t){console.error("Error syncing editor content:",t)}}),(()=>{const o=c.modelValue||"<p>Escribe tu texto aquí...</p>";w.value=o,s.value=r(o)})(),(o,t)=>(l(),n("div",V$,[G(m)?(l(),n("div",M$,[e("div",T$,[e("div",P$,[e("select",{onChange:t[0]||(t[0]=a=>M(a)),class:"text-type-select",value:C()},t[17]||(t[17]=[Se('<option value="paragraph" data-v-bda567ae>Párrafo</option><option value="heading" data-level="1" data-v-bda567ae>Título H1</option><option value="heading" data-level="2" data-v-bda567ae>Título H2</option><option value="heading" data-level="3" data-v-bda567ae>Título H3</option><option value="heading" data-level="4" data-v-bda567ae>Título H4</option><option value="heading" data-level="5" data-v-bda567ae>Título H5</option><option value="heading" data-level="6" data-v-bda567ae>Título H6</option>',7)]),40,B$)]),t[26]||(t[26]=e("div",{class:"toolbar-separator"},null,-1)),e("div",A$,[e("button",{onClick:t[1]||(t[1]=a=>G(m).chain().focus().toggleBold().run()),class:O([{active:G(m).isActive("bold")},"toolbar-btn"]),title:"Negrita (Ctrl+B)"},t[18]||(t[18]=[e("strong",null,"B",-1)]),2),e("button",{onClick:t[2]||(t[2]=a=>G(m).chain().focus().toggleItalic().run()),class:O([{active:G(m).isActive("italic")},"toolbar-btn"]),title:"Cursiva (Ctrl+I)"},t[19]||(t[19]=[e("em",null,"I",-1)]),2),e("button",{onClick:t[3]||(t[3]=a=>G(m).chain().focus().toggleUnderline().run()),class:O([{active:G(m).isActive("underline")},"toolbar-btn"]),title:"Subrayado (Ctrl+U)"},t[20]||(t[20]=[e("span",{style:{"text-decoration":"underline"}},"U",-1)]),2),e("button",{onClick:t[4]||(t[4]=a=>G(m).chain().focus().toggleStrike().run()),class:O([{active:G(m).isActive("strike")},"toolbar-btn"]),title:"Tachado"},t[21]||(t[21]=[e("span",{style:{"text-decoration":"line-through"}},"S",-1)]),2)]),t[27]||(t[27]=e("div",{class:"toolbar-separator"},null,-1)),e("div",L$,[e("button",{onClick:t[5]||(t[5]=a=>G(m).chain().focus().setTextAlign("left").run()),class:O([{active:G(m).isActive({textAlign:"left"})},"toolbar-btn"]),title:"Alinear izquierda"},t[22]||(t[22]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M3 4H21V6H3V4ZM3 19H17V21H3V19ZM3 14H21V16H3V14ZM3 9H17V11H3V9Z"})],-1)]),2),e("button",{onClick:t[6]||(t[6]=a=>G(m).chain().focus().setTextAlign("center").run()),class:O([{active:G(m).isActive({textAlign:"center"})},"toolbar-btn"]),title:"Centrar"},t[23]||(t[23]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M3 4H21V6H3V4ZM5 19H19V21H5V19ZM3 14H21V16H3V14ZM5 9H19V11H5V9Z"})],-1)]),2),e("button",{onClick:t[7]||(t[7]=a=>G(m).chain().focus().setTextAlign("right").run()),class:O([{active:G(m).isActive({textAlign:"right"})},"toolbar-btn"]),title:"Alinear derecha"},t[24]||(t[24]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M3 4H21V6H3V4ZM3 19H17V21H3V19ZM3 14H21V16H3V14ZM3 9H17V11H3V9Z"})],-1)]),2),e("button",{onClick:t[8]||(t[8]=a=>G(m).chain().focus().setTextAlign("justify").run()),class:O([{active:G(m).isActive({textAlign:"justify"})},"toolbar-btn"]),title:"Justificar"},t[25]||(t[25]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM3 14H21V16H3V14ZM3 9H21V11H3V9Z"})],-1)]),2)])]),e("div",D$,[e("div",R$,[e("button",{onClick:t[9]||(t[9]=a=>G(m).chain().focus().toggleBulletList().run()),class:O([{active:G(m).isActive("bulletList")},"toolbar-btn"]),title:"Lista con viñetas"}," • ",2),e("button",{onClick:t[10]||(t[10]=a=>G(m).chain().focus().toggleOrderedList().run()),class:O([{active:G(m).isActive("orderedList")},"toolbar-btn"]),title:"Lista numerada"}," 1. ",2),e("button",{onClick:t[11]||(t[11]=a=>G(m).chain().focus().toggleBlockquote().run()),class:O([{active:G(m).isActive("blockquote")},"toolbar-btn"]),title:"Cita"},' " ',2),e("button",{onClick:t[12]||(t[12]=a=>G(m).chain().focus().toggleCode().run()),class:O([{active:G(m).isActive("code")},"toolbar-btn"]),title:"Código inline"}," </> ",2)]),t[29]||(t[29]=e("div",{class:"toolbar-separator"},null,-1)),e("div",F$,[e("button",{onClick:t[13]||(t[13]=a=>S()),class:O([{active:G(m).isActive("link")},"toolbar-btn"]),title:"Enlace"},[_(N,{name:"link"})],2),e("button",{onClick:t[14]||(t[14]=a=>G(m).chain().focus().unsetLink().run()),class:"toolbar-btn",title:"Quitar enlace",disabled:!G(m).isActive("link")}," 🔗⛔ ",8,z$),e("button",{onClick:t[15]||(t[15]=a=>G(m).chain().focus().clearNodes().unsetAllMarks().run()),class:"toolbar-btn",title:"Limpiar formato"}," ✗ "),e("button",{onClick:U,class:O([{active:i.value,"has-custom":s.value},"toolbar-btn"]),title:s.value?"HTML personalizado detectado - Click para editar":"Editar HTML directo"},[t[28]||(t[28]=B(" </> ",-1)),s.value?(l(),n("span",N$,"●")):R("",!0)],10,G$)])])])):R("",!0),e("div",q$,[i.value?R("",!0):(l(),he(G(io),{key:0,editor:G(m),class:"tiptap-editor"},null,8,["editor"])),i.value?g((l(),n("textarea",{key:1,"onUpdate:modelValue":t[16]||(t[16]=a=>w.value=a),onInput:T,class:"raw-html-editor",placeholder:"Ingresa tu HTML personalizado aquí..."},null,544)),[[I,w.value]]):R("",!0)])]))}}),uo=re(H$,[["__scopeId","data-v-bda567ae"]]),Ve="https://r-integra.com/api",Oe={async getAll(){try{console.log("Fetching notes from:",`${Ve}/notes`);const p=await Te.get(`${Ve}/notes`);return console.log("Notes response:",p.data),p.data}catch(p){throw console.error("Error fetching notes:",p),console.error("API URL:",`${Ve}/notes`),console.error("Error details:",p.response||p.message),p}},async getById(p){try{return(await Te.get(`${Ve}/notes/${p}`)).data}catch(u){throw console.error("Error fetching note:",u),u}},async create(p){try{return(await Te.post(`${Ve}/notes`,p)).data}catch(u){throw console.error("Error creating note:",u),u}},async update(p,u){try{return(await Te.put(`${Ve}/notes/${p}`,u)).data}catch(c){throw console.error("Error updating note:",c),c}},async delete(p){try{return(await Te.delete(`${Ve}/notes/${p}`)).data}catch(u){throw console.error("Error deleting note:",u),u}},async search(p,u={}){try{const c=new URLSearchParams({q:p,...u});return(await Te.get(`${Ve}/notes/search?${c}`)).data}catch(c){throw console.error("Error searching notes:",c),c}},async getCategories(){try{return(await Te.get(`${Ve}/notes/categories`)).data}catch(p){throw console.error("Error fetching categories:",p),p}}},O$={class:"notes-manager"},j$={class:"notes-header"},W$={class:"header-actions"},Z$={class:"notes-stats"},X$={class:"stat-card"},K$={class:"stat-icon"},J$={class:"stat-content"},Q$={class:"stat-card"},Y$={class:"stat-icon"},e2={class:"stat-content"},o2={class:"stat-card"},t2={class:"stat-icon"},s2={class:"stat-content"},l2={class:"stat-card"},a2={class:"stat-icon"},n2={class:"stat-content"},i2={class:"notes-controls"},r2={class:"search-section"},d2={class:"search-input-group"},u2={class:"filters-section"},c2=["value"],p2={class:"notes-container"},v2={key:0,class:"empty-state"},m2={key:0},g2={key:1},f2={key:1,class:"notes-grid"},b2=["onClick"],y2={class:"note-header"},k2={class:"note-title-section"},$2={key:0,class:"note-category"},h2=["onClick","title"],C2=["onClick"],_2=["onClick"],w2=["innerHTML"],S2={class:"note-meta"},x2={class:"note-date"},E2={class:"note-word-count"},I2={key:2,class:"pagination"},U2=["disabled"],V2={class:"pagination-info"},M2=["disabled"],T2={key:0,class:"modal-overlay"},P2={class:"modal-header"},B2={class:"modal-body"},A2={class:"form-row"},L2={class:"form-group"},D2={class:"form-group"},R2={id:"categories-list"},F2=["value"],z2={class:"form-group"},G2={class:"editor-container"},N2={class:"modal-footer"},q2={class:"form-options"},H2={class:"checkbox-label"},O2={class:"action-buttons"},j2=["disabled"],W2={key:1,class:"modal-overlay"},Z2={class:"modal-header"},X2={class:"view-header-info"},K2={key:0,class:"note-category"},J2={class:"view-header-actions"},Q2={class:"modal-body"},Y2={class:"note-metadata"},eh={class:"meta-item"},oh={class:"meta-item"},th={class:"meta-item"},sh=["innerHTML"],lh={__name:"NotesManager",setup(p){const u=D([]),c=D(""),b=D(""),i=D("updated_at"),w=D(!1),s=D(1),r=D(12),$=D(!1),m=D(!1),M=D(!1),C=D(!1),S=D(!1),U=D(null),T=D({title:"",content:"",category:"",is_favorite:!1}),V=D(null);fe(()=>{z()});const o=J(()=>u.value.map(y=>y.category).filter(y=>y&&y.trim()).filter((y,P,H)=>H.indexOf(y)===P).sort()),t=J(()=>{const h=new Date;return h.setDate(h.getDate()-7),u.value.filter(y=>new Date(y.updated_at)>h).length}),a=J(()=>u.value.filter(h=>h.is_favorite).length),L=J(()=>o.value.length),E=J(()=>{let h=[...u.value];if(c.value){const y=c.value.toLowerCase();h=h.filter(P=>P.title.toLowerCase().includes(y)||P.content.toLowerCase().includes(y)||P.category&&P.category.toLowerCase().includes(y))}return b.value&&(h=h.filter(y=>y.category===b.value)),w.value&&(h=h.filter(y=>y.is_favorite)),h.sort((y,P)=>{switch(i.value){case"title":return y.title.localeCompare(P.title);case"category":return(y.category||"").localeCompare(P.category||"");case"created_at":return new Date(P.created_at)-new Date(y.created_at);case"updated_at":default:return new Date(P.updated_at)-new Date(y.updated_at)}}),h}),d=J(()=>Math.ceil(E.value.length/r.value)),v=J(()=>{const h=(s.value-1)*r.value,y=h+r.value;return E.value.slice(h,y)}),z=async()=>{try{$.value=!0;const h=await Oe.getAll();u.value=h.data}catch(h){console.error("Error loading notes:",h),alert("Error al cargar las notas")}finally{$.value=!1}},k=async()=>{if(!T.value.title.trim()||!T.value.content.trim()){alert("El título y el contenido son obligatorios");return}try{if(m.value=!0,S.value){const h=await Oe.update(V.value,T.value),y=u.value.findIndex(P=>P.id===V.value);y>-1&&(u.value[y]=h.data)}else{const h=await Oe.create(T.value);u.value.unshift(h.data)}W(),alert(S.value?"Nota actualizada correctamente":"Nota creada correctamente")}catch(h){console.error("Error saving note:",h),alert("Error al guardar la nota")}finally{m.value=!1}},x=async h=>{if(confirm(`¿Estás seguro de eliminar la nota "${h.title}"?`))try{await Oe.delete(h.id);const y=u.value.findIndex(P=>P.id===h.id);y>-1&&u.value.splice(y,1),alert("Nota eliminada correctamente")}catch(y){console.error("Error deleting note:",y),alert("Error al eliminar la nota")}},oe=async h=>{try{const y={...h,is_favorite:!h.is_favorite},P=await Oe.update(h.id,y),H=u.value.findIndex(Z=>Z.id===h.id);H>-1&&(u.value[H]=P.data),U.value?.id===h.id&&(U.value=P.data)}catch(y){console.error("Error toggling favorite:",y),alert("Error al actualizar favorito")}},X=()=>{T.value={title:"",content:"",category:"",is_favorite:!1},S.value=!1,V.value=null,M.value=!0},K=h=>{T.value={title:h.title,content:h.content,category:h.category||"",is_favorite:h.is_favorite},S.value=!0,V.value=h.id,M.value=!0},Q=()=>{U.value&&(pe(),K(U.value))},W=()=>{M.value=!1,S.value=!1,V.value=null,T.value={title:"",content:"",category:"",is_favorite:!1}},ee=h=>{U.value=h,C.value=!0},pe=()=>{C.value=!1,U.value=null},j=h=>{const y=new Date(h),H=Math.abs(new Date-y),Z=Math.ceil(H/(1e3*60*60*24));return Z===1?"Hoy":Z===2?"Ayer":Z<=7?`Hace ${Z-1} días`:y.toLocaleDateString("es-ES")},q=h=>new Date(h).toLocaleString("es-ES"),Y=h=>{const y=h.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim();return y.length>150?y.substring(0,150)+"...":y},A=h=>{if(!h)return 0;const y=h.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim();return y?y.split(" ").length:0};return(h,y)=>(l(),n("div",O$,[e("div",j$,[y[15]||(y[15]=e("h2",null,"Gestión de Notas",-1)),e("div",W$,[e("button",{onClick:X,class:"btn-primary"},[_(N,{name:"plus"}),y[14]||(y[14]=B(" Nueva Nota ",-1))])])]),e("div",Z$,[e("div",X$,[e("div",K$,[_(N,{name:"document-text"})]),e("div",J$,[e("h3",null,f(u.value.length),1),y[16]||(y[16]=e("p",null,"Total de Notas",-1))])]),e("div",Q$,[e("div",Y$,[_(N,{name:"eye"})]),e("div",e2,[e("h3",null,f(t.value),1),y[17]||(y[17]=e("p",null,"Recientes (7 días)",-1))])]),e("div",o2,[e("div",t2,[_(N,{name:"star"})]),e("div",s2,[e("h3",null,f(a.value),1),y[18]||(y[18]=e("p",null,"Favoritas",-1))])]),e("div",l2,[e("div",a2,[_(N,{name:"folder"})]),e("div",n2,[e("h3",null,f(L.value),1),y[19]||(y[19]=e("p",null,"Categorías",-1))])])]),e("div",i2,[e("div",r2,[e("div",d2,[_(N,{name:"magnifying-glass"}),g(e("input",{type:"text","onUpdate:modelValue":y[0]||(y[0]=P=>c.value=P),placeholder:"Buscar notas...",class:"search-input"},null,512),[[I,c.value]])])]),e("div",u2,[g(e("select",{"onUpdate:modelValue":y[1]||(y[1]=P=>b.value=P),class:"filter-select"},[y[20]||(y[20]=e("option",{value:""},"Todas las categorías",-1)),(l(!0),n(te,null,le(o.value,P=>(l(),n("option",{key:P,value:P},f(P),9,c2))),128))],512),[[ie,b.value]]),g(e("select",{"onUpdate:modelValue":y[2]||(y[2]=P=>i.value=P),class:"filter-select"},y[21]||(y[21]=[e("option",{value:"updated_at"},"Más recientes",-1),e("option",{value:"created_at"},"Fecha de creación",-1),e("option",{value:"title"},"Alfabético",-1),e("option",{value:"category"},"Por categoría",-1)]),512),[[ie,i.value]]),e("button",{onClick:y[3]||(y[3]=P=>w.value=!w.value),class:O(["btn-filter",{active:w.value}])},[_(N,{name:"star"}),y[22]||(y[22]=B(" Solo favoritas ",-1))],2)])]),e("div",p2,[E.value.length===0?(l(),n("div",v2,[_(N,{name:"document-text"}),y[24]||(y[24]=e("h3",null,"No hay notas",-1)),c.value||b.value||w.value?(l(),n("p",m2," No se encontraron notas con los filtros aplicados ")):(l(),n("p",g2,"Crea tu primera nota para comenzar")),e("button",{onClick:X,class:"btn-primary"},[_(N,{name:"plus"}),y[23]||(y[23]=B(" Crear Primera Nota ",-1))])])):(l(),n("div",f2,[(l(!0),n(te,null,le(v.value,P=>(l(),n("div",{key:P.id,class:"note-card",onClick:H=>ee(P)},[e("div",y2,[e("div",k2,[e("h3",null,f(P.title),1),P.category?(l(),n("span",$2,f(P.category),1)):R("",!0)]),e("div",{class:"note-actions",onClick:y[4]||(y[4]=ce(()=>{},["stop"]))},[e("button",{onClick:H=>oe(P),class:O(["btn-icon",{favorite:P.is_favorite}]),title:P.is_favorite?"Quitar de favoritos":"Agregar a favoritos"},[_(N,{name:"star"})],10,h2),e("button",{onClick:H=>K(P),class:"btn-icon",title:"Editar"},[_(N,{name:"edit"})],8,C2),e("button",{onClick:H=>x(P),class:"btn-icon btn-danger",title:"Eliminar"},[_(N,{name:"delete"})],8,_2)])]),e("div",{class:"note-preview",innerHTML:Y(P.content)},null,8,w2),e("div",S2,[e("span",x2,[_(N,{name:"clock"}),B(" "+f(j(P.updated_at)),1)]),e("span",E2,f(A(P.content))+" palabras",1)])],8,b2))),128))])),d.value>1?(l(),n("div",I2,[e("button",{onClick:y[5]||(y[5]=P=>s.value--),disabled:s.value===1,class:"btn-pagination"},[_(N,{name:"chevron-left"}),y[25]||(y[25]=B(" Anterior ",-1))],8,U2),e("span",V2," Página "+f(s.value)+" de "+f(d.value)+" ("+f(E.value.length)+" notas) ",1),e("button",{onClick:y[6]||(y[6]=P=>s.value++),disabled:s.value===d.value,class:"btn-pagination"},[y[26]||(y[26]=B(" Siguiente ",-1)),_(N,{name:"chevron-right"})],8,M2)])):R("",!0)]),M.value?(l(),n("div",T2,[e("div",{class:"modal-content large-modal",onClick:y[11]||(y[11]=ce(()=>{},["stop"]))},[e("div",P2,[e("p",null,f(S.value?"Editar Nota":"Nueva Nota"),1),e("button",{onClick:W,class:"btn-close"},[_(N,{name:"close"})])]),e("form",{onSubmit:ce(k,["prevent"]),class:"modal-form"},[e("div",B2,[e("div",A2,[e("div",L2,[y[27]||(y[27]=e("label",{for:"note-title"},"Título de la nota *",-1)),g(e("input",{type:"text",id:"note-title","onUpdate:modelValue":y[7]||(y[7]=P=>T.value.title=P),class:"form-input",placeholder:"Ingresa el título de la nota",required:""},null,512),[[I,T.value.title]])]),e("div",D2,[y[28]||(y[28]=e("label",{for:"note-category"},"Categoría",-1)),g(e("input",{type:"text",id:"note-category","onUpdate:modelValue":y[8]||(y[8]=P=>T.value.category=P),class:"form-input",placeholder:"Categoría (opcional)",list:"categories-list"},null,512),[[I,T.value.category]]),e("datalist",R2,[(l(!0),n(te,null,le(o.value,P=>(l(),n("option",{key:P,value:P},null,8,F2))),128))])])]),e("div",z2,[y[29]||(y[29]=e("label",null,"Contenido *",-1)),e("div",G2,[_(uo,{modelValue:T.value.content,"onUpdate:modelValue":y[9]||(y[9]=P=>T.value.content=P),loading:m.value},null,8,["modelValue","loading"])])])]),e("div",N2,[e("div",q2,[e("label",H2,[g(e("input",{type:"checkbox","onUpdate:modelValue":y[10]||(y[10]=P=>T.value.is_favorite=P)},null,512),[[ke,T.value.is_favorite]]),y[30]||(y[30]=e("span",{class:"checkmark"},null,-1)),y[31]||(y[31]=B(" Marcar como favorita ",-1))])]),e("div",O2,[e("button",{type:"button",onClick:W,class:"btn-secondary"},[_(N,{name:"close"}),y[32]||(y[32]=B(" Cancelar ",-1))]),e("button",{type:"submit",class:"btn-primary",disabled:m.value},[_(N,{name:"save"}),B(" "+f(m.value?"Guardando...":S.value?"Actualizar":"Crear Nota"),1)],8,j2)])])],32)])])):R("",!0),C.value?(l(),n("div",W2,[e("div",{class:"modal-content large-modal",onClick:y[13]||(y[13]=ce(()=>{},["stop"]))},[e("div",Z2,[e("div",X2,[e("h3",null,f(U.value?.title),1),U.value?.category?(l(),n("span",K2,f(U.value.category),1)):R("",!0)]),e("div",J2,[e("button",{onClick:y[12]||(y[12]=P=>oe(U.value)),class:O(["btn-icon",{favorite:U.value?.is_favorite}])},[_(N,{name:"star"})],2),e("button",{onClick:Q,class:"btn-icon"},[_(N,{name:"edit"})]),e("button",{onClick:pe,class:"btn-close"},[_(N,{name:"close"})])])]),e("div",Q2,[e("div",Y2,[e("span",eh,[_(N,{name:"calendar"}),B(" Creada: "+f(q(U.value?.created_at)),1)]),e("span",oh,[_(N,{name:"clock"}),B(" Actualizada: "+f(q(U.value?.updated_at)),1)]),e("span",th,[_(N,{name:"document-text"}),B(" "+f(A(U.value?.content))+" palabras ",1)])]),e("div",{class:"note-content-view",innerHTML:U.value?.content},null,8,sh)])])])):R("",!0)]))}},ah=re(lh,[["__scopeId","data-v-44de2ea3"]]),nh={class:"admin-dashboard"},ih={class:"admin-layout"},rh={class:"sidebar"},dh={class:"sidebar-nav"},uh={key:0,class:"nav-section"},ch={key:1,class:"nav-section"},ph={key:2,class:"nav-section"},vh={key:3,class:"nav-section"},mh={class:"sidebar-footer"},gh={class:"main-content"},fh={class:"dashboard-header"},bh={class:"header-actions"},yh={href:"/",target:"_blank",class:"btn-visit-site"},kh={key:0,class:"dashboard-stats"},$h={class:"stat-card"},hh={class:"stat-icon"},Ch={class:"stat-content"},_h={class:"stat-card"},wh={class:"stat-icon"},Sh={class:"stat-content"},xh={class:"stat-card"},Eh={class:"stat-icon"},Ih={class:"stat-content"},Uh={key:1,class:"dashboard-content"},Vh={class:"pages-section"},Mh={class:"section-header"},Th={class:"pages-table-container"},Ph={class:"pages-table"},Bh={class:"sort-order"},Ah={class:"order-controls"},Lh={class:"move-buttons"},Dh=["onClick","disabled"],Rh=["onClick","disabled"],Fh={class:"page-title"},zh={class:"title-wrapper"},Gh={class:"page-slug"},Nh={class:"parent-info"},qh={class:"main-page-info"},Hh={key:0,class:"main-page-badge"},Oh={key:1},jh={class:"featured-info"},Wh={key:0,class:"featured-badge"},Zh={key:1},Xh={class:"page-actions"},Kh=["onClick"],Jh=["onClick"],Qh=["onClick"],Yh={class:"sort-order"},e0={class:"order-controls subpage-order"},o0={class:"move-buttons"},t0=["onClick","disabled"],s0=["onClick","disabled"],l0={class:"page-title"},a0={class:"title-wrapper subpage-title"},n0={class:"page-slug"},i0={class:"parent-info"},r0={class:"main-page-info"},d0={key:0,class:"main-page-badge"},u0={key:1},c0={class:"featured-info"},p0={key:0,class:"featured-badge"},v0={key:1},m0={class:"page-actions"},g0=["onClick"],f0=["onClick"],b0=["onClick"],y0={key:2,class:"dashboard-content"},k0={key:3,class:"dashboard-content"},$0={key:4,class:"dashboard-content"},h0={key:5,class:"dashboard-content"},C0={key:6,class:"dashboard-content"},_0={key:7,class:"dashboard-content"},w0={key:8,class:"dashboard-content"},S0={__name:"AdminDashboard",setup(p){const u=We(),c=rr(),b=qe(),{canViewPages:i,canViewConfig:w,canViewMedia:s,canViewUsers:r,canViewCrm:$,canViewAnalytics:m,canViewNotes:M,canViewBackups:C}=dr(),S=D(!1),U=D(!1),T=D(null),V=D("pages"),o=J(()=>c.pages),t=J(()=>o.value.filter(P=>!P.parent_id).sort((P,H)=>(P.sort_order||0)-(H.sort_order||0)).map(P=>({...P,children:o.value.filter(H=>H.parent_id===P.id).sort((H,Z)=>(H.sort_order||0)-(Z.sort_order||0))}))),a=J(()=>o.value.filter(y=>y.status==="published").length),L=J(()=>o.value.filter(y=>y.status==="draft").length);fe(async()=>{!b.user&&b.token&&await b.fetchUser(),v(),E()}),xe(()=>b.user,y=>{y&&(console.log("User loaded in AdminDashboard, setting default section"),E())},{immediate:!0});const E=()=>{console.log("Setting default section. Current user:",b.user),console.log("Permission checks:",{canViewPages:i.value,canViewConfig:w.value,canViewMedia:s.value,canViewCrm:$.value,canViewAnalytics:m.value,canViewUsers:r.value,canViewBackups:C.value,canViewNotes:M.value}),d()?console.log("Can access current section:",V.value):(console.log("Cannot access current section, finding alternative"),i.value?(console.log("Setting section to pages"),V.value="pages"):w.value?(console.log("Setting section to global-config"),V.value="global-config"):s.value?(console.log("Setting section to media"),V.value="media"):$.value?(console.log("Setting section to crm"),V.value="crm"):m.value?(console.log("Setting section to analytics"),V.value="analytics"):r.value?(console.log("Setting section to users"),V.value="users"):C.value?(console.log("Setting section to backups"),V.value="backups"):M.value&&(console.log("Setting section to notes"),V.value="notes"))},d=()=>{switch(V.value){case"pages":return i.value;case"global-config":return w.value;case"media":return s.value;case"crm":return $.value;case"analytics":return m.value;case"users":return r.value;case"backups":return C.value;case"notes":return M.value;default:return!1}},v=()=>{c.fetchPages()},z=y=>{T.value={...y},U.value=!0},k=y=>{u.push(`/admin/pages/${y.id}/blocks`)},x=async y=>{if(confirm(`¿Estás seguro de eliminar la página "${y.title}"?`))try{await c.deletePage(y.id)}catch{alert("Error al eliminar la página")}},oe=async y=>{try{U.value?await c.updatePage(T.value.id,y):await c.createPage(y),X()}catch{alert("Error al guardar la página")}},X=()=>{S.value=!1,U.value=!1,T.value=null},K=y=>{const P=V.value;V.value=y,!d()&&(V.value=P,alert("No tienes permisos para acceder a esta sección"))},Q=async y=>{const P=t.value.filter(Z=>!Z.parent_id),H=P.findIndex(Z=>Z.id===y.id);if(H>0){const Z=[];P.forEach((ue,be)=>{let me;be===H-1?me=H:be===H?me=H-1:me=be,Z.push({id:ue.id,sort_order:me})}),await we.updateOrder({pages:Z}),await v()}},W=async y=>{const P=t.value.filter(Z=>!Z.parent_id),H=P.findIndex(Z=>Z.id===y.id);if(H<P.length-1){const Z=[];P.forEach((ue,be)=>{let me;be===H?me=H+1:be===H+1?me=H:me=be,Z.push({id:ue.id,sort_order:me})}),await we.updateOrder({pages:Z}),await v()}},ee=y=>t.value.filter(H=>!H.parent_id).findIndex(H=>H.id===y.id)===0,pe=y=>{const P=t.value.filter(H=>!H.parent_id);return P.findIndex(H=>H.id===y.id)===P.length-1},j=async(y,P)=>{const H=y.children,Z=H.findIndex(ue=>ue.id===P.id);if(Z>0){const ue=[];H.forEach((be,me)=>{let Ce;me===Z-1?Ce=Z:me===Z?Ce=Z-1:Ce=me,ue.push({id:be.id,sort_order:Ce})}),await we.updateOrder({pages:ue}),await v()}},q=async(y,P)=>{const H=y.children,Z=H.findIndex(ue=>ue.id===P.id);if(Z<H.length-1){const ue=[];H.forEach((be,me)=>{let Ce;me===Z?Ce=Z+1:me===Z+1?Ce=Z:Ce=me,ue.push({id:be.id,sort_order:Ce})}),await we.updateOrder({pages:ue}),await v()}},Y=(y,P)=>y.children.findIndex(Z=>Z.id===P.id)===0,A=(y,P)=>{const H=y.children;return H.findIndex(Z=>Z.id===P.id)===H.length-1},h=()=>{u.push("/login")};return(y,P)=>{const H=Ie("Icon");return l(),n("div",nh,[e("div",ih,[e("div",rh,[P[22]||(P[22]=e("div",{class:"sidebar-header"},[e("h2",null,"Tulbrand cms")],-1)),e("nav",dh,[G(i)||G(w)||G(s)?(l(),n("div",uh,[P[12]||(P[12]=e("h3",{class:"nav-title"},"Sitio Web",-1)),G(i)?(l(),n("a",{key:0,href:"#",class:O(["nav-item",{active:V.value==="pages"}]),onClick:P[0]||(P[0]=Z=>K("pages"))},[_(H,{name:"document-text"}),P[9]||(P[9]=e("span",null,"Páginas",-1))],2)):R("",!0),G(w)?(l(),n("a",{key:1,href:"#",class:O(["nav-item",{active:V.value==="global-config"}]),onClick:P[1]||(P[1]=Z=>K("global-config"))},[_(H,{name:"cog"}),P[10]||(P[10]=e("span",null,"Configuración Global",-1))],2)):R("",!0),G(s)?(l(),n("a",{key:2,href:"#",class:O(["nav-item",{active:V.value==="media"}]),onClick:P[2]||(P[2]=Z=>K("media"))},[_(H,{name:"photo"}),P[11]||(P[11]=e("span",null,"Medios",-1))],2)):R("",!0)])):R("",!0),G($)||G(m)?(l(),n("div",ch,[P[15]||(P[15]=e("h3",{class:"nav-title"},"Marketing",-1)),G($)?(l(),n("a",{key:0,href:"#",class:O(["nav-item",{active:V.value==="crm"}]),onClick:P[3]||(P[3]=Z=>K("crm"))},[_(H,{name:"envelope"}),P[13]||(P[13]=e("span",null,"CRM",-1))],2)):R("",!0),G(m)?(l(),n("a",{key:1,href:"#",class:O(["nav-item",{active:V.value==="analytics"}]),onClick:P[4]||(P[4]=Z=>K("analytics"))},[_(H,{name:"magnifying-glass"}),P[14]||(P[14]=e("span",null,"Analíticas",-1))],2)):R("",!0)])):R("",!0),G(r)||G(C)?(l(),n("div",ph,[P[18]||(P[18]=e("h3",{class:"nav-title"},"Administración",-1)),G(r)?(l(),n("a",{key:0,href:"#",class:O(["nav-item",{active:V.value==="users"}]),onClick:P[5]||(P[5]=Z=>K("users"))},[_(H,{name:"cube"}),P[16]||(P[16]=e("span",null,"Usuarios y Roles",-1))],2)):R("",!0),G(C)?(l(),n("a",{key:1,href:"#",class:O(["nav-item",{active:V.value==="backups"}]),onClick:P[6]||(P[6]=Z=>K("backups"))},[_(H,{name:"cloud-arrow-up"}),P[17]||(P[17]=e("span",null,"Backups y Exportar",-1))],2)):R("",!0)])):R("",!0),G(M)?(l(),n("div",vh,[P[20]||(P[20]=e("h3",{class:"nav-title"},"Utilidades",-1)),G(M)?(l(),n("a",{key:0,href:"#",class:O(["nav-item",{active:V.value==="notes"}]),onClick:P[7]||(P[7]=Z=>K("notes"))},[_(H,{name:"document-text"}),P[19]||(P[19]=e("span",null,"Notas",-1))],2)):R("",!0)])):R("",!0)]),e("div",mh,[e("button",{onClick:h,class:"btn-danger btn-logout"},[_(H,{name:"logout"}),P[21]||(P[21]=B(" Cerrar Sesión ",-1))])])]),e("div",gh,[e("div",fh,[e("div",bh,[e("a",yh,[_(H,{name:"external-link"}),P[23]||(P[23]=B(" Visitar Sitio Web ",-1))]),V.value==="pages"?(l(),n("button",{key:0,onClick:v,class:"btn-secondary"},[_(H,{name:"refresh"}),P[24]||(P[24]=B(" Actualizar ",-1))])):R("",!0)])]),V.value==="pages"?(l(),n("div",kh,[e("div",$h,[e("div",hh,[_(H,{name:"document-text"})]),e("div",Ch,[e("h3",null,f(o.value.length),1),P[25]||(P[25]=e("p",null,"Páginas Totales",-1))])]),e("div",_h,[e("div",wh,[_(H,{name:"eye"})]),e("div",Sh,[e("h3",null,f(a.value),1),P[26]||(P[26]=e("p",null,"Páginas Publicadas",-1))])]),e("div",xh,[e("div",Eh,[_(H,{name:"edit"})]),e("div",Ih,[e("h3",null,f(L.value),1),P[27]||(P[27]=e("p",null,"Borradores",-1))])])])):R("",!0),V.value==="pages"&&G(i)?(l(),n("div",Uh,[e("div",Vh,[e("div",Mh,[P[29]||(P[29]=e("h2",null,"Gestionar Páginas",-1)),e("button",{onClick:P[8]||(P[8]=Z=>S.value=!0),class:"btn-primary"},[_(H,{name:"plus"}),P[28]||(P[28]=B(" Nueva Página ",-1))])]),e("div",Th,[e("table",Ph,[P[36]||(P[36]=e("thead",null,[e("tr",null,[e("th",null,"Orden"),e("th",null,"Título"),e("th",null,"Slug"),e("th",null,"Estado"),e("th",null,"Padre"),e("th",null,"Principal"),e("th",null,"Destacado"),e("th",null,"Acciones")])],-1)),e("tbody",null,[(l(!0),n(te,null,le(t.value,Z=>(l(),n(te,{key:Z.id},[e("tr",{class:O(["page-row",{featured:Z.featured}])},[e("td",Bh,[e("div",Ah,[e("div",Lh,[e("button",{onClick:ue=>Q(Z),disabled:ee(Z),class:"btn-move btn-up",title:"Mover arriba"}," ↑ ",8,Dh),e("button",{onClick:ue=>W(Z),disabled:pe(Z),class:"btn-move btn-down",title:"Mover abajo"}," ↓ ",8,Rh)])])]),e("td",Fh,[e("div",zh,[_(H,{name:"document-text"}),B(" "+f(Z.title),1)])]),e("td",Gh,"/"+f(Z.slug),1),e("td",null,[e("span",{class:O(["status-badge",Z.status])},f(Z.status==="published"?"Publicado":"Borrador"),3)]),e("td",Nh,f(Z.parent?Z.parent.title:"-"),1),e("td",qh,[Z.is_main_page===!0?(l(),n("span",Hh,"✓ Principal")):(l(),n("span",Oh,"-"))]),e("td",jh,[Z.featured?(l(),n("span",Wh,"★ Destacado")):(l(),n("span",Zh,"-"))]),e("td",Xh,[e("button",{onClick:ue=>z(Z),class:"btn-primary btn-sm"},[_(H,{name:"edit"}),P[30]||(P[30]=B(" Editar ",-1))],8,Kh),e("button",{onClick:ue=>k(Z),class:"btn-secondary btn-sm"},[_(H,{name:"document-text"}),P[31]||(P[31]=B(" Contenido ",-1))],8,Jh),e("button",{onClick:ue=>x(Z),class:"btn-danger btn-sm"},[_(H,{name:"delete"}),P[32]||(P[32]=B(" Eliminar ",-1))],8,Qh)])],2),(l(!0),n(te,null,le(Z.children,ue=>(l(),n("tr",{key:`child-${ue.id}`,class:"subpage-row"},[e("td",Yh,[e("div",e0,[e("div",o0,[e("button",{onClick:be=>j(Z,ue),disabled:Y(Z,ue),class:"btn-move btn-up",title:"Mover arriba"}," ↑ ",8,t0),e("button",{onClick:be=>q(Z,ue),disabled:A(Z,ue),class:"btn-move btn-down",title:"Mover abajo"}," ↓ ",8,s0)])])]),e("td",l0,[e("div",a0,[_(H,{name:"arrow-right"}),_(H,{name:"document-text"}),B(" "+f(ue.title),1)])]),e("td",n0,"/"+f(ue.slug),1),e("td",null,[e("span",{class:O(["status-badge",ue.status])},f(ue.status==="published"?"Publicado":"Borrador"),3)]),e("td",i0,f(Z.title),1),e("td",r0,[ue.is_main_page===!0?(l(),n("span",d0,"✓ Principal")):(l(),n("span",u0,"-"))]),e("td",c0,[ue.featured?(l(),n("span",p0,"★ Destacado")):(l(),n("span",v0,"-"))]),e("td",m0,[e("button",{onClick:be=>z(ue),class:"btn-primary btn-sm"},[_(H,{name:"edit"}),P[33]||(P[33]=B(" Editar ",-1))],8,g0),e("button",{onClick:be=>k(ue),class:"btn-secondary btn-sm"},[_(H,{name:"document-text"}),P[34]||(P[34]=B(" Contenido ",-1))],8,f0),e("button",{onClick:be=>x(ue),class:"btn-danger btn-sm"},[_(H,{name:"delete"}),P[35]||(P[35]=B(" Eliminar ",-1))],8,b0)])]))),128))],64))),128))])])])])])):R("",!0),V.value==="global-config"&&G(w)?(l(),n("div",y0,[_(mf)])):R("",!0),V.value==="media"&&G(s)?(l(),n("div",k0,[_($c)])):R("",!0),V.value==="crm"&&G($)?(l(),n("div",$0,[_(D1)])):R("",!0),V.value==="analytics"&&G(m)?(l(),n("div",h0,[_(Nb)])):R("",!0),V.value==="users"&&G(r)?(l(),n("div",C0,[_(dk)])):R("",!0),V.value==="backups"&&G(C)?(l(),n("div",_0,[_(U$)])):R("",!0),V.value==="notes"&&G(M)?(l(),n("div",w0,[_(ah)])):R("",!0)])]),(S.value||U.value)&&V.value==="pages"?(l(),he(Vr,{key:0,page:T.value,"is-editing":U.value,onSave:oe,onClose:X},null,8,["page","is-editing"])):R("",!0)])}}},x0=re(S0,[["__scopeId","data-v-9eb67cf3"]]),E0={class:"modal-overlay"},I0={class:"modal-header"},U0={class:"modal-body"},V0={class:"tabs-nav"},M0={class:"tab-content"},T0={class:"tab-pane"},P0={class:"editor-sections"},B0={class:"editor-section"},A0={class:"form-group"},L0={class:"form-group"},D0={class:"form-row"},R0={class:"form-group"},F0={class:"form-group"},z0={class:"editor-section"},G0={class:"form-group"},N0={class:"gradient-controls"},q0={class:"color-input-group"},H0={class:"color-input-group"},O0={class:"form-group"},j0={class:"color-input-group"},W0={class:"form-group"},Z0={class:"color-input-group"},X0={class:"editor-section"},K0={class:"form-group"},J0={class:"media-selector"},Q0={key:0,class:"selected-media"},Y0=["src"],eC={key:1,class:"media-placeholder"},oC={class:"form-group"},tC={class:"range-input-group"},sC={class:"range-value"},lC={class:"form-group"},aC={class:"media-selector"},nC={key:0,class:"selected-media"},iC=["src"],rC={key:1,class:"media-placeholder"},dC={class:"tab-pane"},uC={class:"editor-sections"},cC={class:"editor-section"},pC={class:"form-group"},vC={class:"form-group"},mC={class:"form-group"},gC={class:"modal-footer"},fC=ve({__name:"BannerIntegraEditor",props:{block:{}},emits:["update","close"],setup(p,{emit:u}){const c=p,b=u,i=D("general"),s=D((E=>({...E,customId:E.customId||"",customClass:E.customClass||"",customCSS:E.customCSS||""}))({...c.block})),{getFullMediaUrl:r}=Ae(),$=D(!1),m=D([]),M=D("background"),C=J(()=>({background:`radial-gradient(circle at center, ${s.value.backgroundGradient.colorStart}, ${s.value.backgroundGradient.colorEnd})`})),S=()=>{b("update",{...s.value}),b("close")},U=()=>{M.value="background",m.value=[],$.value=!0},T=()=>{M.value="person",m.value=[],$.value=!0},V=()=>{$.value=!1,m.value=[]},o=E=>{M.value==="background"?s.value.backgroundImage=r(E):M.value==="person"&&(s.value.personImage=r(E)),V()},t=()=>{s.value.backgroundImage=""},a=()=>{s.value.personImage=""},L=()=>{s.value={...s.value,title:"Organización financiera con visión estratégica",description:"Acompañamos a empresarios, emprendedores y profesionales a cumplir con sus obligaciones contables y tributarias, estructurando procesos claros, sostenibles y alineados con sus objetivos de crecimiento.",buttonText:"Agenda aquí tu cita",buttonLink:"#contacto",backgroundGradient:{colorStart:"#052b1b",colorEnd:"#0c6a44"},backgroundImage:"",backgroundImageOpacity:30,personImage:"",titleColor:"#ffffff",descriptionColor:"#ffffff"}};return xe(()=>c.block,E=>{s.value={...E}},{deep:!0}),(E,d)=>(l(),n("div",E0,[e("div",{class:"modal-content",onClick:d[20]||(d[20]=ce(()=>{},["stop"]))},[e("div",I0,[d[22]||(d[22]=e("h3",null,"Editar Banner R-Integra",-1)),e("button",{onClick:d[0]||(d[0]=v=>E.$emit("close")),class:"btn-close"},d[21]||(d[21]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",U0,[e("div",V0,[e("button",{onClick:d[1]||(d[1]=v=>i.value="general"),class:O(["tab-button",{active:i.value==="general"}])},d[23]||(d[23]=[e("i",{class:"fas fa-cog"},null,-1),B(" Configuración General ",-1)]),2),e("button",{onClick:d[2]||(d[2]=v=>i.value="attributes"),class:O(["tab-button",{active:i.value==="attributes"}])},d[24]||(d[24]=[e("i",{class:"fas fa-code"},null,-1),B(" Atributos ",-1)]),2)]),e("div",M0,[g(e("div",T0,[e("div",P0,[e("div",B0,[d[29]||(d[29]=e("h4",null,"Contenido",-1)),e("div",A0,[d[25]||(d[25]=e("label",{for:"title"},"Título Principal",-1)),g(e("input",{id:"title","onUpdate:modelValue":d[3]||(d[3]=v=>s.value.title=v),type:"text",class:"form-input",placeholder:"Organización financiera con visión estratégica"},null,512),[[I,s.value.title]])]),e("div",L0,[d[26]||(d[26]=e("label",{for:"description"},"Descripción",-1)),g(e("textarea",{id:"description","onUpdate:modelValue":d[4]||(d[4]=v=>s.value.description=v),rows:"4",class:"form-input",placeholder:"Acompañamos a empresarios, emprendedores..."},null,512),[[I,s.value.description]])]),e("div",D0,[e("div",R0,[d[27]||(d[27]=e("label",{for:"buttonText"},"Texto del Botón",-1)),g(e("input",{id:"buttonText","onUpdate:modelValue":d[5]||(d[5]=v=>s.value.buttonText=v),type:"text",class:"form-input",placeholder:"Agenda aquí tu cita"},null,512),[[I,s.value.buttonText]])]),e("div",F0,[d[28]||(d[28]=e("label",{for:"buttonLink"},"Enlace del Botón",-1)),g(e("input",{id:"buttonLink","onUpdate:modelValue":d[6]||(d[6]=v=>s.value.buttonLink=v),type:"text",class:"form-input",placeholder:"#contacto o https://..."},null,512),[[I,s.value.buttonLink]])])])]),e("div",z0,[d[35]||(d[35]=e("h4",null,"Colores",-1)),e("div",G0,[d[32]||(d[32]=e("label",null,"Degradado de Fondo",-1)),e("div",N0,[e("div",q0,[d[30]||(d[30]=e("label",{for:"colorStart"},"Color Inicial",-1)),g(e("input",{id:"colorStart","onUpdate:modelValue":d[7]||(d[7]=v=>s.value.backgroundGradient.colorStart=v),type:"color",class:"color-picker"},null,512),[[I,s.value.backgroundGradient.colorStart]]),g(e("input",{"onUpdate:modelValue":d[8]||(d[8]=v=>s.value.backgroundGradient.colorStart=v),type:"text",class:"color-text",placeholder:"#052b1b"},null,512),[[I,s.value.backgroundGradient.colorStart]])]),e("div",H0,[d[31]||(d[31]=e("label",{for:"colorEnd"},"Color Final",-1)),g(e("input",{id:"colorEnd","onUpdate:modelValue":d[9]||(d[9]=v=>s.value.backgroundGradient.colorEnd=v),type:"color",class:"color-picker"},null,512),[[I,s.value.backgroundGradient.colorEnd]]),g(e("input",{"onUpdate:modelValue":d[10]||(d[10]=v=>s.value.backgroundGradient.colorEnd=v),type:"text",class:"color-text",placeholder:"#0c6a44"},null,512),[[I,s.value.backgroundGradient.colorEnd]])])]),e("div",{class:"gradient-preview",style:de(C.value)},null,4)]),e("div",O0,[d[33]||(d[33]=e("label",{for:"titleColor"},"Color del Título",-1)),e("div",j0,[g(e("input",{id:"titleColor","onUpdate:modelValue":d[11]||(d[11]=v=>s.value.titleColor=v),type:"color",class:"color-picker"},null,512),[[I,s.value.titleColor]]),g(e("input",{"onUpdate:modelValue":d[12]||(d[12]=v=>s.value.titleColor=v),type:"text",class:"color-text",placeholder:"#ffffff"},null,512),[[I,s.value.titleColor]])])]),e("div",W0,[d[34]||(d[34]=e("label",{for:"descriptionColor"},"Color de la Descripción",-1)),e("div",Z0,[g(e("input",{id:"descriptionColor","onUpdate:modelValue":d[13]||(d[13]=v=>s.value.descriptionColor=v),type:"color",class:"color-picker"},null,512),[[I,s.value.descriptionColor]]),g(e("input",{"onUpdate:modelValue":d[14]||(d[14]=v=>s.value.descriptionColor=v),type:"text",class:"color-text",placeholder:"#ffffff"},null,512),[[I,s.value.descriptionColor]])])])]),e("div",X0,[d[46]||(d[46]=e("h4",null,"Imágenes",-1)),e("div",K0,[d[40]||(d[40]=e("label",null,"Imagen de Fondo",-1)),e("div",J0,[s.value.backgroundImage?(l(),n("div",Q0,[e("img",{src:s.value.backgroundImage,class:"media-preview",alt:"Imagen de fondo"},null,8,Y0),e("button",{onClick:t,class:"btn-remove",type:"button"},d[36]||(d[36]=[e("i",{class:"fas fa-times"},null,-1)]))])):(l(),n("div",eC,d[37]||(d[37]=[e("i",{class:"fas fa-image"},null,-1),e("p",null,"No hay imagen seleccionada",-1)]))),e("button",{onClick:U,class:"btn-media",type:"button"},d[38]||(d[38]=[e("i",{class:"fas fa-images"},null,-1),B(" Seleccionar imagen ",-1)]))]),e("div",oC,[d[39]||(d[39]=e("label",{for:"backgroundImageOpacity"},"Opacidad de Imagen de Fondo",-1)),e("div",tC,[g(e("input",{id:"backgroundImageOpacity","onUpdate:modelValue":d[15]||(d[15]=v=>s.value.backgroundImageOpacity=v),type:"range",min:"0",max:"100",step:"5",class:"range-input"},null,512),[[I,s.value.backgroundImageOpacity,void 0,{number:!0}]]),e("span",sC,f(s.value.backgroundImageOpacity)+"%",1)])])]),e("div",lC,[d[44]||(d[44]=e("label",null,"Imagen de Persona",-1)),e("div",aC,[s.value.personImage?(l(),n("div",nC,[e("img",{src:s.value.personImage,class:"media-preview",alt:"Imagen de persona"},null,8,iC),e("button",{onClick:a,class:"btn-remove",type:"button"},d[41]||(d[41]=[e("i",{class:"fas fa-times"},null,-1)]))])):(l(),n("div",rC,d[42]||(d[42]=[e("i",{class:"fas fa-user"},null,-1),e("p",null,"No hay imagen seleccionada",-1)]))),e("button",{onClick:T,class:"btn-media",type:"button"},d[43]||(d[43]=[e("i",{class:"fas fa-images"},null,-1),B(" Seleccionar imagen ",-1)]))]),d[45]||(d[45]=e("small",{class:"form-help"},"PNG con transparencia recomendado",-1))])])])],512),[[ge,i.value==="general"]]),g(e("div",dC,[e("div",uC,[e("div",cC,[d[53]||(d[53]=e("h4",null,"Atributos del Bloque",-1)),e("div",pC,[d[47]||(d[47]=e("label",{for:"block-id"},"ID del bloque",-1)),g(e("input",{type:"text",id:"block-id","onUpdate:modelValue":d[16]||(d[16]=v=>s.value.customId=v),class:"form-input",placeholder:"mi-banner-unico"},null,512),[[I,s.value.customId]]),d[48]||(d[48]=e("small",{class:"form-help"},"ID único para este bloque (opcional)",-1))]),e("div",vC,[d[49]||(d[49]=e("label",{for:"block-class"},"Clases CSS",-1)),g(e("input",{type:"text",id:"block-class","onUpdate:modelValue":d[17]||(d[17]=v=>s.value.customClass=v),class:"form-input",placeholder:"mi-banner otra-clase"},null,512),[[I,s.value.customClass]]),d[50]||(d[50]=e("small",{class:"form-help"},"Clases CSS separadas por espacios (opcional)",-1))]),e("div",mC,[d[51]||(d[51]=e("label",{for:"custom-css"},"CSS Personalizado",-1)),g(e("textarea",{id:"custom-css","onUpdate:modelValue":d[18]||(d[18]=v=>s.value.customCSS=v),rows:"12",class:"form-input css-editor",placeholder:`/* CSS personalizado para este banner */
.mi-banner {
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
  border-radius: 20px;
}

.mi-banner .title {
  text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
  font-size: 3rem;
}

.mi-banner .button {
  animation: pulse 2s infinite;
}`},null,512),[[I,s.value.customCSS]]),d[52]||(d[52]=e("small",{class:"form-help"},"Este CSS se aplicará únicamente a este banner",-1))])])])],512),[[ge,i.value==="attributes"]])])]),e("div",gC,[e("button",{onClick:L,class:"btn-secondary"},d[54]||(d[54]=[e("i",{class:"fas fa-undo"},null,-1),B(" Restaurar por Defecto ",-1)])),e("button",{onClick:d[19]||(d[19]=v=>E.$emit("close")),class:"btn-secondary"},d[55]||(d[55]=[e("i",{class:"fas fa-times"},null,-1),B(" Cancelar ",-1)])),e("button",{onClick:S,class:"btn-primary"},d[56]||(d[56]=[e("i",{class:"fas fa-check"},null,-1),B(" Aplicar Cambios ",-1)]))])]),_(Ue,{show:$.value,"selected-media":m.value,"type-filter":"image",multiple:!1,onClose:V,onSelect:o},null,8,["show","selected-media"])]))}}),bC=re(fC,[["__scopeId","data-v-82fc7b87"]]),yC={class:"modal-overlay"},kC={class:"modal-header"},$C={class:"modal-body"},hC={class:"tabs-nav"},CC={class:"tab-content"},_C={class:"tab-pane"},wC={class:"editor-sections"},SC={class:"editor-section"},xC={class:"form-group"},EC={class:"editor-section"},IC={class:"form-group"},UC={class:"gradient-controls"},VC={class:"color-input-group"},MC={class:"color-input-group"},TC={class:"form-group"},PC={class:"color-input-group"},BC={class:"form-group"},AC={class:"color-input-group"},LC={class:"editor-section items-section"},DC={class:"items-list"},RC={class:"item-header"},FC=["onClick"],zC={class:"item-content"},GC={class:"form-group"},NC={class:"media-selector"},qC={key:0,class:"selected-media"},HC=["src","alt"],OC=["onClick"],jC={key:1,class:"media-placeholder"},WC=["onClick"],ZC={class:"form-group"},XC=["onUpdate:modelValue"],KC={class:"form-group"},JC={class:"color-input-group"},QC=["onUpdate:modelValue"],YC=["onUpdate:modelValue"],e3=["onClick"],o3={class:"add-item-section"},t3=["disabled"],s3={key:0,class:"max-items-notice"},l3={class:"tab-pane"},a3={class:"editor-sections"},n3={class:"editor-section"},i3={class:"form-group"},r3={class:"form-group"},d3={class:"form-group"},u3={class:"modal-footer"},Qe=8,c3=ve({__name:"CualidadesBlockEditor",props:{block:{}},emits:["update","close"],setup(p,{emit:u}){const c=p,b=u,i=D("general"),s=D((d=>({...d,customId:d.customId||"",customClass:d.customClass||"",customCSS:d.customCSS||""}))({...c.block})),{getFullMediaUrl:r}=Ae(),$=D(!1),m=D([]),M=D(-1),C=J(()=>({background:`radial-gradient(circle at center, ${s.value.backgroundGradient.colorStart}, ${s.value.backgroundGradient.colorEnd})`})),S=()=>{b("update",{...s.value}),b("close")},U=()=>{if(s.value.items.length<Qe){const d={image:"",text:`Cualidad ${s.value.items.length+1}`,textColor:""};s.value.items.push(d)}},T=d=>{s.value.items.splice(d,1)},V=d=>{M.value=d,m.value=[],$.value=!0},o=()=>{$.value=!1,m.value=[],M.value=-1},t=d=>{M.value>=0&&(s.value.items[M.value].image=r(d)),o()},a=d=>{s.value.items[d].image=""},L=d=>{s.value.items[d].textColor=""},E=()=>{s.value={...s.value,title:"Un enfoque claro, confiable y estructurado",titleColor:"#ffffff",itemsTextColor:"#ffffff",backgroundGradient:{colorStart:"#0c6a44",colorEnd:"#052b1b"},items:[{image:"",text:"Diagnóstico financiero y contable inicial",textColor:""},{image:"",text:"Asesoría personalizada",textColor:""},{image:"",text:"Implementación de procesos",textColor:""},{image:"",text:"Seguimiento continuo",textColor:""}]}};return xe(()=>c.block,d=>{s.value={...d}},{deep:!0}),(d,v)=>(l(),n("div",yC,[e("div",{class:"modal-content",onClick:v[16]||(v[16]=ce(()=>{},["stop"]))},[e("div",kC,[v[18]||(v[18]=e("h3",null,"Editar Cualidades",-1)),e("button",{onClick:v[0]||(v[0]=z=>d.$emit("close")),class:"btn-close"},v[17]||(v[17]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",$C,[e("div",hC,[e("button",{onClick:v[1]||(v[1]=z=>i.value="general"),class:O(["tab-button",{active:i.value==="general"}])},v[19]||(v[19]=[e("i",{class:"fas fa-cog"},null,-1),B(" Configuración General ",-1)]),2),e("button",{onClick:v[2]||(v[2]=z=>i.value="attributes"),class:O(["tab-button",{active:i.value==="attributes"}])},v[20]||(v[20]=[e("i",{class:"fas fa-code"},null,-1),B(" Atributos ",-1)]),2)]),e("div",CC,[g(e("div",_C,[e("div",wC,[e("div",SC,[v[22]||(v[22]=e("h4",null,"Configuración General",-1)),e("div",xC,[v[21]||(v[21]=e("label",{for:"title"},"Título Principal",-1)),g(e("input",{id:"title","onUpdate:modelValue":v[3]||(v[3]=z=>s.value.title=z),type:"text",class:"form-input",placeholder:"Un enfoque claro, confiable y estructurado"},null,512),[[I,s.value.title]])])]),e("div",EC,[v[28]||(v[28]=e("h4",null,"Diseño y Colores",-1)),e("div",IC,[v[25]||(v[25]=e("label",null,"Degradado de Fondo",-1)),e("div",UC,[e("div",VC,[v[23]||(v[23]=e("label",{for:"colorStart"},"Color Inicial",-1)),g(e("input",{id:"colorStart","onUpdate:modelValue":v[4]||(v[4]=z=>s.value.backgroundGradient.colorStart=z),type:"color",class:"color-picker"},null,512),[[I,s.value.backgroundGradient.colorStart]]),g(e("input",{"onUpdate:modelValue":v[5]||(v[5]=z=>s.value.backgroundGradient.colorStart=z),type:"text",class:"color-text",placeholder:"#052b1b"},null,512),[[I,s.value.backgroundGradient.colorStart]])]),e("div",MC,[v[24]||(v[24]=e("label",{for:"colorEnd"},"Color Final",-1)),g(e("input",{id:"colorEnd","onUpdate:modelValue":v[6]||(v[6]=z=>s.value.backgroundGradient.colorEnd=z),type:"color",class:"color-picker"},null,512),[[I,s.value.backgroundGradient.colorEnd]]),g(e("input",{"onUpdate:modelValue":v[7]||(v[7]=z=>s.value.backgroundGradient.colorEnd=z),type:"text",class:"color-text",placeholder:"#0c6a44"},null,512),[[I,s.value.backgroundGradient.colorEnd]])])]),e("div",{class:"gradient-preview",style:de(C.value)},null,4)]),e("div",TC,[v[26]||(v[26]=e("label",{for:"titleColor"},"Color del Título Principal",-1)),e("div",PC,[g(e("input",{id:"titleColor","onUpdate:modelValue":v[8]||(v[8]=z=>s.value.titleColor=z),type:"color",class:"color-picker"},null,512),[[I,s.value.titleColor]]),g(e("input",{"onUpdate:modelValue":v[9]||(v[9]=z=>s.value.titleColor=z),type:"text",class:"color-text",placeholder:"#ffffff"},null,512),[[I,s.value.titleColor]])])]),e("div",BC,[v[27]||(v[27]=e("label",{for:"itemsTextColor"},"Color del Texto de Cualidades",-1)),e("div",AC,[g(e("input",{id:"itemsTextColor","onUpdate:modelValue":v[10]||(v[10]=z=>s.value.itemsTextColor=z),type:"color",class:"color-picker"},null,512),[[I,s.value.itemsTextColor]]),g(e("input",{"onUpdate:modelValue":v[11]||(v[11]=z=>s.value.itemsTextColor=z),type:"text",class:"color-text",placeholder:"#ffffff"},null,512),[[I,s.value.itemsTextColor]])])])]),e("div",LC,[v[39]||(v[39]=e("h4",null,"Items de Cualidades (Máximo 8)",-1)),e("div",DC,[(l(!0),n(te,null,le(s.value.items,(z,k)=>(l(),n("div",{key:k,class:"item-editor"},[e("div",RC,[e("h5",null,"Cualidad "+f(k+1),1),e("button",{onClick:x=>T(k),class:"btn-remove",type:"button"},v[29]||(v[29]=[e("i",{class:"fas fa-trash"},null,-1)]),8,FC)]),e("div",zC,[e("div",GC,[v[33]||(v[33]=e("label",null,"Imagen",-1)),e("div",NC,[z.image?(l(),n("div",qC,[e("img",{src:z.image,class:"media-preview",alt:z.text},null,8,HC),e("button",{onClick:x=>a(k),class:"btn-remove-media",type:"button"},v[30]||(v[30]=[e("i",{class:"fas fa-times"},null,-1)]),8,OC)])):(l(),n("div",jC,v[31]||(v[31]=[e("i",{class:"fas fa-image"},null,-1),e("p",null,"No hay imagen",-1)]))),e("button",{onClick:x=>V(k),class:"btn-media",type:"button"},v[32]||(v[32]=[e("i",{class:"fas fa-images"},null,-1),B(" Seleccionar ",-1)]),8,WC)])]),e("div",ZC,[v[34]||(v[34]=e("label",null,"Texto",-1)),g(e("input",{"onUpdate:modelValue":x=>z.text=x,type:"text",class:"form-input",placeholder:"Diagnóstico financiero y contable inicial"},null,8,XC),[[I,z.text]])]),e("div",KC,[v[36]||(v[36]=e("label",null,"Color del Texto (Opcional)",-1)),e("div",JC,[g(e("input",{"onUpdate:modelValue":x=>z.textColor=x,type:"color",class:"color-picker"},null,8,QC),[[I,z.textColor]]),g(e("input",{"onUpdate:modelValue":x=>z.textColor=x,type:"text",class:"color-text",placeholder:"#ffffff"},null,8,YC),[[I,z.textColor]]),z.textColor?(l(),n("button",{key:0,onClick:x=>L(k),type:"button",class:"btn-clear-small",title:"Usar color por defecto"},v[35]||(v[35]=[e("i",{class:"fas fa-times"},null,-1)]),8,e3)):R("",!0)]),v[37]||(v[37]=e("small",{class:"form-help"},"Deja vacío para usar el color por defecto",-1))])])]))),128)),e("div",o3,[e("button",{onClick:U,class:"btn-add-item",type:"button",disabled:s.value.items.length>=Qe},v[38]||(v[38]=[e("i",{class:"fas fa-plus"},null,-1),B(" Agregar Nueva Cualidad ",-1)]),8,t3),s.value.items.length>=Qe?(l(),n("small",s3," Máximo "+f(Qe)+" items permitidos ")):R("",!0)])])])])],512),[[ge,i.value==="general"]]),g(e("div",l3,[e("div",a3,[e("div",n3,[v[46]||(v[46]=e("h4",null,"Atributos del Bloque",-1)),e("div",i3,[v[40]||(v[40]=e("label",{for:"block-id"},"ID del bloque",-1)),g(e("input",{type:"text",id:"block-id","onUpdate:modelValue":v[12]||(v[12]=z=>s.value.customId=z),class:"form-input",placeholder:"mis-cualidades-unicas"},null,512),[[I,s.value.customId]]),v[41]||(v[41]=e("small",{class:"form-help"},"ID único para este bloque (opcional)",-1))]),e("div",r3,[v[42]||(v[42]=e("label",{for:"block-class"},"Clases CSS",-1)),g(e("input",{type:"text",id:"block-class","onUpdate:modelValue":v[13]||(v[13]=z=>s.value.customClass=z),class:"form-input",placeholder:"mis-cualidades otra-clase"},null,512),[[I,s.value.customClass]]),v[43]||(v[43]=e("small",{class:"form-help"},"Clases CSS separadas por espacios (opcional)",-1))]),e("div",d3,[v[44]||(v[44]=e("label",{for:"custom-css"},"CSS Personalizado",-1)),g(e("textarea",{id:"custom-css","onUpdate:modelValue":v[14]||(v[14]=z=>s.value.customCSS=z),rows:"12",class:"form-input css-editor",placeholder:`/* CSS personalizado para este bloque de cualidades */
.mis-cualidades {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 15px;
  box-shadow: 0 15px 35px rgba(0,0,0,0.1);
}

.mis-cualidades .item {
  transition: transform 0.3s ease;
}

.mis-cualidades .item:hover {
  transform: scale(1.05);
}`},null,512),[[I,s.value.customCSS]]),v[45]||(v[45]=e("small",{class:"form-help"},"Este CSS se aplicará únicamente a este bloque",-1))])])])],512),[[ge,i.value==="attributes"]])])]),e("div",u3,[e("button",{onClick:E,class:"btn-secondary"},v[47]||(v[47]=[e("i",{class:"fas fa-undo"},null,-1),B(" Restaurar por Defecto ",-1)])),e("button",{onClick:v[15]||(v[15]=z=>d.$emit("close")),class:"btn-secondary"},v[48]||(v[48]=[e("i",{class:"fas fa-times"},null,-1),B(" Cancelar ",-1)])),e("button",{onClick:S,class:"btn-primary"},v[49]||(v[49]=[e("i",{class:"fas fa-check"},null,-1),B(" Aplicar Cambios ",-1)]))])]),_(Ue,{show:$.value,"selected-media":m.value,"type-filter":"image",multiple:!1,onClose:o,onSelect:t},null,8,["show","selected-media"])]))}}),p3=re(c3,[["__scopeId","data-v-ff69e4ff"]]),v3={class:"modal-overlay"},m3={class:"modal-header"},g3={class:"modal-body"},f3={class:"tabs-nav"},b3={class:"tab-content"},y3={class:"tab-pane"},k3={class:"editor-sections"},$3={class:"editor-section"},h3={class:"form-group"},C3={class:"color-input-group"},_3={class:"editor-section"},w3={class:"form-group"},S3={class:"form-group"},x3={class:"color-input-group"},E3={class:"form-group"},I3={class:"editor-container"},U3={class:"form-group"},V3={class:"color-input-group"},M3={class:"editor-section"},T3={class:"form-row"},P3={class:"form-group"},B3={class:"form-group"},A3={class:"form-row"},L3={class:"form-group"},D3={class:"color-input-group"},R3={class:"form-group"},F3={class:"color-input-group"},z3={class:"editor-section"},G3={class:"form-group"},N3={class:"radio-group"},q3={class:"radio-label"},H3={class:"radio-label"},O3={key:0,class:"form-group"},j3={key:1,class:"form-group"},W3={class:"media-selector"},Z3={key:0,class:"selected-media"},X3=["src"],K3={key:1,class:"media-placeholder"},J3={class:"tab-pane"},Q3={class:"editor-sections"},Y3={class:"editor-section"},e4={class:"form-group"},o4={class:"form-group"},t4={class:"form-group"},s4={class:"modal-footer"},l4=ve({__name:"TextoyVideoBlockEditor",props:{block:{}},emits:["update","close"],setup(p,{emit:u}){const c=p,b=u,i=D("general"),{showMediaPicker:w,selectedMedia:s,openMediaPicker:r,closeMediaPicker:$,getFullMediaUrl:m}=Ae(),C=D((L=>({...L,customId:L.customId||"",customClass:L.customClass||"",customCSS:L.customCSS||""}))({...c.block})),S=no({content:C.value.description,extensions:[ro],editorProps:{attributes:{class:"prose prose-sm focus:outline-none min-h-[120px] p-3"}},onUpdate:({editor:L})=>{C.value.description=L.getHTML()}}),U=J(()=>C.value.videoType==="media"&&C.value.videoUrl?C.value.videoUrl:null),T=()=>{C.value.videoUrl="",C.value.videoMediaId=void 0},V=()=>{r({typeFilter:"video",multiple:!1,onSelect:o})},o=L=>{C.value.videoUrl=m(L),C.value.videoMediaId=L.id,$()},t=()=>{C.value.videoUrl="",C.value.videoMediaId=void 0},a=()=>{b("update",{...C.value}),b("close")};return xe(()=>c.block,L=>{C.value={...L},S.value&&S.value.commands.setContent(L.description)},{deep:!0}),fe(()=>{S.value&&S.value.commands.setContent(C.value.description)}),Go(()=>{S.value&&S.value.destroy()}),(L,E)=>(l(),n("div",v3,[e("div",{class:"modal-content",onClick:E[23]||(E[23]=ce(()=>{},["stop"]))},[e("div",m3,[E[25]||(E[25]=e("h3",null,"Editar Texto y Video",-1)),e("button",{onClick:E[0]||(E[0]=d=>L.$emit("close")),class:"btn-close"},E[24]||(E[24]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",g3,[e("div",f3,[e("button",{onClick:E[1]||(E[1]=d=>i.value="general"),class:O(["tab-button",{active:i.value==="general"}])},E[26]||(E[26]=[e("i",{class:"fas fa-cog"},null,-1),B(" Configuración General ",-1)]),2),e("button",{onClick:E[2]||(E[2]=d=>i.value="attributes"),class:O(["tab-button",{active:i.value==="attributes"}])},E[27]||(E[27]=[e("i",{class:"fas fa-code"},null,-1),B(" Atributos ",-1)]),2)]),e("div",b3,[g(e("div",y3,[e("div",k3,[e("div",$3,[E[29]||(E[29]=e("h4",null,"Configuración General",-1)),e("div",h3,[E[28]||(E[28]=e("label",{for:"bg-color"},"Color de fondo",-1)),e("div",C3,[g(e("input",{type:"color",id:"bg-color","onUpdate:modelValue":E[3]||(E[3]=d=>C.value.backgroundColor=d),class:"color-picker"},null,512),[[I,C.value.backgroundColor]]),g(e("input",{type:"text","onUpdate:modelValue":E[4]||(E[4]=d=>C.value.backgroundColor=d),class:"color-text",placeholder:"#ffffff"},null,512),[[I,C.value.backgroundColor]])])])]),e("div",_3,[E[34]||(E[34]=e("h4",null,"Contenido de Texto",-1)),e("div",w3,[E[30]||(E[30]=e("label",{for:"title"},"Título Principal",-1)),g(e("input",{type:"text",id:"title","onUpdate:modelValue":E[5]||(E[5]=d=>C.value.title=d),class:"form-input",placeholder:"Solidez contable, proyección empresarial"},null,512),[[I,C.value.title]])]),e("div",S3,[E[31]||(E[31]=e("label",{for:"title-color"},"Color del título",-1)),e("div",x3,[g(e("input",{type:"color",id:"title-color","onUpdate:modelValue":E[6]||(E[6]=d=>C.value.titleColor=d),class:"color-picker"},null,512),[[I,C.value.titleColor]]),g(e("input",{type:"text","onUpdate:modelValue":E[7]||(E[7]=d=>C.value.titleColor=d),class:"color-text",placeholder:"#000000"},null,512),[[I,C.value.titleColor]])])]),e("div",E3,[E[32]||(E[32]=e("label",{for:"description"},"Descripción",-1)),e("div",I3,[_(G(io),{editor:G(S)},null,8,["editor"])])]),e("div",U3,[E[33]||(E[33]=e("label",{for:"desc-color"},"Color de la descripción",-1)),e("div",V3,[g(e("input",{type:"color",id:"desc-color","onUpdate:modelValue":E[8]||(E[8]=d=>C.value.descriptionColor=d),class:"color-picker"},null,512),[[I,C.value.descriptionColor]]),g(e("input",{type:"text","onUpdate:modelValue":E[9]||(E[9]=d=>C.value.descriptionColor=d),class:"color-text",placeholder:"#666666"},null,512),[[I,C.value.descriptionColor]])])])]),e("div",M3,[E[39]||(E[39]=e("h4",null,"Botón de Acción",-1)),e("div",T3,[e("div",P3,[E[35]||(E[35]=e("label",{for:"btn-text"},"Texto del botón",-1)),g(e("input",{type:"text",id:"btn-text","onUpdate:modelValue":E[10]||(E[10]=d=>C.value.buttonText=d),class:"form-input",placeholder:"Conoce más sobre nosotros"},null,512),[[I,C.value.buttonText]])]),e("div",B3,[E[36]||(E[36]=e("label",{for:"btn-link"},"Enlace del botón",-1)),g(e("input",{type:"url",id:"btn-link","onUpdate:modelValue":E[11]||(E[11]=d=>C.value.buttonLink=d),class:"form-input",placeholder:"https://..."},null,512),[[I,C.value.buttonLink]])])]),e("div",A3,[e("div",L3,[E[37]||(E[37]=e("label",{for:"btn-bg-color"},"Color de fondo del botón",-1)),e("div",D3,[g(e("input",{type:"color",id:"btn-bg-color","onUpdate:modelValue":E[12]||(E[12]=d=>C.value.buttonColor=d),class:"color-picker"},null,512),[[I,C.value.buttonColor]]),g(e("input",{type:"text","onUpdate:modelValue":E[13]||(E[13]=d=>C.value.buttonColor=d),class:"color-text",placeholder:"#007bff"},null,512),[[I,C.value.buttonColor]])])]),e("div",R3,[E[38]||(E[38]=e("label",{for:"btn-text-color"},"Color del texto del botón",-1)),e("div",F3,[g(e("input",{type:"color",id:"btn-text-color","onUpdate:modelValue":E[14]||(E[14]=d=>C.value.buttonTextColor=d),class:"color-picker"},null,512),[[I,C.value.buttonTextColor]]),g(e("input",{type:"text","onUpdate:modelValue":E[15]||(E[15]=d=>C.value.buttonTextColor=d),class:"color-text",placeholder:"#ffffff"},null,512),[[I,C.value.buttonTextColor]])])])])]),e("div",z3,[E[49]||(E[49]=e("h4",null,"Configuración de Video",-1)),e("div",G3,[E[42]||(E[42]=e("label",null,"Tipo de video",-1)),e("div",N3,[e("label",q3,[g(e("input",{type:"radio","onUpdate:modelValue":E[16]||(E[16]=d=>C.value.videoType=d),value:"youtube",onChange:T},null,544),[[je,C.value.videoType]]),E[40]||(E[40]=e("span",null,"Video de YouTube",-1))]),e("label",H3,[g(e("input",{type:"radio","onUpdate:modelValue":E[17]||(E[17]=d=>C.value.videoType=d),value:"media",onChange:T},null,544),[[je,C.value.videoType]]),E[41]||(E[41]=e("span",null,"Video desde Medios",-1))])])]),C.value.videoType==="youtube"?(l(),n("div",O3,[E[43]||(E[43]=e("label",{for:"youtube-url"},"URL de YouTube",-1)),g(e("input",{type:"url",id:"youtube-url","onUpdate:modelValue":E[18]||(E[18]=d=>C.value.videoUrl=d),class:"form-input",placeholder:"https://www.youtube.com/watch?v=..."},null,512),[[I,C.value.videoUrl]]),E[44]||(E[44]=e("small",{class:"form-help"}," Puedes usar cualquier formato: youtube.com/watch?v=ID, youtu.be/ID, o solo el ID ",-1))])):R("",!0),C.value.videoType==="media"?(l(),n("div",j3,[E[48]||(E[48]=e("label",null,"Video desde biblioteca de medios",-1)),e("div",W3,[U.value?(l(),n("div",Z3,[e("video",{src:U.value,class:"media-preview",controls:""}," Tu navegador no soporta el elemento de video. ",8,X3),e("button",{onClick:t,class:"btn-remove",type:"button"},E[45]||(E[45]=[e("i",{class:"fas fa-times"},null,-1)]))])):(l(),n("div",K3,E[46]||(E[46]=[e("i",{class:"fas fa-video"},null,-1),e("p",null,"No hay video seleccionado",-1)]))),e("button",{onClick:V,class:"btn-media",type:"button"},E[47]||(E[47]=[e("i",{class:"fas fa-video"},null,-1),B(" Seleccionar video ",-1)]))])])):R("",!0)])])],512),[[ge,i.value==="general"]]),g(e("div",J3,[e("div",Q3,[e("div",Y3,[E[56]||(E[56]=e("h4",null,"Atributos del Bloque",-1)),e("div",e4,[E[50]||(E[50]=e("label",{for:"block-id"},"ID del bloque",-1)),g(e("input",{type:"text",id:"block-id","onUpdate:modelValue":E[19]||(E[19]=d=>C.value.customId=d),class:"form-input",placeholder:"mi-texto-video-unico"},null,512),[[I,C.value.customId]]),E[51]||(E[51]=e("small",{class:"form-help"},"ID único para este bloque (opcional)",-1))]),e("div",o4,[E[52]||(E[52]=e("label",{for:"block-class"},"Clases CSS",-1)),g(e("input",{type:"text",id:"block-class","onUpdate:modelValue":E[20]||(E[20]=d=>C.value.customClass=d),class:"form-input",placeholder:"mi-texto-video otra-clase"},null,512),[[I,C.value.customClass]]),E[53]||(E[53]=e("small",{class:"form-help"},"Clases CSS separadas por espacios (opcional)",-1))]),e("div",t4,[E[54]||(E[54]=e("label",{for:"custom-css"},"CSS Personalizado",-1)),g(e("textarea",{id:"custom-css","onUpdate:modelValue":E[21]||(E[21]=d=>C.value.customCSS=d),rows:"12",class:"form-input css-editor",placeholder:`/* CSS personalizado para este bloque texto y video */
.mi-texto-video {
  background: linear-gradient(45deg, #f9f9f9, #e8e8e8);
  border-radius: 20px;
  padding: 40px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.1);
}

.mi-texto-video .video-container {
  border-radius: 15px;
  overflow: hidden;
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

.mi-texto-video .button {
  background: linear-gradient(45deg, #ff6b6b, #ee5a52);
  border-radius: 25px;
  transition: all 0.3s ease;
}`},null,512),[[I,C.value.customCSS]]),E[55]||(E[55]=e("small",{class:"form-help"},"Este CSS se aplicará únicamente a este bloque",-1))])])])],512),[[ge,i.value==="attributes"]])])]),e("div",s4,[e("button",{onClick:E[22]||(E[22]=d=>L.$emit("close")),class:"btn-secondary"},E[57]||(E[57]=[e("i",{class:"fas fa-times"},null,-1),B(" Cancelar ",-1)])),e("button",{onClick:a,class:"btn-primary"},E[58]||(E[58]=[e("i",{class:"fas fa-check"},null,-1),B(" Aplicar Cambios ",-1)]))])]),_(Ue,{show:G(w),"selected-media":G(s),"type-filter":"video",multiple:!1,onClose:G($),onSelect:o},null,8,["show","selected-media","onClose"])]))}}),a4=re(l4,[["__scopeId","data-v-a73e8b53"]]),n4={class:"modal-overlay"},i4={class:"modal-header"},r4={class:"modal-body"},d4={class:"tabs-nav"},u4={class:"tab-content"},c4={class:"tab-pane"},p4={class:"editor-sections"},v4={class:"editor-section"},m4={class:"form-row"},g4={class:"form-group"},f4={class:"columns-management"},b4={class:"columns-info"},y4=["disabled"],k4={class:"form-group"},$4={class:"form-row"},h4={class:"form-group"},C4={class:"form-group"},_4={class:"color-input-group"},w4=["value"],S4={class:"editor-section"},x4={class:"column-header"},E4={class:"column-actions"},I4=["onClick"],U4=["onClick","disabled"],V4={class:"column-colors"},M4={class:"form-group"},T4={class:"color-input-group"},P4=["value","onInput"],B4=["onUpdate:modelValue"],A4={class:"form-group"},L4={class:"color-input-group"},D4=["value","onInput"],R4=["onUpdate:modelValue"],F4={class:"column-texts"},z4={class:"text-item-header"},G4={class:"text-item-info"},N4={class:"text-item-title"},q4={class:"text-item-actions"},H4=["onClick"],O4={class:"simple-editor-container"},j4={key:0,class:"empty-column"},W4=["onClick"],Z4={class:"tab-pane"},X4={class:"editor-sections"},K4={class:"editor-section"},J4={class:"form-group"},Q4={class:"form-group"},Y4={class:"form-group"},e5={class:"modal-footer"},o5=ve({__name:"TextBlockEditor",props:{block:{}},emits:["update","close"],setup(p,{emit:u}){const c=p,b=u,i=D("general"),w=U=>{if(U.columns&&Array.isArray(U.columns)){const V={...U};return V.customId||(V.customId=""),V.customClass||(V.customClass=""),V.customCSS||(V.customCSS=""),V}console.info("Migrando bloque de texto del formato antiguo al nuevo:",U);const T={id:U.id,type:"text",order:U.order||0,columnsCount:1,columns:[{id:r(),backgroundColor:U.backgroundColor||"",textColor:"",texts:[{id:r(),content:U.content||"<p>Contenido migrado</p>"}]}],gap:"medium",padding:U.padding||"medium",backgroundColor:U.backgroundColor||"",customId:U.customId||"",customClass:U.customClass||"",customCSS:U.customCSS||""};return console.info("Bloque migrado:",T),T},s=D(w(c.block)),r=()=>Math.random().toString(36).substr(2,9),$=()=>{if(s.value.columns.length>=4){console.warn("Maximum 4 columns allowed");return}s.value.columns.push({id:r(),backgroundColor:"",textColor:"",texts:[]}),s.value.columnsCount=s.value.columns.length},m=U=>{if(s.value.columns.length<=1){console.warn("Cannot remove the last column");return}if(U<0||U>=s.value.columns.length){console.warn(`Invalid column index: ${U}`);return}s.value.columns.splice(U,1),s.value.columnsCount=s.value.columns.length},M=U=>{if(!s.value.columns||!s.value.columns[U]){console.warn(`Column ${U} not found`);return}const T={id:r(),content:"<p>Escribe tu texto aquí...</p>"};s.value.columns[U].texts||(s.value.columns[U].texts=[]),s.value.columns[U].texts.push(T)},C=(U,T)=>{try{if(!s.value?.columns?.[U]?.texts?.[T]){console.warn(`Text at column ${U}, text ${T} not found`);return}s.value.columns[U].texts.splice(T,1)}catch(V){console.error("Error removing text from column:",V)}},S=()=>{b("update",{...s.value}),b("close")};return xe(()=>c.block,U=>{s.value=w(U)},{deep:!0}),fe(()=>{console.info("TextBlockEditor mounted with Tiptap")}),(U,T)=>(l(),n("div",n4,[e("div",{class:"modal-content",onClick:T[11]||(T[11]=ce(()=>{},["stop"]))},[e("div",i4,[T[12]||(T[12]=e("h3",null,"Editar Bloque de Texto",-1)),e("button",{onClick:T[0]||(T[0]=V=>U.$emit("close")),class:"btn-close"},[_(N,{name:"close"})])]),e("div",r4,[e("div",d4,[e("button",{onClick:T[1]||(T[1]=V=>i.value="general"),class:O(["tab-button",{active:i.value==="general"}])},[_(N,{name:"settings"}),T[13]||(T[13]=B(" Configuración General ",-1))],2),e("button",{onClick:T[2]||(T[2]=V=>i.value="attributes"),class:O(["tab-button",{active:i.value==="attributes"}])},[_(N,{name:"code"}),T[14]||(T[14]=B(" Atributos ",-1))],2)]),e("div",u4,[g(e("div",c4,[e("div",p4,[e("div",v4,[T[22]||(T[22]=e("h4",null,"Configuración General",-1)),e("div",m4,[e("div",g4,[T[16]||(T[16]=e("label",null,"Gestión de columnas",-1)),e("div",f4,[e("span",b4,f(s.value.columns.length)+" columna"+f(s.value.columns.length!==1?"s":""),1),e("button",{onClick:$,class:"btn-add-column",disabled:s.value.columns.length>=4},[_(N,{name:"plus"}),T[15]||(T[15]=B(" Añadir columna ",-1))],8,y4)])]),e("div",k4,[T[18]||(T[18]=e("label",{for:"gap"},"Espaciado entre columnas",-1)),g(e("select",{id:"gap","onUpdate:modelValue":T[3]||(T[3]=V=>s.value.gap=V),class:"form-input"},T[17]||(T[17]=[e("option",{value:"none"},"Sin espaciado",-1),e("option",{value:"small"},"Pequeño",-1),e("option",{value:"medium"},"Mediano",-1),e("option",{value:"large"},"Grande",-1)]),512),[[ie,s.value.gap]])])]),e("div",$4,[e("div",h4,[T[20]||(T[20]=e("label",{for:"padding"},"Padding del bloque",-1)),g(e("select",{id:"padding","onUpdate:modelValue":T[4]||(T[4]=V=>s.value.padding=V),class:"form-input"},T[19]||(T[19]=[e("option",{value:"none"},"Sin padding",-1),e("option",{value:"small"},"Pequeño",-1),e("option",{value:"medium"},"Mediano",-1),e("option",{value:"large"},"Grande",-1)]),512),[[ie,s.value.padding]])]),e("div",C4,[T[21]||(T[21]=e("label",{for:"bg-color"},"Color de fondo del bloque",-1)),e("div",_4,[e("input",{type:"color",id:"bg-color",value:s.value.backgroundColor||"#ffffff",onInput:T[5]||(T[5]=V=>s.value.backgroundColor=V.target.value),class:"color-picker"},null,40,w4),g(e("input",{type:"text","onUpdate:modelValue":T[6]||(T[6]=V=>s.value.backgroundColor=V),class:"color-text",placeholder:"#ffffff"},null,512),[[I,s.value.backgroundColor]])])])])]),e("div",S4,[T[27]||(T[27]=e("h4",null,"Configuración de Columnas",-1)),e("div",{class:O(["columns-grid",`columns-${s.value.columnsCount}`])},[(l(!0),n(te,null,le(s.value.columns,(V,o)=>(l(),n("div",{key:V.id,class:"column-editor"},[e("div",x4,[e("h5",null,"Columna "+f(o+1),1),e("div",E4,[e("button",{onClick:t=>M(o),class:"btn-add-text",title:"Añadir texto"},[_(N,{name:"plus"})],8,I4),e("button",{onClick:t=>m(o),class:"btn-remove-column",title:"Eliminar columna",disabled:s.value.columns.length<=1},[_(N,{name:"trash"})],8,U4)])]),e("div",V4,[e("div",M4,[T[23]||(T[23]=e("label",null,"Color de fondo",-1)),e("div",T4,[e("input",{type:"color",value:V.backgroundColor||"#ffffff",onInput:t=>V.backgroundColor=t.target.value,class:"color-picker small"},null,40,P4),g(e("input",{type:"text","onUpdate:modelValue":t=>V.backgroundColor=t,class:"color-text small",placeholder:"Transparente"},null,8,B4),[[I,V.backgroundColor]])])]),e("div",A4,[T[24]||(T[24]=e("label",null,"Color de texto",-1)),e("div",L4,[e("input",{type:"color",value:V.textColor||"#000000",onInput:t=>V.textColor=t.target.value,class:"color-picker small"},null,40,D4),g(e("input",{type:"text","onUpdate:modelValue":t=>V.textColor=t,class:"color-text small",placeholder:"#000000"},null,8,R4),[[I,V.textColor]])])])]),e("div",F4,[(l(!0),n(te,null,le(V.texts,(t,a)=>(l(),n("div",{key:t.id,class:"text-item"},[e("div",z4,[e("div",G4,[e("span",N4,"Texto "+f(a+1),1)]),e("div",q4,[e("button",{onClick:L=>C(o,a),class:"btn-remove-text",title:"Eliminar texto"},[_(N,{name:"trash"})],8,H4)])]),e("div",O4,[(l(),he(uo,{modelValue:t.content,"onUpdate:modelValue":L=>t.content=L,key:t.id},null,8,["modelValue","onUpdate:modelValue"]))])]))),128)),V.texts.length===0?(l(),n("div",j4,[T[26]||(T[26]=e("p",null,"Esta columna está vacía",-1)),e("button",{onClick:t=>M(o),class:"btn-add-first"},[_(N,{name:"plus"}),T[25]||(T[25]=B(" Añadir primer texto ",-1))],8,W4)])):R("",!0)])]))),128))],2)])])],512),[[ge,i.value==="general"]]),g(e("div",Z4,[e("div",X4,[e("div",K4,[T[34]||(T[34]=e("h4",null,"Atributos del Bloque",-1)),e("div",J4,[T[28]||(T[28]=e("label",{for:"block-id"},"ID del bloque",-1)),g(e("input",{type:"text",id:"block-id","onUpdate:modelValue":T[7]||(T[7]=V=>s.value.customId=V),class:"form-input",placeholder:"mi-bloque-unico"},null,512),[[I,s.value.customId]]),T[29]||(T[29]=e("small",{class:"form-help"},"ID único para este bloque (opcional)",-1))]),e("div",Q4,[T[30]||(T[30]=e("label",{for:"block-class"},"Clases CSS",-1)),g(e("input",{type:"text",id:"block-class","onUpdate:modelValue":T[8]||(T[8]=V=>s.value.customClass=V),class:"form-input",placeholder:"mi-clase otra-clase"},null,512),[[I,s.value.customClass]]),T[31]||(T[31]=e("small",{class:"form-help"},"Clases CSS separadas por espacios (opcional)",-1))]),e("div",Y4,[T[32]||(T[32]=e("label",{for:"custom-css"},"CSS Personalizado",-1)),g(e("textarea",{id:"custom-css","onUpdate:modelValue":T[9]||(T[9]=V=>s.value.customCSS=V),rows:"12",class:"form-input css-editor",placeholder:`/* CSS personalizado para este bloque */
/* Para aplicar al contenedor del bloque */
.mi-clase {
  background: lightblue;
  padding: 20px;
  border-radius: 10px;
}

/* Para elementos dentro del bloque */
h2 {
  color: red;
  font-weight: bold;
}

p {
  color: blue;
  font-size: 18px;
}`},null,512),[[I,s.value.customCSS]]),T[33]||(T[33]=e("small",{class:"form-help"},"Este CSS se aplicará únicamente a este bloque",-1))])])])],512),[[ge,i.value==="attributes"]])])]),e("div",e5,[e("button",{onClick:T[10]||(T[10]=V=>U.$emit("close")),class:"btn-secondary"},[_(N,{name:"close"}),T[35]||(T[35]=B(" Cancelar ",-1))]),e("button",{onClick:S,class:"btn-primary"},[_(N,{name:"check"}),T[36]||(T[36]=B(" Aplicar Cambios ",-1))])])])]))}}),t5=re(o5,[["__scopeId","data-v-31e61d36"]]),s5={class:"modal-overlay"},l5={class:"modal-header"},a5={class:"modal-body"},n5={class:"tabs-nav"},i5={class:"tab-content"},r5={class:"tab-pane"},d5={class:"editor-sections"},u5={class:"editor-section"},c5={class:"form-group"},p5={class:"radio-group"},v5={class:"radio-label"},m5={class:"radio-label"},g5={class:"radio-label"},f5={key:0,class:"form-group"},b5={class:"color-input-group"},y5={key:1,class:"gradient-section"},k5={class:"form-group"},$5={class:"gradient-controls"},h5={class:"color-input-group"},C5={class:"color-input-group"},_5={class:"form-group"},w5={key:2,class:"image-section"},S5={class:"form-group"},x5={class:"media-selector"},E5={key:0,class:"selected-media"},I5=["src"],U5={key:1,class:"media-placeholder"},V5={key:0,class:"form-group"},M5={class:"range-input-group"},T5={class:"range-value"},P5={class:"editor-section"},B5={class:"form-group"},A5={class:"tab-pane"},L5={class:"editor-sections"},D5={class:"editor-section"},R5={class:"form-group"},F5={class:"form-group"},z5={class:"form-group"},G5={class:"modal-footer"},N5=ve({__name:"ContainerBlockEditor",props:{block:{}},emits:["update","close"],setup(p,{emit:u}){const c=p,b=u,i=D("general"),w=t=>({...t,customId:t.customId||"",customClass:t.customClass||"",customCSS:t.customCSS||"",backgroundGradient:t.backgroundGradient||{colorStart:"#000000",colorEnd:"#ffffff",direction:"to right"},backgroundImageOpacity:t.backgroundImageOpacity??100,children:t.children||[]}),s=D(w({...c.block})),{getFullMediaUrl:r}=Ae(),$=D(!1),m=D([]),M=J(()=>{if(s.value.backgroundGradient){const{colorStart:t,colorEnd:a,direction:L}=s.value.backgroundGradient;return{background:`linear-gradient(${L}, ${t}, ${a})`,height:"60px",borderRadius:"6px",marginTop:"1rem"}}return{}}),C=()=>{b("update",{...s.value}),b("close")},S=()=>{m.value=[],$.value=!0},U=()=>{$.value=!1,m.value=[]},T=t=>{if(console.log("ContainerBlockEditor - onMediaSelected:",t),console.log("ContainerBlockEditor - Type of media:",typeof t),console.log("ContainerBlockEditor - Is array:",Array.isArray(t)),t&&t.length>0){const a=t[0];console.log("ContainerBlockEditor - Selected media:",a);const L=r(a);console.log("ContainerBlockEditor - Full media URL:",L),s.value.backgroundImage=L,console.log("ContainerBlockEditor - Background image set to:",s.value.backgroundImage)}U()},V=()=>{s.value.backgroundImage=""},o=()=>{s.value={...c.block,backgroundType:"color",backgroundColor:"#ffffff",backgroundGradient:{colorStart:"#000000",colorEnd:"#ffffff",direction:"to right"},backgroundImage:"",backgroundImageOpacity:100,padding:"medium",customId:"",customClass:"",customCSS:"",children:s.value.children}};return xe(()=>c.block,t=>{s.value=w(t)},{deep:!0}),(t,a)=>(l(),n("div",s5,[e("div",{class:"modal-content",onClick:a[21]||(a[21]=ce(()=>{},["stop"]))},[e("div",l5,[a[23]||(a[23]=e("h3",null,"Editar Contenedor",-1)),e("button",{onClick:a[0]||(a[0]=L=>t.$emit("close")),class:"btn-close"},a[22]||(a[22]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",a5,[e("div",n5,[e("button",{onClick:a[1]||(a[1]=L=>i.value="general"),class:O(["tab-button",{active:i.value==="general"}])},a[24]||(a[24]=[e("i",{class:"fas fa-cog"},null,-1),B(" Configuración General ",-1)]),2),e("button",{onClick:a[2]||(a[2]=L=>i.value="attributes"),class:O(["tab-button",{active:i.value==="attributes"}])},a[25]||(a[25]=[e("i",{class:"fas fa-code"},null,-1),B(" Atributos ",-1)]),2)]),e("div",i5,[g(e("div",r5,[e("div",d5,[e("div",u5,[a[41]||(a[41]=e("h4",null,"Fondo del Contenedor",-1)),e("div",c5,[a[29]||(a[29]=e("label",null,"Tipo de fondo",-1)),e("div",p5,[e("label",v5,[g(e("input",{type:"radio","onUpdate:modelValue":a[3]||(a[3]=L=>s.value.backgroundType=L),value:"color"},null,512),[[je,s.value.backgroundType]]),a[26]||(a[26]=e("span",null,"Color sólido",-1))]),e("label",m5,[g(e("input",{type:"radio","onUpdate:modelValue":a[4]||(a[4]=L=>s.value.backgroundType=L),value:"gradient"},null,512),[[je,s.value.backgroundType]]),a[27]||(a[27]=e("span",null,"Degradado",-1))]),e("label",g5,[g(e("input",{type:"radio","onUpdate:modelValue":a[5]||(a[5]=L=>s.value.backgroundType=L),value:"image"},null,512),[[je,s.value.backgroundType]]),a[28]||(a[28]=e("span",null,"Imagen",-1))])])]),s.value.backgroundType==="color"?(l(),n("div",f5,[a[30]||(a[30]=e("label",{for:"bg-color"},"Color de fondo",-1)),e("div",b5,[g(e("input",{type:"color",id:"bg-color","onUpdate:modelValue":a[6]||(a[6]=L=>s.value.backgroundColor=L),class:"color-picker"},null,512),[[I,s.value.backgroundColor]]),g(e("input",{type:"text","onUpdate:modelValue":a[7]||(a[7]=L=>s.value.backgroundColor=L),class:"color-text",placeholder:"#ffffff"},null,512),[[I,s.value.backgroundColor]])])])):R("",!0),s.value.backgroundType==="gradient"?(l(),n("div",y5,[e("div",k5,[a[33]||(a[33]=e("label",null,"Degradado",-1)),e("div",$5,[e("div",h5,[a[31]||(a[31]=e("label",{for:"colorStart"},"Color inicial",-1)),g(e("input",{type:"color",id:"colorStart","onUpdate:modelValue":a[8]||(a[8]=L=>s.value.backgroundGradient.colorStart=L),class:"color-picker"},null,512),[[I,s.value.backgroundGradient.colorStart]]),g(e("input",{type:"text","onUpdate:modelValue":a[9]||(a[9]=L=>s.value.backgroundGradient.colorStart=L),class:"color-text",placeholder:"#000000"},null,512),[[I,s.value.backgroundGradient.colorStart]])]),e("div",C5,[a[32]||(a[32]=e("label",{for:"colorEnd"},"Color final",-1)),g(e("input",{type:"color",id:"colorEnd","onUpdate:modelValue":a[10]||(a[10]=L=>s.value.backgroundGradient.colorEnd=L),class:"color-picker"},null,512),[[I,s.value.backgroundGradient.colorEnd]]),g(e("input",{type:"text","onUpdate:modelValue":a[11]||(a[11]=L=>s.value.backgroundGradient.colorEnd=L),class:"color-text",placeholder:"#ffffff"},null,512),[[I,s.value.backgroundGradient.colorEnd]])])])]),e("div",_5,[a[35]||(a[35]=e("label",{for:"direction"},"Dirección del degradado",-1)),g(e("select",{id:"direction","onUpdate:modelValue":a[12]||(a[12]=L=>s.value.backgroundGradient.direction=L),class:"form-input"},a[34]||(a[34]=[Se('<option value="to right" data-v-4cbdb78e>Horizontal (izquierda a derecha)</option><option value="to left" data-v-4cbdb78e>Horizontal (derecha a izquierda)</option><option value="to bottom" data-v-4cbdb78e>Vertical (arriba a abajo)</option><option value="to top" data-v-4cbdb78e>Vertical (abajo a arriba)</option><option value="45deg" data-v-4cbdb78e>Diagonal (45°)</option><option value="135deg" data-v-4cbdb78e>Diagonal (135°)</option>',6)]),512),[[ie,s.value.backgroundGradient.direction]])]),e("div",{class:"gradient-preview",style:de(M.value)},null,4)])):R("",!0),s.value.backgroundType==="image"?(l(),n("div",w5,[e("div",S5,[a[39]||(a[39]=e("label",null,"Imagen de fondo",-1)),e("div",x5,[s.value.backgroundImage?(l(),n("div",E5,[e("img",{src:s.value.backgroundImage,class:"media-preview",alt:"Imagen de fondo",onLoad:a[13]||(a[13]=()=>console.log("ContainerBlockEditor - Preview image loaded:",s.value.backgroundImage)),onError:a[14]||(a[14]=L=>console.error("ContainerBlockEditor - Preview image error:",s.value.backgroundImage,L))},null,40,I5),e("button",{onClick:V,class:"btn-remove",type:"button"},a[36]||(a[36]=[e("i",{class:"fas fa-times"},null,-1)]))])):(l(),n("div",U5,a[37]||(a[37]=[e("i",{class:"fas fa-image"},null,-1),e("p",null,"No hay imagen seleccionada",-1)]))),e("button",{onClick:S,class:"btn-media",type:"button"},a[38]||(a[38]=[e("i",{class:"fas fa-images"},null,-1),B(" Seleccionar imagen ",-1)]))])]),s.value.backgroundImage?(l(),n("div",V5,[a[40]||(a[40]=e("label",{for:"opacity"},"Opacidad de la imagen (%)",-1)),e("div",M5,[g(e("input",{type:"range",id:"opacity","onUpdate:modelValue":a[15]||(a[15]=L=>s.value.backgroundImageOpacity=L),min:"0",max:"100",step:"5",class:"range-input"},null,512),[[I,s.value.backgroundImageOpacity,void 0,{number:!0}]]),e("span",T5,f(s.value.backgroundImageOpacity)+"%",1)])])):R("",!0)])):R("",!0)]),e("div",P5,[a[44]||(a[44]=e("h4",null,"Espaciado",-1)),e("div",B5,[a[43]||(a[43]=e("label",{for:"padding"},"Padding interno",-1)),g(e("select",{id:"padding","onUpdate:modelValue":a[16]||(a[16]=L=>s.value.padding=L),class:"form-input"},a[42]||(a[42]=[e("option",{value:"none"},"Sin padding",-1),e("option",{value:"small"},"Pequeño",-1),e("option",{value:"medium"},"Mediano",-1),e("option",{value:"large"},"Grande",-1)]),512),[[ie,s.value.padding]])])])])],512),[[ge,i.value==="general"]]),g(e("div",A5,[e("div",L5,[e("div",D5,[a[51]||(a[51]=e("h4",null,"Atributos del Contenedor",-1)),e("div",R5,[a[45]||(a[45]=e("label",{for:"block-id"},"ID del contenedor",-1)),g(e("input",{type:"text",id:"block-id","onUpdate:modelValue":a[17]||(a[17]=L=>s.value.customId=L),class:"form-input",placeholder:"mi-contenedor-unico"},null,512),[[I,s.value.customId]]),a[46]||(a[46]=e("small",{class:"form-help"},"ID único para este contenedor (opcional)",-1))]),e("div",F5,[a[47]||(a[47]=e("label",{for:"block-class"},"Clases CSS",-1)),g(e("input",{type:"text",id:"block-class","onUpdate:modelValue":a[18]||(a[18]=L=>s.value.customClass=L),class:"form-input",placeholder:"mi-contenedor otra-clase"},null,512),[[I,s.value.customClass]]),a[48]||(a[48]=e("small",{class:"form-help"},"Clases CSS separadas por espacios (opcional)",-1))]),e("div",z5,[a[49]||(a[49]=e("label",{for:"custom-css"},"CSS Personalizado",-1)),g(e("textarea",{id:"custom-css","onUpdate:modelValue":a[19]||(a[19]=L=>s.value.customCSS=L),rows:"12",class:"form-input css-editor",placeholder:`/* CSS personalizado para este contenedor */
.mi-contenedor {
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  border-radius: 20px;
  overflow: hidden;
}

/* Aplicar a bloques hijos */
.container-children > div {
  margin-bottom: 20px;
}

.container-children > div:last-child {
  margin-bottom: 0;
}`},null,512),[[I,s.value.customCSS]]),a[50]||(a[50]=e("small",{class:"form-help"},"Este CSS se aplicará únicamente a este contenedor",-1))])])])],512),[[ge,i.value==="attributes"]])])]),e("div",G5,[e("button",{onClick:o,class:"btn-secondary"},a[52]||(a[52]=[e("i",{class:"fas fa-undo"},null,-1),B(" Restaurar por Defecto ",-1)])),e("button",{onClick:a[20]||(a[20]=L=>t.$emit("close")),class:"btn-secondary"},a[53]||(a[53]=[e("i",{class:"fas fa-times"},null,-1),B(" Cancelar ",-1)])),e("button",{onClick:C,class:"btn-primary"},a[54]||(a[54]=[e("i",{class:"fas fa-check"},null,-1),B(" Aplicar Cambios ",-1)]))])]),_(Ue,{show:$.value,"selected-media":m.value,"type-filter":"image",multiple:!0,onClose:U,onSelect:T},null,8,["show","selected-media"])]))}}),q5=re(N5,[["__scopeId","data-v-4cbdb78e"]]),H5={class:"modal-overlay"},O5={class:"modal-header"},j5={class:"modal-body"},W5={class:"tabs-nav"},Z5={class:"tab-content"},X5={class:"tab-pane"},K5={class:"editor-sections"},J5={class:"editor-section"},Q5={class:"form-row"},Y5={class:"form-group"},e_={class:"form-group"},o_={class:"form-row"},t_={class:"form-group"},s_={class:"form-group"},l_={class:"form-group"},a_={class:"color-input-group"},n_=["value"],i_={class:"tab-pane"},r_={class:"editor-sections"},d_={class:"editor-section"},u_={class:"section-header"},c_={key:0,class:"empty-images"},p_={class:"empty-state"},v_={key:1,class:"images-list"},m_={class:"image-preview"},g_=["src","alt"],f_={class:"image-details"},b_={class:"form-group"},y_=["onUpdate:modelValue"],k_={class:"form-group"},$_=["onUpdate:modelValue"],h_={class:"form-row"},C_={class:"form-group"},__=["onUpdate:modelValue"],w_={class:"form-group"},S_=["onUpdate:modelValue"],x_={class:"image-actions"},E_=["onClick","disabled"],I_=["onClick","disabled"],U_=["onClick"],V_={class:"tab-pane"},M_={class:"editor-sections"},T_={class:"editor-section"},P_={class:"form-group"},B_={class:"form-group"},A_={class:"editor-section"},L_={class:"form-group"},D_={key:0,class:"form-group"},R_={key:1,class:"form-group"},F_={key:2,class:"mask-preview"},z_={class:"tab-pane"},G_={class:"editor-sections"},N_={class:"editor-section"},q_={class:"form-group"},H_={class:"form-group"},O_={class:"form-group"},j_={class:"modal-footer"},W_=ve({__name:"ImageGalleryBlockEditor",props:{block:{}},emits:["update","update-real-time","close"],setup(p,{emit:u}){const c=p,b=u,i=D("general"),w=D(!1),s=D({...c.block}),r=()=>Math.random().toString(36).substr(2,9),$=()=>{w.value=!0},m=V=>{const o=V.map(t=>({id:r(),mediaId:t.id,src:t.url,alt:t.name||"Imagen de galería",caption:"",link:"",linkTarget:"_self"}));s.value.items.push(...o),w.value=!1},M=V=>{if(V>0){const o=s.value.items[V];s.value.items[V]=s.value.items[V-1],s.value.items[V-1]=o}},C=V=>{if(V<s.value.items.length-1){const o=s.value.items[V];s.value.items[V]=s.value.items[V+1],s.value.items[V+1]=o}},S=V=>{confirm("¿Estás seguro de eliminar esta imagen?")&&s.value.items.splice(V,1)},U=()=>{const V={};switch(s.value.maskType){case"circle":V.clipPath="circle(50%)";break;case"rounded":V.borderRadius=`${s.value.borderRadius||12}px`;break;case"custom":s.value.customMask&&(V.clipPath=`path('${s.value.customMask}')`);break}return V},T=()=>{b("update",{...s.value}),b("close")};return(V,o)=>(l(),n("div",H5,[e("div",{class:"modal-content",onClick:o[20]||(o[20]=ce(()=>{},["stop"]))},[e("div",O5,[o[22]||(o[22]=e("h3",null,"Editar Galería de Imágenes",-1)),e("button",{onClick:o[0]||(o[0]=t=>V.$emit("close")),class:"btn-close"},[_(N,{name:"close"})])]),e("div",j5,[e("div",W5,[e("button",{onClick:o[1]||(o[1]=t=>i.value="general"),class:O(["tab-button",{active:i.value==="general"}])},[_(N,{name:"settings"}),o[23]||(o[23]=B(" Configuración General ",-1))],2),e("button",{onClick:o[2]||(o[2]=t=>i.value="images"),class:O(["tab-button",{active:i.value==="images"}])},[_(N,{name:"image"}),B(" Imágenes ("+f(s.value.items.length)+") ",1)],2),e("button",{onClick:o[3]||(o[3]=t=>i.value="styles"),class:O(["tab-button",{active:i.value==="styles"}])},[_(N,{name:"palette"}),o[24]||(o[24]=B(" Estilos y Máscaras ",-1))],2),e("button",{onClick:o[4]||(o[4]=t=>i.value="attributes"),class:O(["tab-button",{active:i.value==="attributes"}])},[_(N,{name:"code"}),o[25]||(o[25]=B(" Atributos ",-1))],2)]),e("div",Z5,[g(e("div",X5,[e("div",K5,[e("div",J5,[o[35]||(o[35]=e("h4",null,"Configuración del Grid",-1)),e("div",Q5,[e("div",Y5,[o[27]||(o[27]=e("label",{for:"columns"},"Número de columnas",-1)),g(e("select",{id:"columns","onUpdate:modelValue":o[5]||(o[5]=t=>s.value.columnsCount=t),class:"form-input"},o[26]||(o[26]=[e("option",{value:1},"1 columna",-1),e("option",{value:2},"2 columnas",-1),e("option",{value:3},"3 columnas",-1),e("option",{value:4},"4 columnas",-1),e("option",{value:5},"5 columnas",-1),e("option",{value:6},"6 columnas",-1)]),512),[[ie,s.value.columnsCount]])]),e("div",e_,[o[29]||(o[29]=e("label",{for:"gap"},"Espaciado entre imágenes",-1)),g(e("select",{id:"gap","onUpdate:modelValue":o[6]||(o[6]=t=>s.value.gap=t),class:"form-input"},o[28]||(o[28]=[e("option",{value:"none"},"Sin espaciado",-1),e("option",{value:"small"},"Pequeño",-1),e("option",{value:"medium"},"Mediano",-1),e("option",{value:"large"},"Grande",-1)]),512),[[ie,s.value.gap]])])]),e("div",o_,[e("div",t_,[o[31]||(o[31]=e("label",{for:"padding"},"Padding del bloque",-1)),g(e("select",{id:"padding","onUpdate:modelValue":o[7]||(o[7]=t=>s.value.padding=t),class:"form-input"},o[30]||(o[30]=[e("option",{value:"none"},"Sin padding",-1),e("option",{value:"small"},"Pequeño",-1),e("option",{value:"medium"},"Mediano",-1),e("option",{value:"large"},"Grande",-1)]),512),[[ie,s.value.padding]])]),e("div",s_,[o[33]||(o[33]=e("label",{for:"alignment"},"Alineación",-1)),g(e("select",{id:"alignment","onUpdate:modelValue":o[8]||(o[8]=t=>s.value.alignment=t),class:"form-input"},o[32]||(o[32]=[e("option",{value:"left"},"Izquierda",-1),e("option",{value:"center"},"Centro",-1),e("option",{value:"right"},"Derecha",-1)]),512),[[ie,s.value.alignment]])])]),e("div",l_,[o[34]||(o[34]=e("label",{for:"bg-color"},"Color de fondo del bloque",-1)),e("div",a_,[e("input",{type:"color",id:"bg-color",value:s.value.backgroundColor||"#ffffff",onInput:o[9]||(o[9]=t=>s.value.backgroundColor=t.target.value),class:"color-picker"},null,40,n_),g(e("input",{type:"text","onUpdate:modelValue":o[10]||(o[10]=t=>s.value.backgroundColor=t),class:"color-text",placeholder:"Transparente"},null,512),[[I,s.value.backgroundColor]])])])])])],512),[[ge,i.value==="general"]]),g(e("div",i_,[e("div",r_,[e("div",d_,[e("div",u_,[o[37]||(o[37]=e("h4",null,"Gestión de Imágenes",-1)),e("button",{onClick:$,class:"btn-primary"},[_(N,{name:"plus"}),o[36]||(o[36]=B(" Agregar Imágenes ",-1))])]),s.value.items.length===0?(l(),n("div",c_,[e("div",p_,[o[39]||(o[39]=e("i",{class:"fas fa-images"},null,-1)),o[40]||(o[40]=e("h4",null,"Sin imágenes",-1)),o[41]||(o[41]=e("p",null,"Agrega imágenes para crear tu galería",-1)),e("button",{onClick:$,class:"btn-primary"},[_(N,{name:"plus"}),o[38]||(o[38]=B(" Agregar Primeras Imágenes ",-1))])])])):(l(),n("div",v_,[(l(!0),n(te,null,le(s.value.items,(t,a)=>(l(),n("div",{key:t.id,class:"image-item"},[e("div",m_,[e("img",{src:G(_e)(t.src),alt:t.alt},null,8,g_)]),e("div",f_,[e("div",b_,[o[42]||(o[42]=e("label",null,"Texto alternativo",-1)),g(e("input",{"onUpdate:modelValue":L=>t.alt=L,type:"text",class:"form-input",placeholder:"Descripción de la imagen"},null,8,y_),[[I,t.alt]])]),e("div",k_,[o[43]||(o[43]=e("label",null,"Caption (opcional)",-1)),g(e("input",{"onUpdate:modelValue":L=>t.caption=L,type:"text",class:"form-input",placeholder:"Texto que aparece sobre la imagen"},null,8,$_),[[I,t.caption]])]),e("div",h_,[e("div",C_,[o[44]||(o[44]=e("label",null,"Enlace (opcional)",-1)),g(e("input",{"onUpdate:modelValue":L=>t.link=L,type:"url",class:"form-input",placeholder:"https://ejemplo.com"},null,8,__),[[I,t.link]])]),e("div",w_,[o[46]||(o[46]=e("label",null,"Target",-1)),g(e("select",{"onUpdate:modelValue":L=>t.linkTarget=L,class:"form-input"},o[45]||(o[45]=[e("option",{value:"_self"},"Misma ventana",-1),e("option",{value:"_blank"},"Nueva ventana",-1)]),8,S_),[[ie,t.linkTarget]])])])]),e("div",x_,[e("button",{onClick:L=>M(a),disabled:a===0,class:"btn-move",title:"Mover arriba"},[_(N,{name:"chevron-up"})],8,E_),e("button",{onClick:L=>C(a),disabled:a===s.value.items.length-1,class:"btn-move",title:"Mover abajo"},[_(N,{name:"chevron-down"})],8,I_),e("button",{onClick:L=>S(a),class:"btn-delete",title:"Eliminar imagen"},[_(N,{name:"trash"})],8,U_)])]))),128))]))])])],512),[[ge,i.value==="images"]]),g(e("div",V_,[e("div",M_,[e("div",T_,[o[51]||(o[51]=e("h4",null,"Formato de Imagen",-1)),e("div",P_,[o[48]||(o[48]=e("label",{for:"aspect-ratio"},"Relación de aspecto",-1)),g(e("select",{id:"aspect-ratio","onUpdate:modelValue":o[11]||(o[11]=t=>s.value.aspectRatio=t),class:"form-input"},o[47]||(o[47]=[Se('<option value="square" data-v-b42f8ea9>Cuadrado (1:1)</option><option value="4:3" data-v-b42f8ea9>Paisaje (4:3)</option><option value="16:9" data-v-b42f8ea9>Panorámico (16:9)</option><option value="3:4" data-v-b42f8ea9>Retrato (3:4)</option><option value="9:16" data-v-b42f8ea9>Vertical (9:16)</option><option value="auto" data-v-b42f8ea9>Automático</option>',6)]),512),[[ie,s.value.aspectRatio]])]),e("div",B_,[o[50]||(o[50]=e("label",{for:"hover-effect"},"Efecto hover",-1)),g(e("select",{id:"hover-effect","onUpdate:modelValue":o[12]||(o[12]=t=>s.value.hoverEffect=t),class:"form-input"},o[49]||(o[49]=[e("option",{value:"none"},"Sin efecto",-1),e("option",{value:"zoom"},"Zoom",-1),e("option",{value:"fade"},"Desvanecimiento",-1),e("option",{value:"lift"},"Elevación",-1)]),512),[[ie,s.value.hoverEffect]])])]),e("div",A_,[o[59]||(o[59]=e("h4",null,"Máscaras y Formas",-1)),e("div",L_,[o[53]||(o[53]=e("label",{for:"mask-type"},"Tipo de máscara",-1)),g(e("select",{id:"mask-type","onUpdate:modelValue":o[13]||(o[13]=t=>s.value.maskType=t),class:"form-input"},o[52]||(o[52]=[e("option",{value:"none"},"Sin máscara",-1),e("option",{value:"circle"},"Circular",-1),e("option",{value:"rounded"},"Redondeado",-1),e("option",{value:"custom"},"Personalizado (SVG)",-1)]),512),[[ie,s.value.maskType]])]),s.value.maskType==="rounded"?(l(),n("div",D_,[o[54]||(o[54]=e("label",{for:"border-radius"},"Radio del borde (px)",-1)),g(e("input",{type:"number",id:"border-radius","onUpdate:modelValue":o[14]||(o[14]=t=>s.value.borderRadius=t),min:"0",max:"50",class:"form-input"},null,512),[[I,s.value.borderRadius,void 0,{number:!0}]])])):R("",!0),s.value.maskType==="custom"?(l(),n("div",R_,[o[55]||(o[55]=e("label",{for:"custom-mask"},"Path SVG personalizado",-1)),g(e("textarea",{id:"custom-mask","onUpdate:modelValue":o[15]||(o[15]=t=>s.value.customMask=t),rows:"4",class:"form-input",placeholder:"M10,10 L90,10 L90,90 L10,90 Z"},null,512),[[I,s.value.customMask]]),o[56]||(o[56]=e("small",{class:"form-help"},"Introduce un path SVG válido para crear formas personalizadas",-1))])):R("",!0),s.value.maskType!=="none"?(l(),n("div",F_,[o[58]||(o[58]=e("h5",null,"Vista previa",-1)),e("div",{class:O(["preview-sample",[`mask-${s.value.maskType}`]]),style:de(U())},o[57]||(o[57]=[e("div",{class:"sample-content"},"Ejemplo",-1)]),6)])):R("",!0)])])],512),[[ge,i.value==="styles"]]),g(e("div",z_,[e("div",G_,[e("div",N_,[o[66]||(o[66]=e("h4",null,"Atributos del Bloque",-1)),e("div",q_,[o[60]||(o[60]=e("label",{for:"block-id"},"ID del bloque",-1)),g(e("input",{type:"text",id:"block-id","onUpdate:modelValue":o[16]||(o[16]=t=>s.value.customId=t),class:"form-input",placeholder:"mi-galeria-unica"},null,512),[[I,s.value.customId]]),o[61]||(o[61]=e("small",{class:"form-help"},"ID único para este bloque (opcional)",-1))]),e("div",H_,[o[62]||(o[62]=e("label",{for:"block-class"},"Clases CSS",-1)),g(e("input",{type:"text",id:"block-class","onUpdate:modelValue":o[17]||(o[17]=t=>s.value.customClass=t),class:"form-input",placeholder:"mi-clase otra-clase"},null,512),[[I,s.value.customClass]]),o[63]||(o[63]=e("small",{class:"form-help"},"Clases CSS separadas por espacios (opcional)",-1))]),e("div",O_,[o[64]||(o[64]=e("label",{for:"custom-css"},"CSS Personalizado",-1)),g(e("textarea",{id:"custom-css","onUpdate:modelValue":o[18]||(o[18]=t=>s.value.customCSS=t),rows:"12",class:"form-input css-editor",placeholder:`/* CSS personalizado para esta galería */
.mi-galeria {
  border: 2px solid #007bff;
  border-radius: 15px;
}

.gallery-image {
  filter: grayscale(100%);
  transition: filter 0.3s ease;
}

.gallery-image:hover {
  filter: grayscale(0%);
}`},null,512),[[I,s.value.customCSS]]),o[65]||(o[65]=e("small",{class:"form-help"},"Este CSS se aplicará únicamente a esta galería",-1))])])])],512),[[ge,i.value==="attributes"]])])]),e("div",j_,[e("button",{onClick:o[19]||(o[19]=t=>V.$emit("close")),class:"btn-secondary"},[_(N,{name:"close"}),o[67]||(o[67]=B(" Cancelar ",-1))]),e("button",{onClick:T,class:"btn-primary"},[_(N,{name:"check"}),o[68]||(o[68]=B(" Aplicar Cambios ",-1))])])]),_(Ue,{show:w.value,"type-filter":"image",multiple:!0,"selected-media":[],onClose:o[21]||(o[21]=t=>w.value=!1),onSelect:m},null,8,["show"])]))}}),Z_=re(W_,[["__scopeId","data-v-b42f8ea9"]]),X_={class:"modal-overlay"},K_={class:"modal-header"},J_={class:"modal-body"},Q_={class:"tabs-nav"},Y_={class:"tab-content"},ew={class:"tab-pane"},ow={class:"editor-sections"},tw={class:"editor-section"},sw={class:"form-row"},lw={class:"form-group"},aw={class:"form-group"},nw={class:"form-row"},iw={class:"form-group"},rw={class:"form-group"},dw={class:"form-group"},uw={class:"color-input-group"},cw=["value"],pw={class:"tab-pane"},vw={class:"editor-sections"},mw={class:"editor-section"},gw={class:"section-header"},fw={key:0,class:"empty-members"},bw={class:"empty-state"},yw={key:1,class:"members-list"},kw={class:"member-photo"},$w={key:0,class:"photo-preview"},hw=["src","alt","onLoad","onError"],Cw={key:1,class:"photo-placeholder"},_w=["onClick"],ww={class:"member-details"},Sw={class:"form-row"},xw={class:"form-group"},Ew=["onUpdate:modelValue"],Iw={class:"form-group"},Uw=["onUpdate:modelValue"],Vw={class:"form-group"},Mw=["onUpdate:modelValue"],Tw={class:"socials-section"},Pw={class:"socials-list"},Bw=["onUpdate:modelValue"],Aw=["onUpdate:modelValue","placeholder"],Lw=["onClick"],Dw=["onClick"],Rw={class:"member-actions"},Fw=["onClick","disabled"],zw=["onClick","disabled"],Gw=["onClick"],Nw={class:"tab-pane"},qw={class:"editor-sections"},Hw={class:"editor-section"},Ow={class:"form-group"},jw={class:"form-group"},Ww={class:"editor-section"},Zw={class:"form-group"},Xw={key:0,class:"form-group"},Kw={key:1,class:"form-group"},Jw={key:2,class:"mask-preview"},Qw={class:"tab-pane"},Yw={class:"editor-sections"},e8={class:"editor-section"},o8={class:"form-group"},t8={class:"form-group"},s8={class:"form-group"},l8={class:"modal-footer"},a8=ve({__name:"TeamBlockEditor",props:{block:{}},emits:["update","update-real-time","close"],setup(p,{emit:u}){const c=p,b=u,i=D("general"),w=D(!1),s=D(null),r=D({...c.block,members:c.block.members||[]}),$=()=>Math.random().toString(36).substr(2,9),m=E=>{s.value=E,w.value=!0},M=E=>{if(console.log("TeamBlockEditor - handleMediaSelect:",E),console.log("TeamBlockEditor - Type of selectedMedia:",typeof E),console.log("TeamBlockEditor - Is array:",Array.isArray(E)),s.value!==null&&E.length>0){const d=E[0];console.log("TeamBlockEditor - Selected media:",d),console.log("TeamBlockEditor - Member index:",s.value),console.log("TeamBlockEditor - Media URL field:",d.url),r.value.members[s.value]&&(r.value.members[s.value].photo=d.url,r.value.members[s.value].mediaId=d.id,console.log("TeamBlockEditor - Updated member photo:",d.url),console.log("TeamBlockEditor - Updated member:",r.value.members[s.value]))}w.value=!1,s.value=null},C=()=>{const E={id:$(),photo:"",name:"",position:"",description:"",socials:[]};r.value.members.push(E)},S=E=>{if(E>0){const d=r.value.members[E];r.value.members[E]=r.value.members[E-1],r.value.members[E-1]=d}},U=E=>{if(E<r.value.members.length-1){const d=r.value.members[E];r.value.members[E]=r.value.members[E+1],r.value.members[E+1]=d}},T=E=>{confirm("¿Estás seguro de eliminar este miembro?")&&r.value.members.splice(E,1)},V=E=>{const d={platform:"facebook",url:""};r.value.members[E].socials.push(d)},o=(E,d)=>{r.value.members[E].socials.splice(d,1)},t=E=>({facebook:"https://facebook.com/usuario",twitter:"https://twitter.com/usuario",instagram:"https://instagram.com/usuario",linkedin:"https://linkedin.com/in/usuario",github:"https://github.com/usuario",email:"correo@ejemplo.com",website:"https://sitio.com"})[E]||"https://",a=()=>{const E={};switch(r.value.maskType){case"circle":E.clipPath="circle(50%)";break;case"rounded":E.borderRadius=`${r.value.borderRadius||12}px`;break;case"custom":r.value.customMask&&(E.clipPath=`path('${r.value.customMask}')`);break}return E},L=()=>{b("update",{...r.value}),b("close")};return(E,d)=>(l(),n("div",X_,[e("div",{class:"modal-content",onClick:d[20]||(d[20]=ce(()=>{},["stop"]))},[e("div",K_,[d[22]||(d[22]=e("h3",null,"Editar Bloque de Equipo",-1)),e("button",{onClick:d[0]||(d[0]=v=>E.$emit("close")),class:"btn-close"},[_(N,{name:"close"})])]),e("div",J_,[e("div",Q_,[e("button",{onClick:d[1]||(d[1]=v=>i.value="general"),class:O(["tab-button",{active:i.value==="general"}])},[_(N,{name:"settings"}),d[23]||(d[23]=B(" Configuración General ",-1))],2),e("button",{onClick:d[2]||(d[2]=v=>i.value="members"),class:O(["tab-button",{active:i.value==="members"}])},[_(N,{name:"users"}),B(" Miembros ("+f(r.value.members.length)+") ",1)],2),e("button",{onClick:d[3]||(d[3]=v=>i.value="styles"),class:O(["tab-button",{active:i.value==="styles"}])},[_(N,{name:"palette"}),d[24]||(d[24]=B(" Estilos y Máscaras ",-1))],2),e("button",{onClick:d[4]||(d[4]=v=>i.value="attributes"),class:O(["tab-button",{active:i.value==="attributes"}])},[_(N,{name:"code"}),d[25]||(d[25]=B(" Atributos ",-1))],2)]),e("div",Y_,[g(e("div",ew,[e("div",ow,[e("div",tw,[d[35]||(d[35]=e("h4",null,"Configuración del Grid",-1)),e("div",sw,[e("div",lw,[d[27]||(d[27]=e("label",{for:"columns"},"Número de columnas",-1)),g(e("select",{id:"columns","onUpdate:modelValue":d[5]||(d[5]=v=>r.value.columnsCount=v),class:"form-input"},d[26]||(d[26]=[e("option",{value:1},"1 columna",-1),e("option",{value:2},"2 columnas",-1),e("option",{value:3},"3 columnas",-1),e("option",{value:4},"4 columnas",-1),e("option",{value:5},"5 columnas",-1),e("option",{value:6},"6 columnas",-1)]),512),[[ie,r.value.columnsCount]])]),e("div",aw,[d[29]||(d[29]=e("label",{for:"gap"},"Espaciado entre miembros",-1)),g(e("select",{id:"gap","onUpdate:modelValue":d[6]||(d[6]=v=>r.value.gap=v),class:"form-input"},d[28]||(d[28]=[e("option",{value:"none"},"Sin espaciado",-1),e("option",{value:"small"},"Pequeño",-1),e("option",{value:"medium"},"Mediano",-1),e("option",{value:"large"},"Grande",-1)]),512),[[ie,r.value.gap]])])]),e("div",nw,[e("div",iw,[d[31]||(d[31]=e("label",{for:"padding"},"Padding del bloque",-1)),g(e("select",{id:"padding","onUpdate:modelValue":d[7]||(d[7]=v=>r.value.padding=v),class:"form-input"},d[30]||(d[30]=[e("option",{value:"none"},"Sin padding",-1),e("option",{value:"small"},"Pequeño",-1),e("option",{value:"medium"},"Mediano",-1),e("option",{value:"large"},"Grande",-1)]),512),[[ie,r.value.padding]])]),e("div",rw,[d[33]||(d[33]=e("label",{for:"alignment"},"Alineación",-1)),g(e("select",{id:"alignment","onUpdate:modelValue":d[8]||(d[8]=v=>r.value.alignment=v),class:"form-input"},d[32]||(d[32]=[e("option",{value:"left"},"Izquierda",-1),e("option",{value:"center"},"Centro",-1),e("option",{value:"right"},"Derecha",-1)]),512),[[ie,r.value.alignment]])])]),e("div",dw,[d[34]||(d[34]=e("label",{for:"bg-color"},"Color de fondo del bloque",-1)),e("div",uw,[e("input",{type:"color",id:"bg-color",value:r.value.backgroundColor||"#ffffff",onInput:d[9]||(d[9]=v=>r.value.backgroundColor=v.target.value),class:"color-picker"},null,40,cw),g(e("input",{type:"text","onUpdate:modelValue":d[10]||(d[10]=v=>r.value.backgroundColor=v),class:"color-text",placeholder:"Transparente"},null,512),[[I,r.value.backgroundColor]])])])])])],512),[[ge,i.value==="general"]]),g(e("div",pw,[e("div",vw,[e("div",mw,[e("div",gw,[d[37]||(d[37]=e("h4",null,"Gestión de Miembros del Equipo",-1)),e("button",{onClick:C,class:"btn-primary"},[_(N,{name:"plus"}),d[36]||(d[36]=B(" Agregar Miembro ",-1))])]),r.value.members.length===0?(l(),n("div",fw,[e("div",bw,[d[39]||(d[39]=e("i",{class:"fas fa-users"},null,-1)),d[40]||(d[40]=e("h4",null,"Sin miembros",-1)),d[41]||(d[41]=e("p",null,"Agrega miembros para crear tu equipo",-1)),e("button",{onClick:C,class:"btn-primary"},[_(N,{name:"plus"}),d[38]||(d[38]=B(" Agregar Primer Miembro ",-1))])])])):(l(),n("div",yw,[(l(!0),n(te,null,le(r.value.members,(v,z)=>(l(),n("div",{key:v.id,class:"member-item"},[e("div",kw,[v.photo?(l(),n("div",$w,[e("img",{src:G(_e)(v.photo),alt:v.name,onLoad:()=>console.log("TeamBlockEditor - Preview image loaded:",v.name,v.photo),onError:k=>console.error("TeamBlockEditor - Preview image error:",v.name,v.photo,k)},null,40,hw)])):(l(),n("div",Cw,[_(N,{name:"photo"})])),e("button",{onClick:k=>m(z),class:"btn-photo"},[_(N,{name:"photo"}),B(" "+f(v.photo?"Cambiar":"Agregar"),1)],8,_w)]),e("div",ww,[e("div",Sw,[e("div",xw,[d[42]||(d[42]=e("label",null,"Nombre completo",-1)),g(e("input",{"onUpdate:modelValue":k=>v.name=k,type:"text",class:"form-input",placeholder:"Juan Pérez"},null,8,Ew),[[I,v.name]])]),e("div",Iw,[d[43]||(d[43]=e("label",null,"Cargo/Posición",-1)),g(e("input",{"onUpdate:modelValue":k=>v.position=k,type:"text",class:"form-input",placeholder:"CEO, Director, etc."},null,8,Uw),[[I,v.position]])])]),e("div",Vw,[d[44]||(d[44]=e("label",null,"Descripción breve",-1)),g(e("textarea",{"onUpdate:modelValue":k=>v.description=k,class:"form-input",rows:"3",placeholder:"Descripción del miembro del equipo..."},null,8,Mw),[[I,v.description]])]),e("div",Tw,[d[47]||(d[47]=e("h5",null,"Redes Sociales",-1)),e("div",Pw,[(l(!0),n(te,null,le(v.socials,(k,x)=>(l(),n("div",{key:x,class:"social-item"},[g(e("select",{"onUpdate:modelValue":oe=>k.platform=oe,class:"form-input social-platform"},d[45]||(d[45]=[Se('<option value="facebook" data-v-06fb8386>Facebook</option><option value="twitter" data-v-06fb8386>Twitter</option><option value="instagram" data-v-06fb8386>Instagram</option><option value="linkedin" data-v-06fb8386>LinkedIn</option><option value="github" data-v-06fb8386>GitHub</option><option value="email" data-v-06fb8386>Email</option><option value="website" data-v-06fb8386>Sitio Web</option>',7)]),8,Bw),[[ie,k.platform]]),g(e("input",{"onUpdate:modelValue":oe=>k.url=oe,type:"url",class:"form-input social-url",placeholder:t(k.platform)},null,8,Aw),[[I,k.url]]),e("button",{onClick:oe=>o(z,x),class:"btn-delete-social",title:"Eliminar red social"},[_(N,{name:"trash"})],8,Lw)]))),128))]),e("button",{onClick:k=>V(z),class:"btn-add-social"},[_(N,{name:"plus"}),d[46]||(d[46]=B(" Agregar Red Social ",-1))],8,Dw)])]),e("div",Rw,[e("button",{onClick:k=>S(z),disabled:z===0,class:"btn-move",title:"Mover arriba"},[_(N,{name:"chevron-up"})],8,Fw),e("button",{onClick:k=>U(z),disabled:z===r.value.members.length-1,class:"btn-move",title:"Mover abajo"},[_(N,{name:"chevron-down"})],8,zw),e("button",{onClick:k=>T(z),class:"btn-delete",title:"Eliminar miembro"},[_(N,{name:"trash"})],8,Gw)])]))),128))]))])])],512),[[ge,i.value==="members"]]),g(e("div",Nw,[e("div",qw,[e("div",Hw,[d[52]||(d[52]=e("h4",null,"Formato de Foto",-1)),e("div",Ow,[d[49]||(d[49]=e("label",{for:"aspect-ratio"},"Relación de aspecto",-1)),g(e("select",{id:"aspect-ratio","onUpdate:modelValue":d[11]||(d[11]=v=>r.value.aspectRatio=v),class:"form-input"},d[48]||(d[48]=[Se('<option value="square" data-v-06fb8386>Cuadrado (1:1)</option><option value="4:3" data-v-06fb8386>Paisaje (4:3)</option><option value="16:9" data-v-06fb8386>Panorámico (16:9)</option><option value="3:4" data-v-06fb8386>Retrato (3:4)</option><option value="9:16" data-v-06fb8386>Vertical (9:16)</option><option value="auto" data-v-06fb8386>Automático</option>',6)]),512),[[ie,r.value.aspectRatio]])]),e("div",jw,[d[51]||(d[51]=e("label",{for:"hover-effect"},"Efecto hover",-1)),g(e("select",{id:"hover-effect","onUpdate:modelValue":d[12]||(d[12]=v=>r.value.hoverEffect=v),class:"form-input"},d[50]||(d[50]=[e("option",{value:"none"},"Sin efecto",-1),e("option",{value:"zoom"},"Zoom",-1),e("option",{value:"fade"},"Desvanecimiento",-1),e("option",{value:"lift"},"Elevación",-1)]),512),[[ie,r.value.hoverEffect]])])]),e("div",Ww,[d[60]||(d[60]=e("h4",null,"Máscaras y Formas",-1)),e("div",Zw,[d[54]||(d[54]=e("label",{for:"mask-type"},"Tipo de máscara",-1)),g(e("select",{id:"mask-type","onUpdate:modelValue":d[13]||(d[13]=v=>r.value.maskType=v),class:"form-input"},d[53]||(d[53]=[e("option",{value:"none"},"Sin máscara",-1),e("option",{value:"circle"},"Circular",-1),e("option",{value:"rounded"},"Redondeado",-1),e("option",{value:"custom"},"Personalizado (SVG)",-1)]),512),[[ie,r.value.maskType]])]),r.value.maskType==="rounded"?(l(),n("div",Xw,[d[55]||(d[55]=e("label",{for:"border-radius"},"Radio del borde (px)",-1)),g(e("input",{type:"number",id:"border-radius","onUpdate:modelValue":d[14]||(d[14]=v=>r.value.borderRadius=v),min:"0",max:"50",class:"form-input"},null,512),[[I,r.value.borderRadius,void 0,{number:!0}]])])):R("",!0),r.value.maskType==="custom"?(l(),n("div",Kw,[d[56]||(d[56]=e("label",{for:"custom-mask"},"Path SVG personalizado",-1)),g(e("textarea",{id:"custom-mask","onUpdate:modelValue":d[15]||(d[15]=v=>r.value.customMask=v),rows:"4",class:"form-input",placeholder:"M10,10 L90,10 L90,90 L10,90 Z"},null,512),[[I,r.value.customMask]]),d[57]||(d[57]=e("small",{class:"form-help"},"Introduce un path SVG válido para crear formas personalizadas",-1))])):R("",!0),r.value.maskType!=="none"?(l(),n("div",Jw,[d[59]||(d[59]=e("h5",null,"Vista previa",-1)),e("div",{class:O(["preview-sample",[`mask-${r.value.maskType}`]]),style:de(a())},d[58]||(d[58]=[e("div",{class:"sample-content"},"Ejemplo",-1)]),6)])):R("",!0)])])],512),[[ge,i.value==="styles"]]),g(e("div",Qw,[e("div",Yw,[e("div",e8,[d[67]||(d[67]=e("h4",null,"Atributos del Bloque",-1)),e("div",o8,[d[61]||(d[61]=e("label",{for:"block-id"},"ID del bloque",-1)),g(e("input",{type:"text",id:"block-id","onUpdate:modelValue":d[16]||(d[16]=v=>r.value.customId=v),class:"form-input",placeholder:"mi-equipo-unico"},null,512),[[I,r.value.customId]]),d[62]||(d[62]=e("small",{class:"form-help"},"ID único para este bloque (opcional)",-1))]),e("div",t8,[d[63]||(d[63]=e("label",{for:"block-class"},"Clases CSS",-1)),g(e("input",{type:"text",id:"block-class","onUpdate:modelValue":d[17]||(d[17]=v=>r.value.customClass=v),class:"form-input",placeholder:"mi-clase otra-clase"},null,512),[[I,r.value.customClass]]),d[64]||(d[64]=e("small",{class:"form-help"},"Clases CSS separadas por espacios (opcional)",-1))]),e("div",s8,[d[65]||(d[65]=e("label",{for:"custom-css"},"CSS Personalizado",-1)),g(e("textarea",{id:"custom-css","onUpdate:modelValue":d[18]||(d[18]=v=>r.value.customCSS=v),rows:"12",class:"form-input css-editor",placeholder:`/* CSS personalizado para este equipo */
.mi-equipo {
  border: 2px solid #007bff;
  border-radius: 15px;
}

.team-member {
  filter: grayscale(100%);
  transition: filter 0.3s ease;
}

.team-member:hover {
  filter: grayscale(0%);
}`},null,512),[[I,r.value.customCSS]]),d[66]||(d[66]=e("small",{class:"form-help"},"Este CSS se aplicará únicamente a este bloque de equipo",-1))])])])],512),[[ge,i.value==="attributes"]])])]),e("div",l8,[e("button",{onClick:d[19]||(d[19]=v=>E.$emit("close")),class:"btn-secondary"},[_(N,{name:"close"}),d[68]||(d[68]=B(" Cancelar ",-1))]),e("button",{onClick:L,class:"btn-primary"},[_(N,{name:"check"}),d[69]||(d[69]=B(" Aplicar Cambios ",-1))])])]),_(Ue,{show:w.value,"type-filter":"image",multiple:!0,"selected-media":[],onClose:d[21]||(d[21]=v=>w.value=!1),onSelect:M},null,8,["show"])]))}}),n8=re(a8,[["__scopeId","data-v-06fb8386"]]),i8={class:"modal-overlay"},r8={class:"modal-header"},d8={class:"modal-body"},u8={class:"tabs-nav"},c8={class:"tab-content"},p8={class:"tab-pane"},v8={class:"editor-sections"},m8={class:"editor-section"},g8={class:"form-row"},f8={class:"form-group"},b8={class:"form-group"},y8={class:"editor-section"},k8={class:"form-row"},$8={class:"form-group"},h8={key:0,class:"form-group"},C8={class:"form-row"},_8={class:"form-group"},w8={class:"form-group"},S8={class:"form-row"},x8={class:"form-group"},E8={class:"form-group"},I8={class:"form-group"},U8={class:"color-input-group"},V8=["value"],M8={class:"tab-pane"},T8={class:"editor-sections"},P8={class:"editor-section"},B8={class:"section-header"},A8={key:0,class:"empty-services"},L8={class:"empty-state"},D8={key:1,class:"services-list"},R8={class:"service-icon"},F8={key:0,class:"icon-preview"},z8=["src","alt","onLoad","onError"],G8={key:1,class:"icon-placeholder"},N8=["onClick"],q8={class:"service-details"},H8={class:"form-group"},O8=["onUpdate:modelValue"],j8={class:"form-group"},W8=["onUpdate:modelValue"],Z8={class:"form-group"},X8={class:"editor-container"},K8={class:"service-actions"},J8=["onClick","disabled"],Q8=["onClick","disabled"],Y8=["onClick"],eS={class:"tab-pane"},oS={class:"editor-sections"},tS={class:"editor-section"},sS={class:"form-group"},lS={class:"info-box"},aS={class:"tab-pane"},nS={class:"editor-sections"},iS={class:"editor-section"},rS={class:"form-group"},dS={class:"form-group"},uS={class:"form-group"},cS={class:"modal-footer"},pS=ve({__name:"ServicesBlockEditor",props:{block:{}},emits:["update","update-real-time","close"],setup(p,{emit:u}){const c=p,b=u,i=D("general"),w=D(!1),s=D(null),r=D({...c.block,services:c.block.services||[]}),$=()=>Math.random().toString(36).substr(2,9),m=o=>{s.value=o,w.value=!0},M=o=>{if(console.log("ServicesBlockEditor - handleMediaSelect:",o),s.value!==null&&o.length>0){const t=o[0];console.log("ServicesBlockEditor - Selected media:",t),r.value.services[s.value]&&(r.value.services[s.value].icon=t.url,r.value.services[s.value].mediaId=t.id,console.log("ServicesBlockEditor - Updated service icon:",t.url))}w.value=!1,s.value=null},C=()=>{const o={id:$(),icon:"",title:"",shortDescription:"",longDescription:"<p>Descripción detallada del servicio...</p>"};r.value.services.push(o)},S=o=>{if(o>0){const t=r.value.services[o];r.value.services[o]=r.value.services[o-1],r.value.services[o-1]=t}},U=o=>{if(o<r.value.services.length-1){const t=r.value.services[o];r.value.services[o]=r.value.services[o+1],r.value.services[o+1]=t}},T=o=>{confirm("¿Estás seguro de eliminar este servicio?")&&r.value.services.splice(o,1)},V=()=>{b("update",{...r.value}),b("close")};return(o,t)=>(l(),n("div",i8,[e("div",{class:"modal-content",onClick:t[19]||(t[19]=ce(()=>{},["stop"]))},[e("div",r8,[t[21]||(t[21]=e("h3",null,"Editar Bloque de Servicios",-1)),e("button",{onClick:t[0]||(t[0]=a=>o.$emit("close")),class:"btn-close"},[_(N,{name:"close"})])]),e("div",d8,[e("div",u8,[e("button",{onClick:t[1]||(t[1]=a=>i.value="general"),class:O(["tab-button",{active:i.value==="general"}])},[_(N,{name:"settings"}),t[22]||(t[22]=B(" Configuración General ",-1))],2),e("button",{onClick:t[2]||(t[2]=a=>i.value="services"),class:O(["tab-button",{active:i.value==="services"}])},[_(N,{name:"briefcase"}),B(" Servicios ("+f(r.value.services.length)+") ",1)],2),e("button",{onClick:t[3]||(t[3]=a=>i.value="styles"),class:O(["tab-button",{active:i.value==="styles"}])},[_(N,{name:"palette"}),t[23]||(t[23]=B(" Estilos ",-1))],2),e("button",{onClick:t[4]||(t[4]=a=>i.value="attributes"),class:O(["tab-button",{active:i.value==="attributes"}])},[_(N,{name:"code"}),t[24]||(t[24]=B(" Atributos ",-1))],2)]),e("div",c8,[g(e("div",p8,[e("div",v8,[e("div",m8,[t[27]||(t[27]=e("h4",null,"Información del Bloque",-1)),e("div",g8,[e("div",f8,[t[25]||(t[25]=e("label",{for:"block-title"},"Título del bloque (opcional)",-1)),g(e("input",{type:"text",id:"block-title","onUpdate:modelValue":t[5]||(t[5]=a=>r.value.title=a),class:"form-input",placeholder:"Nuestros Servicios"},null,512),[[I,r.value.title]])]),e("div",b8,[t[26]||(t[26]=e("label",{for:"block-subtitle"},"Subtítulo (opcional)",-1)),g(e("input",{type:"text",id:"block-subtitle","onUpdate:modelValue":t[6]||(t[6]=a=>r.value.subtitle=a),class:"form-input",placeholder:"Descubre lo que podemos hacer por ti"},null,512),[[I,r.value.subtitle]])])])]),e("div",y8,[t[41]||(t[41]=e("h4",null,"Configuración del Layout",-1)),e("div",k8,[e("div",$8,[t[29]||(t[29]=e("label",{for:"display-mode"},"Modo de visualización",-1)),g(e("select",{id:"display-mode","onUpdate:modelValue":t[7]||(t[7]=a=>r.value.displayMode=a),class:"form-input"},t[28]||(t[28]=[e("option",{value:"tabs"},"Tabs/Pestañas",-1),e("option",{value:"accordion"},"Acordeón",-1),e("option",{value:"cards"},"Tarjetas",-1)]),512),[[ie,r.value.displayMode]])]),r.value.displayMode==="cards"||r.value.displayMode==="accordion"?(l(),n("div",h8,[t[31]||(t[31]=e("label",{for:"columns"},"Número de columnas",-1)),g(e("select",{id:"columns","onUpdate:modelValue":t[8]||(t[8]=a=>r.value.columnsCount=a),class:"form-input"},t[30]||(t[30]=[e("option",{value:1},"1 columna",-1),e("option",{value:2},"2 columnas",-1),e("option",{value:3},"3 columnas",-1),e("option",{value:4},"4 columnas",-1)]),512),[[ie,r.value.columnsCount]])])):R("",!0)]),e("div",C8,[e("div",_8,[t[33]||(t[33]=e("label",{for:"gap"},"Espaciado entre servicios",-1)),g(e("select",{id:"gap","onUpdate:modelValue":t[9]||(t[9]=a=>r.value.gap=a),class:"form-input"},t[32]||(t[32]=[e("option",{value:"none"},"Sin espaciado",-1),e("option",{value:"small"},"Pequeño",-1),e("option",{value:"medium"},"Mediano",-1),e("option",{value:"large"},"Grande",-1)]),512),[[ie,r.value.gap]])]),e("div",w8,[t[35]||(t[35]=e("label",{for:"padding"},"Padding del bloque",-1)),g(e("select",{id:"padding","onUpdate:modelValue":t[10]||(t[10]=a=>r.value.padding=a),class:"form-input"},t[34]||(t[34]=[e("option",{value:"none"},"Sin padding",-1),e("option",{value:"small"},"Pequeño",-1),e("option",{value:"medium"},"Mediano",-1),e("option",{value:"large"},"Grande",-1)]),512),[[ie,r.value.padding]])])]),e("div",S8,[e("div",x8,[t[37]||(t[37]=e("label",{for:"alignment"},"Alineación",-1)),g(e("select",{id:"alignment","onUpdate:modelValue":t[11]||(t[11]=a=>r.value.alignment=a),class:"form-input"},t[36]||(t[36]=[e("option",{value:"left"},"Izquierda",-1),e("option",{value:"center"},"Centro",-1),e("option",{value:"right"},"Derecha",-1)]),512),[[ie,r.value.alignment]])]),e("div",E8,[t[39]||(t[39]=e("label",{for:"icon-size"},"Tamaño de íconos",-1)),g(e("select",{id:"icon-size","onUpdate:modelValue":t[12]||(t[12]=a=>r.value.iconSize=a),class:"form-input"},t[38]||(t[38]=[e("option",{value:"small"},"Pequeño",-1),e("option",{value:"medium"},"Mediano",-1),e("option",{value:"large"},"Grande",-1)]),512),[[ie,r.value.iconSize]])])]),e("div",I8,[t[40]||(t[40]=e("label",{for:"bg-color"},"Color de fondo del bloque",-1)),e("div",U8,[e("input",{type:"color",id:"bg-color",value:r.value.backgroundColor||"#ffffff",onInput:t[13]||(t[13]=a=>r.value.backgroundColor=a.target.value),class:"color-picker"},null,40,V8),g(e("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=a=>r.value.backgroundColor=a),class:"color-text",placeholder:"Transparente"},null,512),[[I,r.value.backgroundColor]])])])])])],512),[[ge,i.value==="general"]]),g(e("div",M8,[e("div",T8,[e("div",P8,[e("div",B8,[t[43]||(t[43]=e("h4",null,"Gestión de Servicios",-1)),e("button",{onClick:C,class:"btn-primary"},[_(N,{name:"plus"}),t[42]||(t[42]=B(" Agregar Servicio ",-1))])]),r.value.services.length===0?(l(),n("div",A8,[e("div",L8,[_(N,{name:"briefcase"}),t[45]||(t[45]=e("h4",null,"Sin servicios",-1)),t[46]||(t[46]=e("p",null,"Agrega servicios para mostrar a tus clientes",-1)),e("button",{onClick:C,class:"btn-primary"},[_(N,{name:"plus"}),t[44]||(t[44]=B(" Agregar Primer Servicio ",-1))])])])):(l(),n("div",D8,[(l(!0),n(te,null,le(r.value.services,(a,L)=>(l(),n("div",{key:a.id,class:"service-item"},[e("div",R8,[a.icon?(l(),n("div",F8,[e("img",{src:G(_e)(a.icon),alt:a.title,onLoad:()=>console.log("ServicesBlockEditor - Icon loaded:",a.title,a.icon),onError:E=>console.error("ServicesBlockEditor - Icon error:",a.title,a.icon,E)},null,40,z8)])):(l(),n("div",G8,[_(N,{name:"photo"})])),e("button",{onClick:E=>m(L),class:"btn-icon"},[_(N,{name:"photo"}),B(" "+f(a.icon?"Cambiar":"Agregar"),1)],8,N8)]),e("div",q8,[e("div",H8,[t[47]||(t[47]=e("label",null,"Título del servicio",-1)),g(e("input",{"onUpdate:modelValue":E=>a.title=E,type:"text",class:"form-input",placeholder:"Desarrollo Web"},null,8,O8),[[I,a.title]])]),e("div",j8,[t[48]||(t[48]=e("label",null,"Descripción corta",-1)),g(e("textarea",{"onUpdate:modelValue":E=>a.shortDescription=E,class:"form-input",rows:"2",placeholder:"Breve descripción que aparece cuando el servicio está cerrado..."},null,8,W8),[[I,a.shortDescription]])]),e("div",Z8,[t[49]||(t[49]=e("label",null,"Descripción larga (con texto enriquecido)",-1)),e("div",X8,[_(uo,{modelValue:a.longDescription,"onUpdate:modelValue":E=>a.longDescription=E,loading:!1},null,8,["modelValue","onUpdate:modelValue"])])])]),e("div",K8,[e("button",{onClick:E=>S(L),disabled:L===0,class:"btn-move",title:"Mover arriba"},[_(N,{name:"chevron-up"})],8,J8),e("button",{onClick:E=>U(L),disabled:L===r.value.services.length-1,class:"btn-move",title:"Mover abajo"},[_(N,{name:"chevron-down"})],8,Q8),e("button",{onClick:E=>T(L),class:"btn-delete",title:"Eliminar servicio"},[_(N,{name:"trash"})],8,Y8)])]))),128))]))])])],512),[[ge,i.value==="services"]]),g(e("div",eS,[e("div",oS,[e("div",tS,[t[53]||(t[53]=e("h4",null,"Personalización Visual",-1)),e("div",sS,[t[51]||(t[51]=e("label",null,"Vista previa del modo de visualización",-1)),e("div",{class:O(["display-mode-preview",`mode-${r.value.displayMode}`])},t[50]||(t[50]=[Se('<div class="preview-content" data-v-15039f57><div class="preview-item" data-v-15039f57><div class="preview-icon" data-v-15039f57></div><div class="preview-text" data-v-15039f57><div class="preview-title" data-v-15039f57>Servicio Ejemplo</div><div class="preview-desc" data-v-15039f57>Descripción del servicio</div></div></div></div>',1)]),2)]),e("div",lS,[_(N,{name:"info"}),t[52]||(t[52]=e("div",null,[e("strong",null,"Información sobre modos:"),e("ul",null,[e("li",null,[e("strong",null,"Tabs:"),B(" Los servicios se muestran como pestañas horizontales")]),e("li",null,[e("strong",null,"Acordeón:"),B(" Los servicios se expanden/contraen verticalmente. Puedes configurar múltiples columnas para mostrar acordeones lado a lado")]),e("li",null,[e("strong",null,"Cards:"),B(" Cada servicio es una tarjeta independiente en un grid")])])],-1))])])])],512),[[ge,i.value==="styles"]]),g(e("div",aS,[e("div",nS,[e("div",iS,[t[60]||(t[60]=e("h4",null,"Atributos del Bloque",-1)),e("div",rS,[t[54]||(t[54]=e("label",{for:"block-id"},"ID del bloque",-1)),g(e("input",{type:"text",id:"block-id","onUpdate:modelValue":t[15]||(t[15]=a=>r.value.customId=a),class:"form-input",placeholder:"mis-servicios-unicos"},null,512),[[I,r.value.customId]]),t[55]||(t[55]=e("small",{class:"form-help"},"ID único para este bloque (opcional)",-1))]),e("div",dS,[t[56]||(t[56]=e("label",{for:"block-class"},"Clases CSS",-1)),g(e("input",{type:"text",id:"block-class","onUpdate:modelValue":t[16]||(t[16]=a=>r.value.customClass=a),class:"form-input",placeholder:"mi-clase otra-clase"},null,512),[[I,r.value.customClass]]),t[57]||(t[57]=e("small",{class:"form-help"},"Clases CSS separadas por espacios (opcional)",-1))]),e("div",uS,[t[58]||(t[58]=e("label",{for:"custom-css"},"CSS Personalizado",-1)),g(e("textarea",{id:"custom-css","onUpdate:modelValue":t[17]||(t[17]=a=>r.value.customCSS=a),rows:"12",class:"form-input css-editor",placeholder:`/* CSS personalizado para este bloque de servicios */
.mis-servicios .service-tab {
  background: linear-gradient(45deg, #007bff, #17a2b8);
  color: white;
  border-radius: 8px;
}

.mis-servicios .service-icon {
  filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
}

.mis-servicios .service-content {
  animation: fadeIn 0.3s ease-in-out;
}`},null,512),[[I,r.value.customCSS]]),t[59]||(t[59]=e("small",{class:"form-help"},"Este CSS se aplicará únicamente a este bloque de servicios",-1))])])])],512),[[ge,i.value==="attributes"]])])]),e("div",cS,[e("button",{onClick:t[18]||(t[18]=a=>o.$emit("close")),class:"btn-secondary"},[_(N,{name:"close"}),t[61]||(t[61]=B(" Cancelar ",-1))]),e("button",{onClick:V,class:"btn-primary"},[_(N,{name:"check"}),t[62]||(t[62]=B(" Aplicar Cambios ",-1))])])]),_(Ue,{show:w.value,"type-filter":"image",multiple:!0,"selected-media":[],onClose:t[20]||(t[20]=a=>w.value=!1),onSelect:M},null,8,["show"])]))}}),vS=re(pS,[["__scopeId","data-v-15039f57"]]),mS={class:"modal-header"},gS={class:"modal-body"},fS={class:"editor-layout"},bS={class:"editor-sidebar"},yS={class:"form-section"},kS={class:"form-section"},$S={class:"form-section"},hS={class:"range-value"},CS={class:"form-section"},_S={class:"range-value"},wS={class:"form-section"},SS={class:"form-section"},xS={class:"color-input-group"},ES={class:"editor-preview"},IS={class:"preview-content"},US=ve({__name:"MapBlockEditor",props:{block:{}},emits:["update","update-real-time","close"],setup(p,{emit:u}){const c=p,b=u,i=D({...c.block}),w=()=>{b("update-real-time",{...i.value})},s=()=>{b("update",{...i.value})},r=()=>{b("close")},$=M=>{M.target===M.currentTarget&&r()},m=()=>{i.value.backgroundColor="",w()};return(M,C)=>(l(),n("div",{class:"modal-overlay",onClick:$},[e("div",{class:"modal-content modal-large",onClick:C[7]||(C[7]=ce(()=>{},["stop"]))},[e("div",mS,[C[8]||(C[8]=e("h4",null,"Editor de Mapa de Google",-1)),e("button",{onClick:r,class:"btn-close"},[_(N,{name:"close"})])]),e("div",gS,[e("div",fS,[e("div",bS,[e("div",yS,[C[9]||(C[9]=e("label",null,"Título (opcional)",-1)),g(e("input",{"onUpdate:modelValue":C[0]||(C[0]=S=>i.value.title=S),type:"text",placeholder:"Título del mapa",onInput:w},null,544),[[I,i.value.title]])]),e("div",kS,[C[10]||(C[10]=e("label",null,"Dirección o lugar",-1)),g(e("textarea",{"onUpdate:modelValue":C[1]||(C[1]=S=>i.value.address=S),placeholder:"Ejemplo: Torre Colpatria, Bogotá, Colombia",rows:"3",onInput:w},null,544),[[I,i.value.address]]),C[11]||(C[11]=e("small",{class:"help-text"}," Ingresa el nombre de un lugar, dirección completa o punto de interés ",-1))]),e("div",$S,[C[12]||(C[12]=e("label",null,"Zoom (1-20)",-1)),g(e("input",{"onUpdate:modelValue":C[2]||(C[2]=S=>i.value.zoom=S),type:"range",min:"1",max:"20",onInput:w},null,544),[[I,i.value.zoom,void 0,{number:!0}]]),e("span",hS,f(i.value.zoom),1)]),e("div",CS,[C[13]||(C[13]=e("label",null,"Altura del mapa",-1)),g(e("input",{"onUpdate:modelValue":C[3]||(C[3]=S=>i.value.height=S),type:"range",min:"200",max:"800",step:"50",onInput:w},null,544),[[I,i.value.height,void 0,{number:!0}]]),e("span",_S,f(i.value.height)+"px",1)]),e("div",wS,[C[15]||(C[15]=e("label",null,"Espaciado",-1)),g(e("select",{"onUpdate:modelValue":C[4]||(C[4]=S=>i.value.padding=S),onChange:w},C[14]||(C[14]=[e("option",{value:"none"},"Sin espaciado",-1),e("option",{value:"small"},"Pequeño",-1),e("option",{value:"medium"},"Mediano",-1),e("option",{value:"large"},"Grande",-1)]),544),[[ie,i.value.padding]])]),e("div",SS,[C[16]||(C[16]=e("label",null,"Color de fondo",-1)),e("div",xS,[g(e("input",{"onUpdate:modelValue":C[5]||(C[5]=S=>i.value.backgroundColor=S),type:"color",onInput:w},null,544),[[I,i.value.backgroundColor]]),g(e("input",{"onUpdate:modelValue":C[6]||(C[6]=S=>i.value.backgroundColor=S),type:"text",placeholder:"#ffffff",onInput:w},null,544),[[I,i.value.backgroundColor]]),e("button",{onClick:m,class:"btn-clear"},[_(N,{name:"delete"})])])])]),e("div",ES,[C[17]||(C[17]=e("div",{class:"preview-header"},[e("h5",null,"Vista previa"),e("span",{class:"preview-info"},"Los cambios se actualizan automáticamente")],-1)),e("div",IS,[_(Oo,{block:i.value,"is-editing":!1},null,8,["block"])])])])]),e("div",{class:"modal-footer"},[e("button",{onClick:r,class:"btn-secondary"},"Cancelar"),e("button",{onClick:s,class:"btn-primary"},"Guardar Mapa")])])]))}}),VS=re(US,[["__scopeId","data-v-adbeb44b"]]),MS={class:"modal-header"},TS={class:"modal-body"},PS={class:"editor-layout"},BS={class:"editor-sidebar"},AS={class:"tabs"},LS=["onClick"],DS={class:"tab-content"},RS={class:"form-section"},FS={class:"form-section"},zS={class:"form-section"},GS={class:"checkbox-label"},NS={key:0,class:"form-section"},qS={key:1,class:"form-section"},HS={class:"tab-content"},OS={class:"form-section"},jS={class:"form-section"},WS={class:"form-section"},ZS={class:"form-section"},XS={class:"form-section"},KS={class:"form-section"},JS={class:"form-section"},QS={class:"form-section"},YS={class:"tab-content"},e6={class:"form-section"},o6={class:"options-list"},t6=["onUpdate:modelValue"],s6=["onClick"],l6={class:"form-section"},a6={class:"options-list"},n6=["onUpdate:modelValue"],i6=["onClick"],r6={class:"tab-content"},d6={class:"form-section"},u6={class:"checkbox-label"},c6={key:0,class:"form-section"},p6={key:1,class:"form-section"},v6={class:"value-items-list"},m6={class:"checkbox-label"},g6=["onUpdate:modelValue"],f6=["onUpdate:modelValue"],b6=["onUpdate:modelValue"],y6=["onClick"],k6={key:2,class:"form-section"},$6={key:3,class:"form-section"},h6={class:"tab-content"},C6={class:"form-section"},_6={class:"checkbox-label"},w6={key:0,class:"form-section"},S6={class:"urgency-items-list"},x6={class:"checkbox-label"},E6=["onUpdate:modelValue"],I6={class:"checkbox-label"},U6=["onUpdate:modelValue"],V6=["onUpdate:modelValue"],M6=["onClick"],T6={key:1,class:"form-section"},P6={key:2,class:"form-row"},B6={class:"form-section"},A6={class:"form-section"},L6=["max"],D6={class:"tab-content"},R6={class:"form-section"},F6={class:"checkbox-label"},z6={key:0,class:"form-section"},G6={class:"trust-items-list"},N6={class:"checkbox-label"},q6=["onUpdate:modelValue"],H6=["onUpdate:modelValue"],O6=["onUpdate:modelValue"],j6=["onClick"],W6={class:"tab-content"},Z6={class:"form-section"},X6={class:"checkbox-label"},K6={key:0,class:"color-customization"},J6={class:"form-section"},Q6={class:"color-input-group"},Y6={class:"form-section"},ex={class:"color-input-group"},ox={class:"form-section"},tx={class:"color-input-group"},sx={class:"form-section"},lx={class:"color-input-group"},ax={class:"form-section"},nx={class:"color-input-group"},ix={class:"form-section"},rx={class:"form-section"},dx={class:"color-input-group"},ux={class:"editor-preview"},cx={class:"preview-content"},px=ve({__name:"LeadConverterBlockEditor",props:{block:{}},emits:["update","update-real-time","close"],setup(p,{emit:u}){const c=p,b=u,i=D({...c.block}),w=D("content"),s=[{id:"content",label:"Contenido"},{id:"form",label:"Formulario"},{id:"dropdowns",label:"Opciones"},{id:"valuestack",label:"Value Stack"},{id:"urgency",label:"Urgencia"},{id:"trust",label:"Confianza"},{id:"colors",label:"Colores"}],r=()=>{b("update-real-time",{...i.value})},$=()=>{b("update",{...i.value})},m=()=>{b("close")},M=z=>{z.target===z.currentTarget&&m()},C=()=>{i.value.backgroundColor="",r()},S=()=>{i.value.situationOptions.push("Nueva opción"),r()},U=z=>{i.value.situationOptions.splice(z,1),r()},T=()=>{i.value.urgencyOptions.push("Nueva opción"),r()},V=z=>{i.value.urgencyOptions.splice(z,1),r()},o=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),t=()=>{const z={id:o(),text:"Nuevo beneficio",value:"$100K",enabled:!0};i.value.valueStackItems||(i.value.valueStackItems=[]),i.value.valueStackItems.push(z),r()},a=z=>{i.value.valueStackItems&&i.value.valueStackItems.splice(z,1),r()},L=()=>{const z={id:o(),text:"Nuevo elemento de urgencia",enabled:!0,animated:!1};i.value.urgencyItems||(i.value.urgencyItems=[]),i.value.urgencyItems.push(z),r()},E=z=>{i.value.urgencyItems&&i.value.urgencyItems.splice(z,1),r()},d=()=>{const z={id:o(),text:"Nuevo elemento de confianza",icon:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"/></svg>',enabled:!0};i.value.trustItems||(i.value.trustItems=[]),i.value.trustItems.push(z),r()},v=z=>{i.value.trustItems&&i.value.trustItems.splice(z,1),r()};return(z,k)=>(l(),n("div",{class:"modal-overlay",onClick:M},[e("div",{class:"modal-content modal-extra-large",onClick:k[36]||(k[36]=ce(()=>{},["stop"]))},[e("div",MS,[k[37]||(k[37]=e("h4",null,"Editor de Conversor de Leads",-1)),e("button",{onClick:m,class:"btn-close"},[_(N,{name:"close"})])]),e("div",TS,[e("div",PS,[e("div",BS,[e("div",AS,[(l(),n(te,null,le(s,x=>e("button",{key:x.id,onClick:oe=>w.value=x.id,class:O(["tab-button",{active:w.value===x.id}])},f(x.label),11,LS)),64))]),g(e("div",DS,[e("div",RS,[k[38]||(k[38]=e("label",null,"Headline Principal",-1)),g(e("textarea",{"onUpdate:modelValue":k[0]||(k[0]=x=>i.value.headline=x),rows:"3",onInput:r},null,544),[[I,i.value.headline]])]),e("div",FS,[k[39]||(k[39]=e("label",null,"Subheadline",-1)),g(e("textarea",{"onUpdate:modelValue":k[1]||(k[1]=x=>i.value.subheadline=x),rows:"3",onInput:r},null,544),[[I,i.value.subheadline]])]),e("div",zS,[e("label",GS,[g(e("input",{type:"checkbox","onUpdate:modelValue":k[2]||(k[2]=x=>i.value.showCountdown=x),onChange:r},null,544),[[ke,i.value.showCountdown]]),k[40]||(k[40]=B(" Mostrar contador regresivo ",-1))])]),i.value.showCountdown?(l(),n("div",NS,[k[41]||(k[41]=e("label",null,"Texto del countdown",-1)),g(e("input",{"onUpdate:modelValue":k[3]||(k[3]=x=>i.value.countdownLabel=x),type:"text",onInput:r},null,544),[[I,i.value.countdownLabel]])])):R("",!0),i.value.showCountdown?(l(),n("div",qS,[k[42]||(k[42]=e("label",null,"Duración en horas",-1)),g(e("input",{"onUpdate:modelValue":k[4]||(k[4]=x=>i.value.countdownHours=x),type:"number",min:"1",max:"168",onInput:r},null,544),[[I,i.value.countdownHours,void 0,{number:!0}]])])):R("",!0)],512),[[ge,w.value==="content"]]),g(e("div",HS,[e("div",OS,[k[43]||(k[43]=e("label",null,"URL de destino (webhook)",-1)),g(e("input",{"onUpdate:modelValue":k[5]||(k[5]=x=>i.value.formAction=x),type:"url",placeholder:"https://tu-webhook.com/lead",onInput:r},null,544),[[I,i.value.formAction]])]),e("div",jS,[k[45]||(k[45]=e("label",null,"Método HTTP",-1)),g(e("select",{"onUpdate:modelValue":k[6]||(k[6]=x=>i.value.formMethod=x),onChange:r},k[44]||(k[44]=[e("option",{value:"POST"},"POST",-1),e("option",{value:"GET"},"GET",-1)]),544),[[ie,i.value.formMethod]])]),e("div",WS,[k[46]||(k[46]=e("label",null,"Label Nombre",-1)),g(e("input",{"onUpdate:modelValue":k[7]||(k[7]=x=>i.value.nameLabel=x),type:"text",onInput:r},null,544),[[I,i.value.nameLabel]])]),e("div",ZS,[k[47]||(k[47]=e("label",null,"Label WhatsApp",-1)),g(e("input",{"onUpdate:modelValue":k[8]||(k[8]=x=>i.value.phoneLabel=x),type:"text",onInput:r},null,544),[[I,i.value.phoneLabel]])]),e("div",XS,[k[48]||(k[48]=e("label",null,"Label Email",-1)),g(e("input",{"onUpdate:modelValue":k[9]||(k[9]=x=>i.value.emailLabel=x),type:"text",onInput:r},null,544),[[I,i.value.emailLabel]])]),e("div",KS,[k[49]||(k[49]=e("label",null,"Label Situación",-1)),g(e("input",{"onUpdate:modelValue":k[10]||(k[10]=x=>i.value.situationLabel=x),type:"text",onInput:r},null,544),[[I,i.value.situationLabel]])]),e("div",JS,[k[50]||(k[50]=e("label",null,"Label Urgencia",-1)),g(e("input",{"onUpdate:modelValue":k[11]||(k[11]=x=>i.value.urgencyLabel=x),type:"text",onInput:r},null,544),[[I,i.value.urgencyLabel]])]),e("div",QS,[k[51]||(k[51]=e("label",null,"Texto del botón CTA",-1)),g(e("input",{"onUpdate:modelValue":k[12]||(k[12]=x=>i.value.ctaButtonText=x),type:"text",onInput:r},null,544),[[I,i.value.ctaButtonText]])])],512),[[ge,w.value==="form"]]),g(e("div",YS,[e("div",e6,[k[52]||(k[52]=e("label",null,"Opciones de Situación",-1)),e("div",o6,[(l(!0),n(te,null,le(i.value.situationOptions,(x,oe)=>(l(),n("div",{key:oe,class:"option-item"},[g(e("input",{"onUpdate:modelValue":X=>i.value.situationOptions[oe]=X,type:"text",onInput:r},null,40,t6),[[I,i.value.situationOptions[oe]]]),e("button",{onClick:X=>U(oe),class:"btn-remove"},[_(N,{name:"delete"})],8,s6)]))),128))]),e("button",{onClick:S,class:"btn-add"}," Agregar opción ")]),e("div",l6,[k[53]||(k[53]=e("label",null,"Opciones de Urgencia",-1)),e("div",a6,[(l(!0),n(te,null,le(i.value.urgencyOptions,(x,oe)=>(l(),n("div",{key:oe,class:"option-item"},[g(e("input",{"onUpdate:modelValue":X=>i.value.urgencyOptions[oe]=X,type:"text",onInput:r},null,40,n6),[[I,i.value.urgencyOptions[oe]]]),e("button",{onClick:X=>V(oe),class:"btn-remove"},[_(N,{name:"delete"})],8,i6)]))),128))]),e("button",{onClick:T,class:"btn-add"}," Agregar opción ")])],512),[[ge,w.value==="dropdowns"]]),g(e("div",r6,[e("div",d6,[e("label",u6,[g(e("input",{type:"checkbox","onUpdate:modelValue":k[13]||(k[13]=x=>i.value.showValueStack=x),onChange:r},null,544),[[ke,i.value.showValueStack]]),k[54]||(k[54]=B(" Mostrar value stack ",-1))])]),i.value.showValueStack?(l(),n("div",c6,[k[55]||(k[55]=e("label",null,"Título del value stack",-1)),g(e("input",{"onUpdate:modelValue":k[14]||(k[14]=x=>i.value.valueStackTitle=x),type:"text",onInput:r},null,544),[[I,i.value.valueStackTitle]])])):R("",!0),i.value.showValueStack?(l(),n("div",p6,[k[57]||(k[57]=e("label",null,"Items del value stack",-1)),e("div",v6,[(l(!0),n(te,null,le(i.value.valueStackItems||[],(x,oe)=>(l(),n("div",{key:x.id,class:"value-item-editor"},[e("label",m6,[g(e("input",{type:"checkbox","onUpdate:modelValue":X=>x.enabled=X,onChange:r},null,40,g6),[[ke,x.enabled]]),k[56]||(k[56]=B(" Activo ",-1))]),g(e("input",{"onUpdate:modelValue":X=>x.text=X,type:"text",placeholder:"Texto del beneficio",onInput:r},null,40,f6),[[I,x.text]]),g(e("input",{"onUpdate:modelValue":X=>x.value=X,type:"text",placeholder:"$300K",onInput:r},null,40,b6),[[I,x.value]]),e("button",{onClick:X=>a(oe),class:"btn-remove"},[_(N,{name:"delete"})],8,y6)]))),128))]),e("button",{onClick:t,class:"btn-add"}," Agregar item ")])):R("",!0),i.value.showValueStack?(l(),n("div",k6,[k[58]||(k[58]=e("label",null,"Valor total",-1)),g(e("input",{"onUpdate:modelValue":k[15]||(k[15]=x=>i.value.totalValue=x),type:"text",placeholder:"$1,300K",onInput:r},null,544),[[I,i.value.totalValue]])])):R("",!0),i.value.showValueStack?(l(),n("div",$6,[k[59]||(k[59]=e("label",null,"Precio de hoy",-1)),g(e("input",{"onUpdate:modelValue":k[16]||(k[16]=x=>i.value.todayPrice=x),type:"text",placeholder:"COMPLETAMENTE GRATIS",onInput:r},null,544),[[I,i.value.todayPrice]])])):R("",!0)],512),[[ge,w.value==="valuestack"]]),g(e("div",h6,[e("div",C6,[e("label",_6,[g(e("input",{type:"checkbox","onUpdate:modelValue":k[17]||(k[17]=x=>i.value.showUrgencyElements=x),onChange:r},null,544),[[ke,i.value.showUrgencyElements]]),k[60]||(k[60]=B(" Mostrar elementos de urgencia ",-1))])]),i.value.showUrgencyElements?(l(),n("div",w6,[k[63]||(k[63]=e("label",null,"Elementos de urgencia",-1)),e("div",S6,[(l(!0),n(te,null,le(i.value.urgencyItems||[],(x,oe)=>(l(),n("div",{key:x.id,class:"urgency-item-editor"},[e("label",x6,[g(e("input",{type:"checkbox","onUpdate:modelValue":X=>x.enabled=X,onChange:r},null,40,E6),[[ke,x.enabled]]),k[61]||(k[61]=B(" Activo ",-1))]),e("label",I6,[g(e("input",{type:"checkbox","onUpdate:modelValue":X=>x.animated=X,onChange:r},null,40,U6),[[ke,x.animated]]),k[62]||(k[62]=B(" Animado ",-1))]),g(e("input",{"onUpdate:modelValue":X=>x.text=X,type:"text",onInput:r},null,40,V6),[[I,x.text]]),e("button",{onClick:X=>E(oe),class:"btn-remove"},[_(N,{name:"delete"})],8,M6)]))),128))]),e("button",{onClick:L,class:"btn-add"}," Agregar elemento ")])):R("",!0),i.value.showUrgencyElements?(l(),n("div",T6,[k[64]||(k[64]=e("label",null,"Texto de la barra de progreso",-1)),g(e("input",{"onUpdate:modelValue":k[18]||(k[18]=x=>i.value.progressBarText=x),type:"text",onInput:r},null,544),[[I,i.value.progressBarText]])])):R("",!0),i.value.showUrgencyElements?(l(),n("div",P6,[e("div",B6,[k[65]||(k[65]=e("label",null,"Total espacios",-1)),g(e("input",{"onUpdate:modelValue":k[19]||(k[19]=x=>i.value.progressBarTotal=x),type:"number",min:"1",onInput:r},null,544),[[I,i.value.progressBarTotal,void 0,{number:!0}]])]),e("div",A6,[k[66]||(k[66]=e("label",null,"Espacios ocupados",-1)),g(e("input",{"onUpdate:modelValue":k[20]||(k[20]=x=>i.value.progressBarCurrent=x),type:"number",min:"0",max:i.value.progressBarTotal,onInput:r},null,40,L6),[[I,i.value.progressBarCurrent,void 0,{number:!0}]])])])):R("",!0)],512),[[ge,w.value==="urgency"]]),g(e("div",D6,[e("div",R6,[e("label",F6,[g(e("input",{type:"checkbox","onUpdate:modelValue":k[21]||(k[21]=x=>i.value.showTrustElements=x),onChange:r},null,544),[[ke,i.value.showTrustElements]]),k[67]||(k[67]=B(" Mostrar elementos de confianza ",-1))])]),i.value.showTrustElements?(l(),n("div",z6,[k[69]||(k[69]=e("label",null,"Elementos de confianza",-1)),e("div",G6,[(l(!0),n(te,null,le(i.value.trustItems||[],(x,oe)=>(l(),n("div",{key:x.id,class:"trust-item-editor"},[e("label",N6,[g(e("input",{type:"checkbox","onUpdate:modelValue":X=>x.enabled=X,onChange:r},null,40,q6),[[ke,x.enabled]]),k[68]||(k[68]=B(" Activo ",-1))]),g(e("textarea",{"onUpdate:modelValue":X=>x.icon=X,placeholder:"<svg>...</svg> o emoji",class:"icon-input",rows:"2",onInput:r},null,40,H6),[[I,x.icon]]),g(e("input",{"onUpdate:modelValue":X=>x.text=X,type:"text",placeholder:"Texto del elemento",onInput:r},null,40,O6),[[I,x.text]]),e("button",{onClick:X=>v(oe),class:"btn-remove"},[_(N,{name:"delete"})],8,j6)]))),128))]),e("button",{onClick:d,class:"btn-add"}," Agregar elemento ")])):R("",!0)],512),[[ge,w.value==="trust"]]),g(e("div",W6,[e("div",Z6,[e("label",X6,[g(e("input",{type:"checkbox","onUpdate:modelValue":k[22]||(k[22]=x=>i.value.useCustomColors=x),onChange:r},null,544),[[ke,i.value.useCustomColors]]),k[70]||(k[70]=B(" Usar colores personalizados ",-1))])]),i.value.useCustomColors?(l(),n("div",K6,[e("div",J6,[k[71]||(k[71]=e("label",null,"Verde principal",-1)),e("div",Q6,[g(e("input",{"onUpdate:modelValue":k[23]||(k[23]=x=>i.value.primaryGreen=x),type:"color",onInput:r},null,544),[[I,i.value.primaryGreen]]),g(e("input",{"onUpdate:modelValue":k[24]||(k[24]=x=>i.value.primaryGreen=x),type:"text",onInput:r},null,544),[[I,i.value.primaryGreen]])])]),e("div",Y6,[k[72]||(k[72]=e("label",null,"Dorado principal",-1)),e("div",ex,[g(e("input",{"onUpdate:modelValue":k[25]||(k[25]=x=>i.value.primaryGold=x),type:"color",onInput:r},null,544),[[I,i.value.primaryGold]]),g(e("input",{"onUpdate:modelValue":k[26]||(k[26]=x=>i.value.primaryGold=x),type:"text",onInput:r},null,544),[[I,i.value.primaryGold]])])]),e("div",ox,[k[73]||(k[73]=e("label",null,"Beige",-1)),e("div",tx,[g(e("input",{"onUpdate:modelValue":k[27]||(k[27]=x=>i.value.beige=x),type:"color",onInput:r},null,544),[[I,i.value.beige]]),g(e("input",{"onUpdate:modelValue":k[28]||(k[28]=x=>i.value.beige=x),type:"text",onInput:r},null,544),[[I,i.value.beige]])])]),e("div",sx,[k[74]||(k[74]=e("label",null,"Terracota",-1)),e("div",lx,[g(e("input",{"onUpdate:modelValue":k[29]||(k[29]=x=>i.value.terracotta=x),type:"color",onInput:r},null,544),[[I,i.value.terracotta]]),g(e("input",{"onUpdate:modelValue":k[30]||(k[30]=x=>i.value.terracotta=x),type:"text",onInput:r},null,544),[[I,i.value.terracotta]])])]),e("div",ax,[k[75]||(k[75]=e("label",null,"Blanco",-1)),e("div",nx,[g(e("input",{"onUpdate:modelValue":k[31]||(k[31]=x=>i.value.white=x),type:"color",onInput:r},null,544),[[I,i.value.white]]),g(e("input",{"onUpdate:modelValue":k[32]||(k[32]=x=>i.value.white=x),type:"text",onInput:r},null,544),[[I,i.value.white]])])])])):R("",!0),e("div",ix,[k[77]||(k[77]=e("label",null,"Espaciado",-1)),g(e("select",{"onUpdate:modelValue":k[33]||(k[33]=x=>i.value.padding=x),onChange:r},k[76]||(k[76]=[e("option",{value:"none"},"Sin espaciado",-1),e("option",{value:"small"},"Pequeño",-1),e("option",{value:"medium"},"Mediano",-1),e("option",{value:"large"},"Grande",-1)]),544),[[ie,i.value.padding]])]),e("div",rx,[k[78]||(k[78]=e("label",null,"Color de fondo del bloque",-1)),e("div",dx,[g(e("input",{"onUpdate:modelValue":k[34]||(k[34]=x=>i.value.backgroundColor=x),type:"color",onInput:r},null,544),[[I,i.value.backgroundColor]]),g(e("input",{"onUpdate:modelValue":k[35]||(k[35]=x=>i.value.backgroundColor=x),type:"text",placeholder:"#ffffff",onInput:r},null,544),[[I,i.value.backgroundColor]]),e("button",{onClick:C,class:"btn-clear"},[_(N,{name:"delete"})])])])],512),[[ge,w.value==="colors"]])]),e("div",ux,[k[79]||(k[79]=e("div",{class:"preview-header"},[e("h5",null,"Vista previa"),e("span",{class:"preview-info"},"Los cambios se actualizan en tiempo real")],-1)),e("div",cx,[_(jo,{block:i.value,"is-editing":!0},null,8,["block"])])])])]),e("div",{class:"modal-footer"},[e("button",{onClick:m,class:"btn-secondary"},"Cancelar"),e("button",{onClick:$,class:"btn-primary"},"Guardar Conversor")])])]))}}),vx=re(px,[["__scopeId","data-v-2954a8c0"]]);function mx(){const p=[{type:"banner-integra",name:"Banner R-Integra",icon:"fas fa-chart-line",description:"Banner especializado para servicios financieros y contables",defaultProps:{type:"banner-integra",title:"Organización financiera con visión estratégica",description:"Acompañamos a empresarios, emprendedores y profesionales a cumplir con sus obligaciones contables y tributarias, estructurando procesos claros, sostenibles y alineados con sus objetivos de crecimiento.",buttonText:"Agenda aquí tu cita",buttonLink:"#contacto",backgroundGradient:{colorStart:"#052b1b",colorEnd:"#0c6a44"},backgroundImage:"",backgroundImageOpacity:30,personImage:"",titleColor:"#ffffff",descriptionColor:"#ffffff"}},{type:"text",name:"Bloque de Texto",icon:"fas fa-align-left",description:"Bloque de contenido de texto con columnas y formato enriquecido",defaultProps:{type:"text",columnsCount:1,columns:[{id:"temp-id",backgroundColor:"",textColor:"",texts:[{id:"temp-id",content:"<h2>Título del Contenido</h2>"},{id:"temp-id",content:'<p>Este es un párrafo de contenido que puede incluir <strong>texto en negrita</strong>, <em>cursiva</em> y <a href="#">enlaces</a>.</p>'}]}],gap:"medium",padding:"medium",backgroundColor:""}},{type:"spacer",name:"Espaciador",icon:"fas fa-arrows-alt-v",description:"Espacio en blanco para separar secciones",defaultProps:{type:"spacer",height:60}},{type:"cualidades",name:"Cualidades",icon:"fas fa-star",description:"Bloque de cualidades con imágenes y texto en columnas",defaultProps:{type:"cualidades",title:"Un enfoque claro, confiable y estructurado",backgroundGradient:{colorStart:"#0c6a44",colorEnd:"#052b1b"},items:[{image:"",text:"Diagnóstico financiero y contable inicial"},{image:"",text:"Asesoría personalizada"},{image:"",text:"Implementación de procesos"},{image:"",text:"Seguimiento continuo"}]}},{type:"textoy-video",name:"Texto y Video",icon:"fas fa-play-circle",description:"Sección de dos columnas con texto y video en formato 4:5",defaultProps:{type:"textoy-video",title:"Solidez contable, proyección empresarial",titleColor:"#2c3e50",description:"<p>En R-INTEGRA ayudamos a nuestros clientes a organizar sus finanzas, cumplir sus obligaciones y tomar decisiones estratégicas con información clara y confiable.</p><p>Unimos conocimiento técnico, planeación fiscal y visión de negocio para construir estructuras financieras sólidas, alineadas con los objetivos de crecimiento de cada empresa o profesional.</p>",descriptionColor:"#666666",buttonText:"Conoce más sobre nosotros",buttonLink:"#about",buttonColor:"#007bff",buttonTextColor:"#ffffff",videoType:"youtube",videoUrl:"",backgroundColor:"#ffffff"}},{type:"container",name:"Contenedor",icon:"fas fa-layer-group",description:"Contenedor para agrupar otros bloques con fondo personalizable",defaultProps:{type:"container",backgroundType:"color",backgroundColor:"#ffffff",backgroundGradient:{colorStart:"#000000",colorEnd:"#ffffff",direction:"to right"},backgroundImage:"",backgroundImageOpacity:100,padding:"medium",children:[]}},{type:"image-gallery",name:"Galería de Imágenes",icon:"fas fa-images",description:"Galería de imágenes en grid con máscaras y efectos personalizables",defaultProps:{type:"image-gallery",columnsCount:3,gap:"medium",padding:"medium",backgroundColor:"",aspectRatio:"square",maskType:"none",customMask:"",borderRadius:12,hoverEffect:"zoom",alignment:"center",items:[]}},{type:"team",name:"Equipo de Trabajo",icon:"fas fa-users",description:"Bloque para mostrar miembros del equipo con fotos, información y redes sociales",defaultProps:{type:"team",columnsCount:3,gap:"medium",padding:"medium",backgroundColor:"",aspectRatio:"square",maskType:"circle",customMask:"",borderRadius:12,hoverEffect:"lift",alignment:"center",members:[]}},{type:"services",name:"Servicios",icon:"fas fa-briefcase",description:"Bloque de servicios con tabs, acordeón o tarjetas con íconos y descripciones",defaultProps:{type:"services",title:"Nuestros Servicios",subtitle:"Descubre lo que podemos hacer por ti",columnsCount:3,gap:"medium",padding:"medium",alignment:"center",backgroundColor:"",displayMode:"tabs",iconSize:"medium",services:[]}},{type:"map",name:"Mapa de Google",icon:"fas fa-map-marked-alt",description:"Mapa de Google Maps embebido sin necesidad de API key",defaultProps:{type:"map",title:"",address:"Bogotá, Colombia",zoom:12,height:400,padding:"medium",backgroundColor:""}},{type:"lead-converter",name:"Conversor de Leads",icon:"fas fa-magnet",description:"Bloque de captura de leads con formulario de diagnóstico gratuito y countdown timer",defaultProps:{type:"lead-converter",headline:"DIAGNÓSTICO FINANCIERO GRATUITO: Descubre Exactamente Cuánto Dinero Estás Perdiendo",subheadline:"Análisis personalizado de 15 minutos con nuestro especialista. Identifica pérdidas ocultas y obtén tu plan de acción específico.",countdownLabel:"OFERTA ESPECIAL TERMINA EN:",countdownHours:24,showCountdown:!0,formAction:"https://tu-webhook.com/lead",formMethod:"POST",nameLabel:"Tu nombre completo",phoneLabel:"WhatsApp (para agendar tu sesión)",emailLabel:"Email principal",situationLabel:"¿Cuál es tu situación actual?",urgencyLabel:"¿Qué tan urgente es resolverlo?",ctaButtonText:"RESERVAR MI DIAGNÓSTICO AHORA",situationOptions:["Tengo 1-2 propiedades, no sé si son rentables","Tengo 3-5 propiedades totalmente desorganizadas","Tengo 6+ propiedades, es un caos financiero","Tengo negocios + propiedades mezclado todo","Soy empresario, quiero diversificar mis ingresos","Tengo dinero ahorrado, busco mejores opciones","Heredé propiedades, no sé qué hacer con ellas"],urgencyOptions:["MUY URGENTE - Lo necesito resolver ya mismo","URGENTE - En las próximas 4-6 semanas","IMPORTANTE - En los próximos 2-3 meses","INTERESANTE - Cuando encuentre la solución correcta"],valueStackTitle:"TU DIAGNÓSTICO INCLUYE:",valueStackItems:[{id:"vs1",text:"Análisis de rentabilidad real",value:"$300K",enabled:!0},{id:"vs2",text:"Identificación de pérdidas ocultas",value:"$250K",enabled:!0},{id:"vs3",text:"Plan de acción personalizado 90 días",value:"$400K",enabled:!0},{id:"vs4",text:"Roadmap de optimización específico",value:"$200K",enabled:!0},{id:"vs5",text:"Sesión de seguimiento incluida",value:"$150K",enabled:!0}],totalValue:"$1,300K",todayPrice:"COMPLETAMENTE GRATIS",showValueStack:!0,urgencyItems:[{id:"u1",text:"Solo 12 diagnósticos disponibles esta semana",enabled:!0,animated:!0},{id:"u2",text:"+47 personas viendo esta página ahora mismo",enabled:!0,animated:!1}],progressBarText:"Espacios disponibles:",progressBarTotal:20,progressBarCurrent:8,showUrgencyElements:!0,trustItems:[{id:"t1",text:"+2,847 diagnósticos realizados",icon:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M5,16L3,5l5.5,5L12,4l3.5,6L21,5l-2,11H5zm2.7-2h8.6l0.9-5.4l-2.1,1.4l-3.1-5.3L9,10.1L6.8,8.6L8.7,14z"/></svg>',enabled:!0},{id:"t2",text:"4.9/5 estrellas de satisfacción",icon:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z"/></svg>',enabled:!0},{id:"t3",text:"Información 100% confidencial",icon:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"/></svg>',enabled:!0},{id:"t4",text:"Sesión por videollamada/WhatsApp",icon:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z"/></svg>',enabled:!0}],showTrustElements:!0,useCustomColors:!1,primaryGreen:"#0C6444",primaryGold:"#D1AE6A",beige:"#EFE3D5",terracotta:"#B86C55",white:"#FFFEF9",padding:"medium",backgroundColor:""}}],u=i=>p.find(w=>w.type===i),c=i=>{const w=u(i);if(!w)return null;const s={id:b(),order:0,customId:"",customClass:"",customCSS:"",...w.defaultProps};return i==="text"&&s.columns&&(s.columns=s.columns.map(r=>({...r,id:b(),texts:r.texts.map($=>({...$,id:b()}))})),s.columnsCount=s.columns.length,console.log("Template created for text block with columnsCount:",s.columnsCount,"columns:",s.columns.length)),i==="image-gallery"&&(s.items=s.items||[],s.items.length>0&&(s.items=s.items.map(r=>({...r,id:b()}))),console.log("Template created for image-gallery block with",s.items.length,"items")),i==="team"&&(s.members=s.members||[],s.members.length>0&&(s.members=s.members.map(r=>({...r,id:b(),socials:r.socials?.map($=>({...$}))||[]}))),console.log("Template created for team block with",s.members.length,"members")),i==="services"&&(s.services=s.services||[],s.services.length>0&&(s.services=s.services.map(r=>({...r,id:b()}))),console.log("Template created for services block with",s.services.length,"services")),i==="lead-converter"&&(s.valueStackItems=(s.valueStackItems||[]).map(r=>({...r,id:r.id||b()})),s.urgencyItems=(s.urgencyItems||[]).map(r=>({...r,id:r.id||b()})),s.trustItems=(s.trustItems||[]).map(r=>({...r,id:r.id||b()})),console.log("Template created for lead-converter block")),s},b=()=>Date.now().toString(36)+Math.random().toString(36).substr(2);return{blockTemplates:p,getTemplateByType:u,createBlockFromTemplate:c,generateId:b}}const gx={class:"block-editor"},fx={class:"editor-header"},bx={class:"header-actions"},yx={class:"blocks-preview"},kx={key:0,class:"empty-state"},$x={key:1,class:"blocks-list"},hx={class:"block-controls"},Cx={class:"move-buttons"},_x=["onClick","disabled"],wx=["onClick","disabled"],Sx={class:"block-info"},xx={class:"block-type"},Ex={class:"block-title"},Ix={class:"block-actions"},Ux=["onClick"],Vx=["onClick"],Mx=["onClick"],Tx=["onClick"],Px={class:"block-preview"},Bx={class:"modal-header"},Ax={key:0,class:"modal-info"},Lx={class:"block-templates"},Dx=["onClick"],Rx={class:"template-icon"},Fx=ve({__name:"BlockEditor",props:{modelValue:{},pageId:{},isFullPage:{type:Boolean,default:!1}},emits:["update:modelValue","save"],setup(p,{emit:u}){const c=p,b=u,{blockTemplates:i,createBlockFromTemplate:w,generateId:s}=mx(),r=D([]);xe(()=>c.modelValue,A=>{r.value=A||[]},{immediate:!0}),xe(r,A=>{b("update:modelValue",A)},{deep:!0}),D(!1);const $=D(!1),m=D(!1),M=D(null),C=D(null),S=J(()=>C.value?i.filter(A=>A.type!=="container"):i),U=A=>i.find(y=>y.type===A)?.name||"Bloque",T=A=>{for(const h of r.value){if(h.id===A)return h;if(h.type==="container"&&h.children){const y=V(h.children,A);if(y)return y}}return null},V=(A,h)=>{for(const y of A){if(y.id===h)return y;if(y.type==="container"&&y.children){const P=V(y.children,h);if(P)return P}}return null},o=A=>{switch(A.type){case"hero":return A.title||"Hero sin título";case"text":const h=A;if(h.columns&&h.columns.length>0){const Ce=h.columns[0];if(Ce.texts&&Ce.texts.length>0){const Fe=Ce.texts[0].content?.replace(/<[^>]*>/g,"")||"";return Fe.substring(0,30)+(Fe.length>30?"...":"")}}return"Bloque de texto vacío";case"image":return A.alt||"Imagen";case"cta":return A.title||"Call to Action";case"columns":return`${A.columnsCount||0} columnas`;case"spacer":return`Espaciador ${A.height}px`;case"banner-integra":return A.title||"Banner R-Integra";case"cualidades":return A.title||"Cualidades";case"textoy-video":return A.title||"Texto y Video";case"container":return`Contenedor (${A.children?.length||0} bloques)`;case"team":return`Equipo (${A.members?.length||0} miembros)`;case"image-gallery":return`Galería (${A.items?.length||0} imágenes)`;case"services":return`Servicios (${A.services?.length||0} servicios)`;case"map":const be=A;return be.title||be.address||"Mapa de Google";case"lead-converter":const me=A;return me.headline?me.headline.substring(0,50)+"...":"Conversor de Leads";default:return"Bloque personalizado"}},t=A=>{const h=w(A);if(h){if(C.value){const y=T(C.value);y&&y.type==="container"&&(y.children||(y.children=[]),h.order=y.children.length,y.children.push(h),console.log("Block added to container:",C.value,h)),C.value=null}else h.order=r.value.length,r.value.push(h);$.value=!1,C.value=null}},a=A=>{console.log("BlockEditor - editBlock:",A),M.value={...A},m.value=!0},L=A=>{const h=r.value.findIndex(P=>P.id===A.id);if(h!==-1){r.value[h]=A,X();return}const y=(P,H)=>{for(let Z=0;Z<P.length;Z++){const ue=P[Z];if(ue.type==="container"&&ue.children){const be=ue.children,me=be.findIndex(Ce=>Ce.id===H.id);if(me!==-1)return be[me]=H,console.log("✅ Bloque anidado actualizado:",H.id,H),!0;if(y(be,H))return!0}}return!1};y(r.value,A)?console.log("✅ Bloque anidado actualizado exitosamente"):console.warn("❌ No se pudo encontrar el bloque para actualizar:",A.id),X()},E=A=>{const h=r.value.findIndex(P=>P.id===A.id);if(h!==-1){r.value[h]=A,M.value&&M.value.id===A.id&&(M.value=A);return}const y=(P,H)=>{for(let Z=0;Z<P.length;Z++){const ue=P[Z];if(ue.type==="container"&&ue.children){const be=ue.children,me=be.findIndex(Ce=>Ce.id===H.id);if(me!==-1)return be[me]=H,!0;if(y(be,H))return!0}}return!1};y(r.value,A),M.value&&M.value.id===A.id&&(M.value=A)},d=A=>{const h={...A,id:s(),order:r.value.length};r.value.push(h)},v=A=>{confirm("¿Estás seguro de eliminar este bloque?")&&(r.value.splice(A,1),z())},z=()=>{r.value.forEach((A,h)=>{A.order=h})},k=A=>{if(A>0){const h=r.value[A];r.value[A]=r.value[A-1],r.value[A-1]=h,z()}},x=A=>{if(A<r.value.length-1){const h=r.value[A];r.value[A]=r.value[A+1],r.value[A+1]=h,z()}},oe=()=>{$.value=!1,C.value=null},X=()=>{m.value=!1,M.value=null},K={"banner-integra":$e(bC),cualidades:$e(p3),"textoy-video":$e(a4),text:$e(t5),container:$e(q5),"image-gallery":$e(Z_),team:$e(n8),services:$e(vS),map:$e(VS),"lead-converter":$e(vx)},Q=A=>A&&K[A]||null,W=A=>{console.log("BlockEditor - handleAddNestedBlock to container:",A),C.value=A,$.value=!0},ee=A=>{A.children&&A.children.forEach((h,y)=>{h.order=y})},pe=A=>{console.log("BlockEditor - handleDuplicateNestedBlock:",A);const h=q(A.id);if(h&&h.children){const y={...A,id:s(),order:h.children.length};h.children.push(y),console.log("Block duplicated successfully")}else console.log("Parent container not found for block:",A.id)},j=A=>{if(console.log("BlockEditor - handleDeleteNestedBlock:",A),confirm("¿Estás seguro de eliminar este bloque?")){const h=q(A.id);if(h&&h.children){const y=h.children.findIndex(P=>P.id===A.id);y!==-1&&(h.children.splice(y,1),ee(h),console.log("Block deleted successfully"))}else console.log("Parent container not found for block:",A.id)}},q=A=>{for(const h of r.value)if(h.type==="container"&&h.children){if(h.children.find(H=>H.id===A))return h;const P=Y(h.children,A);if(P)return P}return null},Y=(A,h)=>{for(const y of A)if(y.type==="container"&&y.children){if(y.children.find(Z=>Z.id===h))return y;const H=Y(y.children,h);if(H)return H}return null};return(A,h)=>{const y=Ie("Icon");return l(),n("div",gx,[e("div",fx,[h[4]||(h[4]=e("h3",null,"Editor de Bloques",-1)),e("div",bx,[e("button",{onClick:h[0]||(h[0]=P=>$.value=!0),class:"btn-primary"},[_(y,{name:"plus"}),h[3]||(h[3]=B(" Agregar Bloque ",-1))])])]),e("div",yx,[r.value.length===0?(l(),n("div",kx,[_(y,{name:"cube"}),h[6]||(h[6]=e("h4",null,"No hay bloques",-1)),h[7]||(h[7]=e("p",null,"Comienza agregando tu primer bloque de contenido",-1)),e("button",{onClick:h[1]||(h[1]=P=>$.value=!0),class:"btn-primary"},[_(y,{name:"plus"}),h[5]||(h[5]=B(" Agregar Primer Bloque ",-1))])])):(l(),n("div",$x,[(l(!0),n(te,null,le(r.value,(P,H)=>(l(),n("div",{key:P.id,class:O(["block-item",{active:M.value?.id===P.id}])},[e("div",hx,[e("div",Cx,[e("button",{onClick:Z=>k(H),disabled:H===0,class:"btn-move",title:"Mover arriba"},[_(y,{name:"chevron-up"})],8,_x),e("button",{onClick:Z=>x(H),disabled:H===r.value.length-1,class:"btn-move",title:"Mover abajo"},[_(y,{name:"chevron-down"})],8,wx)]),e("div",Sx,[e("span",xx,f(U(P.type)),1),e("span",Ex,f(o(P)),1)]),e("div",Ix,[P.type==="container"?(l(),n("button",{key:0,onClick:Z=>W(P.id),class:"btn-add-nested",title:"Agregar bloque al contenedor"},[_(y,{name:"plus"})],8,Ux)):R("",!0),e("button",{onClick:Z=>a(P),class:"btn-edit"},[_(y,{name:"edit"})],8,Vx),e("button",{onClick:Z=>d(P),class:"btn-duplicate"},[_(y,{name:"copy"})],8,Mx),e("button",{onClick:Z=>v(H),class:"btn-delete"},[_(y,{name:"delete"})],8,Tx)])]),e("div",Px,[_(oo,{block:P,"is-editing":!0,onAddBlock:W,onEditChild:a,onDuplicateChild:pe,onDeleteChild:j},null,8,["block"])])],2))),128))]))]),$.value?(l(),n("div",{key:0,class:"modal-overlay",onClick:oe},[e("div",{class:"modal-content",onClick:h[2]||(h[2]=ce(()=>{},["stop"]))},[e("div",Bx,[e("h4",null,f(C.value?"Agregar Bloque al Contenedor":"Seleccionar Bloque"),1),e("button",{onClick:oe,class:"btn-close"},[_(y,{name:"close"})])]),C.value?(l(),n("div",Ax,h[8]||(h[8]=[e("i",{class:"fas fa-info-circle"},null,-1),B(" Los contenedores no pueden contener otros contenedores anidados ",-1)]))):R("",!0),e("div",Lx,[(l(!0),n(te,null,le(S.value,P=>(l(),n("div",{key:P.type,class:"template-card",onClick:H=>t(P.type)},[e("div",Rx,[e("i",{class:O(P.icon)},null,2)]),e("h5",null,f(P.name),1),e("p",null,f(P.description),1)],8,Dx))),128))])])])):R("",!0),m.value&&M.value?(l(),he(Ne(Q(M.value?.type)),{key:1,block:M.value,onUpdate:L,onUpdateRealTime:E,onClose:X},null,40,["block"])):R("",!0)])}}}),zx=re(Fx,[["__scopeId","data-v-265c9302"]]),Gx={class:"block-editor-page"},Nx={class:"editor-header"},qx={class:"header-left"},Hx={class:"page-info"},Ox={class:"page-slug"},jx={class:"header-actions"},Wx=["disabled"],Zx={class:"editor-content"},Xx={key:0,class:"edit-mode"},Kx={key:1,class:"preview-mode"},Jx={key:0,class:"empty-preview"},Qx={key:1,class:"preview-content"},Yx=ve({__name:"BlockEditorPage",setup(p){const u=zo(),c=We(),b=D({id:0,title:"",slug:"",pagecontent:[]}),i=D([]),w=D(!1),s=D(!1),r=J(()=>[...i.value].sort((C,S)=>C.order-S.order));fe(async()=>{const C=parseInt(u.params.id);if(C)try{const S=await we.getById(C);b.value=S.data,b.value.pagecontent&&Array.isArray(b.value.pagecontent)&&(i.value=b.value.pagecontent)}catch(S){console.error("Error loading page:",S),$()}});const $=()=>{c.push("/admin")},m=async()=>{s.value=!0;try{i.value.forEach((S,U)=>{S.order=U}),console.log("Saving blocks for page:",b.value.id),console.log("Blocks data:",i.value);const C=await we.update(b.value.id,{pagecontent:i.value});console.log("Save response:",C.data),M()}catch(C){console.error("Error saving blocks:",C),console.error("Error response:",C.response?.data);let S="Error al guardar los bloques. Por favor, intenta de nuevo.";C.response?.data?.message?S=C.response.data.message:C.response?.data?.errors&&(S=Object.values(C.response.data.errors).flat().join(", ")),alert(S)}finally{s.value=!1}},M=()=>{const C=document.createElement("div");C.innerHTML=`
    <div style="
      position: fixed;
      top: 20px;
      right: 20px;
      background: #28a745;
      color: white;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      z-index: 10000;
      font-weight: 600;
      animation: slideIn 0.3s ease-out;
    ">
      <i class="fas fa-check-circle" style="margin-right: 0.5rem;"></i>
      Bloques guardados exitosamente
    </div>
  `,document.body.appendChild(C),setTimeout(()=>{C.remove()},3e3)};return fe(()=>{const C=S=>{(S.ctrlKey||S.metaKey)&&S.key==="s"&&(S.preventDefault(),m()),S.key==="Escape"&&$()};return document.addEventListener("keydown",C),()=>{document.removeEventListener("keydown",C)}}),(C,S)=>(l(),n("div",Gx,[e("div",Nx,[e("div",qx,[e("button",{onClick:$,class:"btn-back"},S[3]||(S[3]=[e("i",{class:"fas fa-arrow-left"},null,-1),B(" Volver ",-1)])),e("div",Hx,[e("h1",null,f(b.value.title),1),e("span",Ox,"/"+f(b.value.slug),1)])]),e("div",jx,[e("button",{onClick:S[0]||(S[0]=U=>w.value=!w.value),class:"btn-secondary"},[e("i",{class:O(w.value?"fas fa-edit":"fas fa-eye")},null,2),B(" "+f(w.value?"Editar":"Vista previa"),1)]),e("button",{onClick:m,class:"btn-primary",disabled:s.value},[S[4]||(S[4]=e("i",{class:"fas fa-save"},null,-1)),B(" "+f(s.value?"Guardando...":"Guardar"),1)],8,Wx)])]),e("div",Zx,[w.value?(l(),n("div",Kx,[i.value.length===0?(l(),n("div",Jx,[S[6]||(S[6]=e("i",{class:"fas fa-eye-slash"},null,-1)),S[7]||(S[7]=e("h3",null,"Sin contenido",-1)),S[8]||(S[8]=e("p",null,"Agrega bloques para ver la vista previa",-1)),e("button",{onClick:S[2]||(S[2]=U=>w.value=!1),class:"btn-primary"},S[5]||(S[5]=[e("i",{class:"fas fa-plus"},null,-1),B(" Agregar Bloques ",-1)]))])):(l(),n("div",Qx,[(l(!0),n(te,null,le(r.value,U=>(l(),he(oo,{key:U.id,block:U,"is-editing":!1},null,8,["block"]))),128))]))])):(l(),n("div",Xx,[_(zx,{modelValue:i.value,"onUpdate:modelValue":S[1]||(S[1]=U=>i.value=U),"page-id":b.value.id,onSave:m,"is-full-page":!0},null,8,["modelValue","page-id"])]))])]))}}),e7=re(Yx,[["__scopeId","data-v-2d57042e"]]),Wo=Mt({history:Tt("./"),routes:[{path:"/",component:Js,children:[{path:"",name:"home",component:Ro,props:{defaultSlug:"inicio"}},{path:"/:slug",name:"page",component:Ro,props:!0}]},{path:"/login",name:"login",component:qi},{path:"/register",name:"register",component:ir},{path:"/admin",name:"admin",component:x0,meta:{requiresAuth:!0}},{path:"/admin/pages/:id/blocks",name:"block-editor",component:e7,meta:{requiresAuth:!0}}]});Wo.beforeEach((p,u,c)=>{const b=qe();p.meta.requiresAuth&&!b.isAuthenticated?c("/login"):c()});Ot.add(jt,Wt,Zt,Xt,Kt,Jt,Qt,Yt,es,os);const Xe=Pt(ss),o7=Bt();Xe.use(o7);Xe.use(Wo);Xe.component("Icon",N);Xe.component("FontAwesomeIcon",Ye);Xe.mount("#app");const t7=qe();t7.initializeAuth();
